/*
Copyright 2012, A+ v1.0.0
build time: Oct 28 17:49
*/
(function(a){var f=this;a=f[a]=f&&f[a]||{};a.mixin=function(e,d,c,b){if(!e||!d||typeof d!="object")return e;var g,h;if(b&&(g=b.length))for(var i=0;i<g;i++){h=b[i];if(d[h]&&(c||!(h in e)))e[h]=d[h]}else for(h in d)if(c||!(h in e))e[h]=d[h];return e};a.mixin(a,{global:f,version:"1.0.0",locale:"@LOCALE@",__init:function(){this.Config=this.Config||{};this.Env=this.Env||{};this.Config.DEBUG=""},applyConfig:function(e){e=e||{};e.DEBUG&&delete e.DEBUG;a.mixin(this.Config,e,true)},namespace:function(){for(var e=
arguments,d=null,c,b=e[e.length-1]===true,g=0,h,i;(c=e[g])&&typeof c==="string";++g){c=c.split(".");d=b?f:this;for(h=f[c[0]]===d?1:0;i=c[h];++h)d=d[i]=d[i]||{}}return d}});a.__init();return a})("MT");
(function(a){function f(d){var c=["["+a.now()+"] "+d.type+":\n"],b;for(b in d)b!="type"&&c.push("\t"+b+": "+d[b]);return c.join("\n")}var e=a.global;a.console=function(d){var c=this.Config.DEBUG&&e.console;if(!a.isObject(d)&&c)e.console.log(d);else if(d.type==="error")throw Error("Error: "+f(d));else if(c&&d.type)if(e.console[d.type])e.console[d.type](f(d))}})(MT);
(function(a,f){var e=0,d=a.global,c=Object.prototype,b=c.toString,g=true,h={toString1:1},i,j=true;for(i in h){g=null;j=false}if(g)g=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];a.PROPERTY_="mt_mtid";a.mixin(a,{enumerables:g,guid:function(k){return(k||"MT_pre")+ ++e},getUid:function(k){return k[a.PROPERTY_]||(k[a.PROPERTY_]=++e)},now:Date.now||function(){return+new Date},scope:function(k){k.call(d)},isFunction:function(k){return k&&b.call(k)===
"[object Function]"},isString:function(k){return typeof k==="string"},isBoolean:function(k){return typeof k==="boolean"},isUndefined:function(k){return k===f},isNull:function(k){return k===null},isDate:function(k){return!!(k&&k.getTimezoneOffset&&k.setUTCFullYear)},isArray:Array.isArray?Array.isArray:function(k){return b.call(k)==="[object Array]"},isNumber:function(k){return typeof k==="number"&&isFinite(k)},isObject:function(k){return k===Object(k)},isPlainObject:function(k){return k&&b.call(k)===
"[object Object]"&&"isPrototypeOf"in k},has:function(k,l){return c.hasOwnProperty.call(k,l)},isEmpty:function(k){if(a.isNull(k))return true;if(a.isArray(k)||a.isString(k))return k.length===0;for(var l in k)if(a.has(k,l))return false;return true},each:function(k,l,o){if(k){var m,p=0,t=k.length,w=t===f||a.isFunction(k);o=o||d;if(w){for(m in k)if(!j||c[m]===f)if(l.call(o,k[m],m)===false)break;if(j)for(m in c)if(c.hasOwnProperty.call(k,m)||k[m]!==c[m])if(l.call(o,k[m],m)===false)break}else for(m=k[0];p<
t&&l.call(o,m,p)!==false;m=k[++p]);}return k},inherits:function(k,l){function o(){}o.prototype=l.prototype;k.superClass_=l.prototype;k.prototype=new o;k.prototype.constructor=k},getSingleton:function(k){k.getInstance=function(){return k.instance_||(k.instance_=new k)}},globalEval:function(k){if(k&&/\S/.test(k))(d.execScript||function(l){d.eval.call(d,l)})(k)},noop:function(){}})})(MT);
(function(a){var f=/\-([a-z])/ig;a.string={leftPad:function(e,d,c){e=String(e)||"";for(c||(c=" ");e.length<d;)e=c+e;return e},getRealLen:function(e,d){if(typeof e!="string")return 0;if(d){var c=e.replace(/[\x00-\xFF]/g,"");return e.length-c.length+encodeURI(c).length/3}else return e.replace(/[^\x00-\xFF]/g,"**").length},cut:function(e,d,c){e+="";c=c||"";for(var b=e.length,g=Math.min(Math.floor(d/2),b),h=a.string.getRealLen(e.slice(0,g));g<b&&h<d;g++)h+=1+!/[\x00-\xFF]/.test(e.charAt(g));return e.slice(0,
h>d?g-1:g)+(g<b?c:"")},isUrl:function(e){return/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i.test(e)},compareVersions:function(e,d){for(var c=(e+"").split("."),b=(d+"").split("."),g=Math.max(c.length,b.length),h=0,i=0;h==0&&i<g;i++){var j=c[i]||"",k=b[i]||"",l=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(j)||["","",""],p=o.exec(k)||["","",""];if(m[0].length==0&&p[0].length==0)break;h=m[1].length==0?0:parseInt(m[1],10);var t=p[1].length==0?0:parseInt(p[1],10);h=a.string.compareElements(h,
t)||a.string.compareElements(m[2].length==0,p[2].length==0)||a.string.compareElements(m[2],p[2])}while(h==0)}return h},compareElements:function(e,d){if(e<d)return-1;else if(e>d)return 1;return 0},getQueryString:function(s_,e){if(e=s_.match(RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)")))return unescape(e[2]);return null},compileTpl:function(e,d){return e.replace(/\{\w+\}/g,function(c){return String(d[c.replace(/\{|\}/g,"")])||""})},contains:function(e,d){return e.indexOf(d)!=-1},isEmpty:function(e){return/^[\s\xa0]*$/.test(e)},
capitalFirst:function(e){e+="";return e.charAt(0).toUpperCase()+e.substring(1)},toCamelCase:function(e){e+="";return e.replace(f,function(d,c){return c.toUpperCase()})},startsWith:function(e,d){return e.lastIndexOf(d,0)===0},endsWith:function(e,d){return e.slice(-d.length)===d},trim:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ltrim:function(e){return e.replace(/^[\s\xa0]+|/g,"")},rtrim:function(e){return e.replace(/[\s\xa0]+$/g,"")},htmlEncode:function(){var e={"<":"&lt;",">":"&gt;",
"&":"&amp;",'"':"&quot;"},d=/(<|>|&|")/g;return function(c){return!MT.isString(c)?c:String(c).replace(d,function(b,g){return e[g]})}}(),urlAppend:function(e,d){if(!a.isEmpty(d))return e+(e.indexOf("?")===-1?"?":"&")+d;return e}}})(MT);
(function(a){var f=Array.prototype,e=f.indexOf,d=f.lastIndexOf;a.array={indexOf:e?function(c,b){return e.call(b,c)}:function(c,b){for(var g=0,h=b.length;g<h;++g)if(c===b[g])return g;return-1},lastIndexOf:d?function(c,b){return d.call(b,c)}:function(c,b){for(var g=b.length-1;g>=0;--g)if(b[g]===c)return g;return-1},remove:function(c,b){var g=false,h=a.array.indexOf(b,c);if(h!=-1){g=true;MT.array.removeAt(c,h)}return g},removeAt:function(c,b){var g=false;if(MT.number.isInt(b)&&b>=0){g=true;f.splice.call(c,
b,1)}return g},some:f.some?function(c,b,g){return f.some.call(c,b,g)}:function(c,b,g){for(var h=c.length,i=0;i<h;++i)if(i in c&&b.call(g,c[i],i,c))return true;return false},every:f.every?function(c,b,g){return f.every.call(c,b,g)}:function(c,b,g){for(var h=c.length,i=0;i<h;++i)if(i in c&&!b.call(g,c[i],i,c))return false;return true},findIndex:function(c,b,g){for(var h=c.length,i=0;i<h;++i)if(i in c&&b.call(g,c[i],i,c))return i;return-1},unique:function(c){for(var b={},g=[],h=0,i=c.length,j;h<i;++h){j=
c[h];b[j]||g.push(j);b[j]=true}return g},filter:f.filter?function(c,b){return c.filter(b)}:function(c,b){var g=[];a.each(c,function(h,i){if(b(h,i),c)g.push(h)});return g},map:f.map?function(c,b,g){return c.map(b,g)}:function(c,b,g){var h=[];a.each(c,function(i,j){h[j]=b.call(g,i,j,c)},g);return h},toArray:function(c){if(!c)return[];if(a.isArray(c))return f.slice.call(c);if(c.toArray&&a.isFunction(c.toArray))return c.toArray();return a.Object.getValues(c)},zip:function(){var c=f.slice.call(arguments);
if(!c.length)return[];var b=[],g=0,h;h=MT.array.map(c,function(i){return i.length});for(h=Math.min.apply(Math,h);g<h;g++)b[g]=MT.array.map(c,function(i){return i[g]});return b},flatten:function(){for(var c=[],b=0;b<arguments.length;b++){var g=arguments[b];a.isArray(g)?c.push.apply(c,a.array.flatten.apply(null,g)):c.push(g)}return c}}})(MT);
(function(a,f){function e(q,s){function r(){z.setReady(q);s&&s()}var u=z.getUnReady(q),x=u.length;if(x===0)return r();for(var y=a.Env.modules,B,M=0,H=x;x=u[M];++M)(function(I){function N(){var D=(y[I]||0).deps||[],E=D.length;if(E){D=i(I,D);E=D.length}if(E){H+=E;e(D,function(){H-=E;H===0&&r()})}--H===0&&r()}(B=y[I])?N():d(I,N)})(x)}function d(q,s){function r(){if(J.length){a.each(J,function(u){k(u.id,q,u)});J=[]}F[q]&&delete F[q];s&&s()}if(F[q])K(F[q],r);else{L=q;F[q]=c(q,function(){MT.console(q+" is loaded.",
"info");r()});L=null}}function c(q,s){var r=A.test(q),u=p.createElement(r?"link":"script"),x=q+(a.Config.enableCache?"?_t="+a.now():"");if(a.Config.DEBUG)x=x.replace(/-min/g,"");if(r){u.href=x;u.rel="stylesheet";u.type="text/css";v.appendChild(u);s&&s()}else{u.type="text/javascript";u.async=true;u.src=x;K(u,function(){s&&s()});v.insertBefore(u,v.firstChild)}return u}function b(q,s,r){this.id=q;this.deps=s||[];this.factory=r}function g(q){return function(s){var r=z.id2Uri(s,q.uri);s=a.Env.modules[r];
if(!s||A.test(r))return null;if(h(q,r))return s.exports;if(!s.exports){r={uri:r,deps:s.deps||[],parent:q};var u=s.factory;s.id=r.uri;s.exports={};delete s.factory;if(a.isFunction(u)){u.toString().search(/\sexports\s*=\s*[^=]/);r=u(g(r),s.exports,s);if(r!==f)s.exports=r}else if(u!==f)s.exports=u}return s.exports}}function h(q,s){if(q.uri===s)return true;if(q.parent)return h(q.parent,s);return false}function i(q,s){var r=a.Env.modules;return a.array.filter(s,function(u){return!j(r[u],q)})}function j(q,
s){if(!q||q.status===w)return false;var r=q.deps||[],u=a.Env.modules;if(r.length)if(a.array.indexOf(s,r)!==-1)return true;else for(var x=0;x<r.length;x++)if(j(u[r[x]],s))return true;return false}function k(q,s,r){var u=a.Env.modules,x;x=q?z.id2Uri(q,s):s;r.deps=z.ids2Uris(r.deps||[],x);u[x]=r;if(q&&s!==x){var y=u[s];y&&a.each(r.deps,function(B){a.array.indexOf(B,y.deps)===-1&&y.deps.push(B)})}}var l=a.global,o=typeof l!==f,m=o?l:null,p=o?m.document:null,t=p&&p.documentElement,w=4,v=p.getElementsByTagName("head")[0]||
t,C=!l.addEventListener,K=document.addEventListener?function(q,s){q.addEventListener("load",s,false)}:function(q,s){var r=q.onreadystatechange;q.onreadystatechange=function(){var u=q.readyState;if(u==="loaded"||u==="complete"){q.onreadystatechange=null;r&&r();s.call(this)}}},A=/\.css(?:\?|$)/i,G=/\/\/.*|\/\*[\s\S]*?\*\/|"(?:\\[\s\S]|[^"\\])*"|'(?:\\[\s\S]|[^'\\])*'|[;=(,:!^]\s*\/(?:\\.|[^\/\\])+\/|(?:^|\W)\s*require\s*\(\s*("[^"\\]*"|'[^'\\]*')\s*\)/g,J=[],L,F={};a.mixin(a,{load:function(q,s,r){if(a.isString(q))q=
[q];var u=z.ids2Uris(q,r);e(u,function(){var x=g({uri:r}),y=[];a.each(u,function(B){y.push(x(B))});s&&s.apply(a,y)});return self}});a.define=function(q,s,r){var u={},x="";u=arguments;if(u.length===1){r=q;q=f}else if(u.length===2){r=s;s=f;if(a.isArray(q)){s=q;q=f}}if(!a.isArray(s)&&a.isFunction(r)){u=r.toString();var y=[],B;if(u+="")for(G.lastIndex=0;B=G.exec(u);)B[1]&&y.push(B[1].slice(1,-1));s=y}u=new b(q,s,r);if(q)x=z.id2Uri(q);else if(C&&!l.opera)x=(x=z.getInteractiveJs())?z.getScriptAbsoluteSrc(x):
L;x?k(q,x,u):J.push(u);return u};a.add=function(q,s){var r=a.define(q,s);r.factory&&r.factory(this,f)};o=l.location;var P=o.protocol+"//"+o.host+o.pathname,O={},z={id2Uri:function(q,s){if(O[q])return q;var r;s=s||P;r=q.indexOf("://")!==-1?q:a.string.startsWith(q,"./")||a.string.startsWith(q,"../")?z.dirname(s)+q:a.string.startsWith(q,"/")?s.replace(/^(\w+:\/\/[^\/]*)\/?.*$/,"$1")+q:a.Config.basePath+"/"+q;r=r.replace(/([^:\/])\/+/g,"$1/");if(r.indexOf(".")!==-1){r=r.split("/");for(var u=[],x,y=0;y<
r.length;++y){x=r[y];if(x!==".")if(x===".."){u.length===0&&a.console({type:"error",msg:"wrong path"});u.pop()}else u.push(x)}r=u.join("/")}if(/#$/.test(r))r=r.slice(0,-1);else if(r.indexOf("?")===-1&&!/\.(?:css|js)$/.test(r))r+=".js";O[r]=true;return r},ids2Uris:function(q,s){var r=[];a.each(q,function(u){r.push(z.id2Uri(u,s))});return r},dirname:function(q){q=q.match(/.*(?=\/.*$)/);return(q?q[0]:".")+"/"},getInteractiveJs:function(){for(var q=v.getElementsByTagName("script"),s=0,r;q[s];++s){r=q[s];
if(r.readyState==="interactive")return r}return null},getScriptAbsoluteSrc:function(q){return q.hasAttribute?q.src:q.getAttribute("src",4)},getUnReady:function(q){var s=a.Env.modules;return a.array.filter(q,function(r){r=s[r];return!r||r.status!==w})},setReady:function(q){var s=a.Env.modules;a.each(q,function(r){if(s[r])s[r].status=w})}};a.__initLoad=function(){var q=this.Config,s=p.getElementsByTagName("script");q.basePath="/Scripts";q.win=m;q.doc=p;q.docEl=t;q.docMode=p.documentMode;q.isStrict=
p.compatMode=="CSS1Compat";a.Env.modules={};for(q=0;q<s.length;++q){var r=s[q],u=z.getScriptAbsoluteSrc(r),x=[];if(u.match(/[mt|mtlib](-min)?\.js(\W)/i)){u=u.match(/(^|&|\?)m=([^&]*)(&|$)/i);if(u[2])x=u[2].split(",");else if(u=r.getAttribute("data-main"))x=u.split(",");x.length&&a.load(x)}}};a.__initLoad()})(MT);
(function(a){function f(){if(!h){try{g.doScroll("left")}catch(l){setTimeout(f,1);return}e()}}function e(){if(!h){h=true;if(j){for(var l,o=0;l=j[o++];)l.call(c,a);j=null}}}var d=a.Config,c=d.win,b=d.doc,g=d.docEl,h=false,i=false,j=[],k;a.mixin(a,{ready:function(l){if(!i){i=true;if(b.readyState==="complete")setTimeout(e,1);else if(b.addEventListener){b.addEventListener("DOMContentLoaded",k,false);c.addEventListener("load",e,false)}else if(b.attachEvent){b.attachEvent("onreadystatechange",k);c.attachEvent("onload",
e);var o=false;try{o=c.frameElement==null}catch(m){}g.doScroll&&o&&f()}}if(h)l.call(c,this);else j&&j.push(l);return this}});if(b.addEventListener)k=function(){b.removeEventListener("DOMContentLoaded",k,false);e()};else if(b.attachEvent)k=function(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",k);e()}}})(MT);
MT.add("mt-class-base",function(a){function f(){}function e(){return function(){return this.constructor.apply(this,arguments)}}a.mixin(f,{$className:"MT.Base",$isClass:true,extend:function(g){var h=g.prototype,i,j,k;j=this.prototype=a.object.chain(h);j.self=this;this.superClass_=j.superClass_=h;if(!g.$isClass){i=a.Base.prototype;for(k in i)if(k in j)j[k]=i[k]}if(j=h.$statics){k=0;for(h=j.length;k<h;k++){i=j[k];this.hasOwnProperty(i)||(this[i]=g[i])}}},addStatics:function(g){for(var h in g)if(g.hasOwnProperty(h))this[h]=
g[h];return this},addMembers:function(g){var h=this.prototype,i=a.enumerables,j,k=[],l,o;for(j in g)j!="constructor"&&k.push(j);i&&k.push.apply(k,i);l=0;for(o=k.length;l<o;l++){j=k[l];if(g.hasOwnProperty(j)){i=g[j];if(typeof i=="function"&&!i.$isClass&&i!==a.noop){i.$owner=this;i.$name=j}h[j]=i}}if(g.hasOwnProperty("constructor")){h.constructor=g.constructor;h.constructor.$owner=this;h.constructor.$name="constructor"}return this},mixin:function(g,h){if(h){var i=h.prototype,j=this.prototype,k;if(!j.hasOwnProperty("mixins"))j.mixins=
"mixins"in j?MT.object.chain(j.mixins):{};for(k in i)if(k==="mixins")a.mixin(j.mixins,i[k],true);else if(typeof j[k]=="undefined")j[k]=i[k];j.mixins[g]=i}},implement:function(){return this.addMembers.apply(this,arguments)}});f.implement({callParent:function(g){var h;return((h=this.callParent.caller)&&(h=h.$owner?h:h.caller)&&h.$owner.superClass_[h.$name]).apply(this,g||[])},self:f,constructor:function(){return this}});MT.Base=f;var d=[],c,b;for(c in f)f.hasOwnProperty(c)&&d.push(c);b=d.length;a.Class=
function(g,h,i){var j,k,l,o=a.Base.prototype,m;if(typeof g!="function"){i=h;h=g;g=null}h||(h={});g||(g=e());for(j=0;j<b;j++){name=d[j];g[name]=f[name]}g.$className=h.$className;if(l=h.$extend){l=a.isString(l)?a.mtGetClass(h.$extend):l;delete h.$extend}l=l||a.Base;m=l.prototype;if(!l.$isClass)for(j in o)m[j]||(m[j]=o[j]);g.extend(l);if(h.statics){g.addStatics(h.statics);delete h.statics}if(h.mixins){j=h.mixins||{};delete h.mixins;for(k in j)j.hasOwnProperty(k)&&g.mixin(k,a.mtGetClass(j[k]))}g.addMembers(h);
i&&i.call(g,g);return g};a.mixin(a.Class,{classes:{}});a.mtGetClass=function(g){if(!a.isString(g))return g;var h=g;if(!/^MT\.(ui)?/.test(g)){g="MT.ui."+g;h="MT."+g}(g=a.Class.classes[g])||(g=a.Class.classes[h]);return g?g:a.Class.classes["MT.ui.Component"]};a.mtClass=function(g,h,i){if(!g||!a.isString(g))throw Error("invalid className @ M.mtClass");h.$className=g;return new a.Class(h,function(){a.Class.classes[g]=this;var j=a.global,k=g.split("."),l=k.length-1,o=k[l],m,p;for(m=0;m<l;m++){p=k[m];j=
j[p]=j[p]||{}}j[o]=this;i&&i.call(this,this)})}});
MT.add("util-cookie",function(a){function f(e,d,c){var b=a.Config.doc;if(arguments.length>1&&(d===null||typeof d!=="object")){c=c||{};if(d===null)c.expires=-1;if(typeof c.expires==="number"){var g=c.expires,h=new Date;c.expires=new Date;h.setDate(h.getDate()+g)}return b.cookie=[encodeURIComponent(e),"=",c.raw?String(d):encodeURIComponent(String(d)),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=d||{};
h=c.raw?function(i){return i}:decodeURIComponent;return(g=RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(b.cookie))?h(g[1]):null}a.cookie={set:function(e,d,c){if(/[;=\s]/.test(e))throw Error("\u65e0\u6548cookie\u540d\u79f0\uff01");if(/[;\r\n]/.test(d))throw Error("\u65e0\u6548cookie\u503c\uff01");f(e,d,c)},get:function(e,d){var c=f(e);if(!c&&d)c=d;return c},remove:function(e){f(e,"")},isCookieEnable:function(){var e=navigator.cookieEnabled;if(e&&a.ua.webkit){var d="COOKIES_TEST_"+a.now();f(d,"1");if(f(d))return false;f(d,null)}return e}}});
(function(a){var f=a.Config,e=f.win,d=e?e.document:null,c=f.docMode,b=(f=e.navigator)?f.userAgent:null,g={},h={};f=f&&f.platform||"";a.ua={ie:false,gecko:false,webkit:false,opera:false,safari:false};if(b){a.ua.opera=/opera/i.test(b);a.ua.ie=!!e.ActiveXObject;a.ua.webkit=!a.ua.opera&&/webkit/i.test(b);a.ua.gecko=!a.ua.opera&&!a.ua.webkit&&/gecko/i.test(b)&&!/like gecko/i.test(b);a.ua.safari=a.ua.webkit;a.ua.WIN=MT.string.contains(f,"Win");a.ua.MAC=MT.string.contains(f,"Mac");a.ua.LINUX=MT.string.contains(f,
"Linux")}a.ua.version=function(){var j="",k;if(a.ua.opera&&a.global.opear){j=a.global.opera.version;j=typeof j=="function"?j():j}else{if(a.ua.gecko)k=/rv\:([^\);]+)(\)|;)/;else if(a.ua.ie)k=/MSIE\s+([^\);]+)(\)|;)/;else if(a.ua.webkit)k=/WebKit\/(\S+)/;if(k)j=(j=k.exec(b))?j[1]:""}if(a.ua.ie)if(c>parseFloat(j))return String(c);return j};a.ua.isVersion=function(j){return g[j]||(g[j]=a.string.compareVersions(a.ua.version(),j)===0)};a.ua.ie6=a.ua.ie&&a.ua.isVersion("6");a.ua.isDocumentMode=function(j){return h[j]||
(h[j]=a.ua.ie&&c&&c>=j)};if(a.ua.ie6)try{d.execCommand("BackgroundImageCache",false,true)}catch(i){}})(MT);
MT.add("mt-flash",function(a){function f(i){i=i.match(/[\d]+/g);i.length=3;return i.join(".")}var e=false,d="";if(navigator.plugins&&navigator.plugins.length){var c=navigator.plugins["Shockwave Flash"];if(c){e=true;if(c.description)d=f(c.description)}if(navigator.plugins["Shockwave Flash 2.0"]){e=true;d="2.0.0.11"}}else if(navigator.mimeTypes&&navigator.mimeTypes.length){if(e=(c=navigator.mimeTypes["application/x-shockwave-flash"])&&c.enabledPlugin)d=f(c.enabledPlugin.description)}else try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
e=true;d=f(c.GetVariable("$version"))}catch(b){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");e=true;d="6.0.21"}catch(g){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");e=true;d=f(c.GetVariable("$version"))}catch(h){}}}a.ua.flash={};a.ua.flash.HAS_FLASH=e;a.ua.flash.VERSION=d;a.ua.flash.isVersion=function(i){return a.string.compareVersions(a.ua.flash.VERSION,i)>=0}});
(function(a){var f=function(){};a.object={chain:function(e){f.prototype=e;e=new f;f.prototype=null;return e},filter:function(e,d,c){var b={};a.each(e,function(g,h){if(d.call(c||this,g,h))b[h]=g},c);return b},map:function(e,d,c){var b={};a.each(e,function(g,h){b[h]=d.call(c,g,h)},c);return b},some:function(e,d,c){for(var b in e)if(d.call(c,e[b],b,e))return true;return false},every:function(e,d,c){for(var b in e)if(!d.call(c,e[b],b,e))return false;return true},getCount:function(e){var d=0,c;for(c in e)d++;
return d},getKeys:function(e){var d=[],c;for(c in e)d.push(c);return d},getValues:function(e){var d=[],c;for(c in e)d.push(e[c]);return d},remove:function(e,d){var c;if(c=d in e)delete e[d];return c},clone:function(e){var d={};a.mixin(d,e);return d}}})(MT);
MT.add("mt-number",function(a){var f=(0.9).toFixed()!=="1";a.number={clamp:function(e,d,c){e=parseFloat(e);isNaN(d)||(e=Math.max(e,d));isNaN(c)||(e=Math.min(e,c));return e},snap:function(e,d,c,b){var g=e;if(!(d&&e))return e;e%=d;if(e!==0){g-=e;if(e*2>=d)g+=d;else if(e*2<-d)g-=d}return a.number.clamp(g,c,b)},isFinite:function(e){return isFinite(e)&&!isNaN(e)},isInt:function(e){return isFinite(e)&&e%1==0},toFixed:function(e,d){if(f){d=d||0;var c=Math.pow(10,d);return(Math.round(e*c)/c).toFixed(d)}return e.toFixed(d)},
parse:function(e,d){d=d||0;if(isFinite(e))e=parseFloat(e);return!isNaN(e)?e:d}}});
(function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(f,e){var d=[],c;e=e||a.length;if(f)for(c=0;c<f;c++)d[c]=a[0|Math.random()*e];else{var b;d[8]=d[13]=d[18]=d[23]="-";d[14]="4";for(c=0;c<36;c++)if(!d[c]){b=0|Math.random()*16;d[c]=a[c==19?b&3|8:b]}}return d.join("")};Math.uuidFast=function(){for(var f=Array(36),e=0,d,c=0;c<36;c++)if(c==8||c==13||c==18||c==23)f[c]="-";else if(c==14)f[c]="4";else{if(e<=2)e=33554432+Math.random()*16777216|0;
d=e&15;e>>=4;f[c]=a[c==19?d&3|8:d]}return f.join("")};Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var e=Math.random()*16|0;return(f=="x"?e:e&3|8).toString(16)})}})();(function(a){a.math={lerp:function(f,e,d){return f+d*(e-f)},uuid:function(f,e){return Math.uuid(f,e)},uuidFast:function(){return Math.uuidFast()},uuidCompact:function(){return Math.uuidCompact()}}})(MT);var JSON;JSON||(JSON={});
(function(){function a(j){return j<10?"0"+j:j}function f(j){c.lastIndex=0;return c.test(j)?'"'+j.replace(c,function(k){var l=h[k];return typeof l==="string"?l:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+j+'"'}function e(j,k){var l,o,m,p,t=b,w,v=k[j];if(v&&typeof v==="object"&&typeof v.toJSON==="function")v=v.toJSON(j);if(typeof i==="function")v=i.call(k,j,v);switch(typeof v){case "string":return f(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);
case "object":if(!v)return"null";b+=g;w=[];if(Object.prototype.toString.apply(v)==="[object Array]"){p=v.length;for(l=0;l<p;l+=1)w[l]=e(l,v)||"null";m=w.length===0?"[]":b?"[\n"+b+w.join(",\n"+b)+"\n"+t+"]":"["+w.join(",")+"]";b=t;return m}if(i&&typeof i==="object"){p=i.length;for(l=0;l<p;l+=1)if(typeof i[l]==="string"){o=i[l];if(m=e(o,v))w.push(f(o)+(b?": ":":")+m)}}else for(o in v)if(Object.prototype.hasOwnProperty.call(v,o))if(m=e(o,v))w.push(f(o)+(b?": ":":")+m);m=w.length===0?"{}":b?"{\n"+b+w.join(",\n"+
b)+"\n"+t+"}":"{"+w.join(",")+"}";b=t;return m}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b,g,h={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof JSON.stringify!=="function")JSON.stringify=function(j,k,l){var o;g=b="";if(typeof l==="number")for(o=0;o<l;o+=1)g+=" ";else if(typeof l==="string")g=l;if((i=k)&&typeof k!=="function"&&(typeof k!=="object"||typeof k.length!=="number"))throw Error("JSON.stringify");return e("",{"":j})};
if(typeof JSON.parse!=="function")JSON.parse=function(j,k){function l(m,p){var t,w,v=m[p];if(v&&typeof v==="object")for(t in v)if(Object.prototype.hasOwnProperty.call(v,t)){w=l(v,t);if(w!==undefined)v[t]=w;else delete v[t]}return k.call(m,p,v)}var o;j=String(j);d.lastIndex=0;if(d.test(j))j=j.replace(d,function(m){return"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(j.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){o=eval("("+j+")");return typeof k==="function"?l({"":o},""):o}throw new SyntaxError("JSON.parse");}})();MT.add("mt-JSON",function(a){var f=window.JSON;a.JSON={parse:function(e){if(e==null||e==="")return null;return f.parse(e)},stringify:f.stringify}});
MT.add("util-date",function(a){var f=Date.prototype;a.Date={YEAR:"y",MONTH:"m",DAY:"d",HOUR:"h",MINUTE:"mi",SECOND:"s",MILLI:"ms",dayNames:{SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6},monthNames:{JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11},isLeapYear:function(d){d=MT.number.isInt(d)?d:d.getFullYear();return!!((d&3)===0&&(d%100||d%400===0&&d))},getGMTOffset:function(d,c){var b=d.getTimezoneOffset();return(b>0?"-":"+")+MT.string.leftPad(Math.floor(Math.abs(b)/60),2,"0")+
(c?":":"")+MT.string.leftPad(Math.abs(b%60),2,"0")},getDaysOfMonth:function(d,c){var b=[31,28,31,30,31,30,31,31,30,31,30,31],g,h;g=MT.isDate(d)?d.getMonth():d;h=c||(MT.isDate(d)?d:new Date);return g==1&&e.isLeapYear(h)?29:b[g]},getDayOfYear:function(d){var c=d.getDate()-1,b=d.clone(d);d=d.getMonth();var g;b.setDate(1);b.setMonth(0);for(g=0;g<d;b.setMonth(++g))c+=e.getDaysOfMonth(b);return c},getWeekOfYear:function(){return function(d){d=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()+3)/864E5;d=
Math.floor(d/7);var c=(new Date(d*6048E5)).getUTCFullYear();return d-Math.floor(Date.UTC(c,0,7)/6048E5)+1}}(),getFirstDateOfMonth:function(d){return new Date(d.getFullYear(),d.getMonth(),1)},getLastDateOfMonth:function(d){return new Date(d.getFullYear(),d.getMonth(),e.getDaysOfMonth(d))},getFirstDayOfMonth:function(d){return e.getFirstDateOfMonth(d).getDay()},getLastDayOfMonth:function(d){return e.getLastDateOfMonth(d).getDay()},format:function(d,c){var b={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":d.getHours(),
"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),S:d.getMilliseconds()};if(/(y+)/.test(c))c=c.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length));for(var g in b)if(RegExp("("+g+")").test(c))c=c.replace(RegExp.$1,RegExp.$1.length==1?b[g]:("00"+b[g]).substr((""+b[g]).length));return c},parse:function(d){d=Date.parse(d);if(isNaN(d))return false;return true}};var e=a.Date;f.clone=function(){return new Date(this.getTime())};f.add=function(d,c){var b=this.clone();
if(!d||c===0)return b;switch(d.toLowerCase()){case e.MILLI:b.setMilliseconds(this.getMilliseconds()+c);break;case e.SECOND:b.setSeconds(this.getSeconds()+c);break;case e.MINUTE:b.setMinutes(this.getMinutes()+c);break;case e.HOUR:b.setHours(this.getHours()+c);break;case e.DAY:b.setDate(this.getDate()+c);break;case e.MONTH:var g=this.getDate();if(g>28)g=Math.min(g,e.getFirstDateOfMonth(this).add("mo",c).getLastDateOfMonth().getDate());b.setDate(g);b.setMonth(this.getMonth()+c);break;case e.YEAR:b.setFullYear(this.getFullYear()+
c)}return b};f.isBetween=function(d,c){var b=this.getTime();return d.getTime()<=b&&b<=c.getTime()};f.getElapsed=function(d){return(d||new Date).getTime()-this.getTime()};f.format=f.format?f.format:function(d){return MT.Date.format(this,d)}});MT.add("util-cache",function(a){if(!a.cache)a.cache={}});
MT.add("mt-slot",function(a){var f=a.global;f.SIGNAL=function(e,d){var c={memType:1};c.type=MT.isString(e)?e:MT.isObject(e)&&e.type?e.type:"unknown";c.src=e.src||d;return c};f.SIGNAL.SIGNAL_CODE=1;a.SLOT_COUNT=0;f.SLOT=function(e,d,c,b){var g={memType:2,once:false,priority:0,uuid_:++a.SLOT_COUNT},h=MT.noop();if(MT.isObject(e)||MT.isFunction(e)){if(e.once)g.once=true;if(e.priority)g.priority=e.priority;g.scope=d;g.prevParams=c;g.capture=b||false;if(MT.isFunction(e))h=e;else if(e.listener&&MT.isFunction(e.listener))h=
e.listener}g.callback=h;return g};f.SLOT.SLOT_CODE=2});
MT.add("mt-signal",function(a,f){function e(c,b){a.Base.call(this);this.key=c;this.tag=b;this.slots={};this.delegateCount={};this.eventHandle_=null}a.inherits(e,a.Base);e.sList={};e.key_=0;a.Element=e;var d=e.prototype;e.meta=function(c){if(c instanceof e)return c;var b=MT.getUid(c),g=MT.cache[b]||(MT.cache[b]={});g=g.e;if(MT.isUndefined(g))g=MT.cache[b].e=new e(b,c);return g};e.addSig_=function(c){e.sList[c.type]=e.sList[c.type]||++e.key_;return e.sList[c.type]};d.replaceSig_=function(c,b){var g=
MT.isString(c)?c:c.type;e.sList[b]=e.sList[g]};d.regSig=function(c){c=this.key+"_"+e.addSig_(c);this.getSlots_(c);return c};d.getSlots_=function(c){this.slots[c]=this.slots[c]||[];return this.slots[c]};d.hasSlot_=function(c,b){var g=this.getSlots_(c),h=false;return h=MT.array.some(g,function(i){if((!b.rec_&&!i.rec_||b.rec_==i.rec_)&&b.callback==i.callback&&i.scope==b.scope)return true})};d.addSlot_=function(c,b){var g=this.getSlots_(c),h=g.length;if(this.hasSlot_(c,b))return c;this.delegateCount[c]=
this.delegateCount[c]||0;if(b.priority>0){do--h;while(g[h]&&b.priority<=MT.number.parse(g[h].priority,0));h+=this.delegateCount[c]}if(b.rec_)h=this.delegateCount[c]++;g.splice(h<0?0:h,0,b);return c};d.dispatch=function(c,b){var g=this.key+"_"+e.addSig_(c),h,i=this.slots[g]||[],j=this.delegateCount[g],k=this.tag;g=b||{};var l,o,m,p,t,w,v=[];if(j&&!(g.button&&g.type==="click"))for(l=g.target;l&&l!=k;l=l.parentNode||k)if(l.disabled!==true){o={};w=[];for(m=0;m<j;m++){p=i[m];t=p.rec_;if(o[t]===f){var C=
o,K=t,A;A=p.quick_;var G=l.attributes||{};A=(!A[1]||l.nodeName.toLowerCase()===A[1])&&(!A[2]||(G.id||{}).value===A[2])&&(!A[3]||A[3].test((G["class"]||{}).value));C[K]=A}o[t]&&w.push(p)}w.length&&v.push({elem:l,matches:w})}i.length>j&&v.push({elem:k,matches:i.slice(j)});for(m=0;m<v.length&&!g.isPropagationStopped;m++){j=v[m];g.currentTarget=j.elem;for(i=0;i<j.matches.length&&!g.isImmediatePropagationStopped;i++){p=j.matches[i];h=this.wrapAndfire_(c,p,b,j.elem);if(h===false)return false}}return h};
d.wrapAndfire_=function(c,b,g,h){var i=[],j=g||{},k=this.tag;if(g)if(a.isArray(g))i=g;else i.push(g);b.prevParams&&i.push(b.prevParams);if(b.memType===SIGNAL.SIGNAL_CODE){if(!b.src||b.src===k&&b.type===c.type){MT.console({type:"error",info:"signal call signal,and unknown signal src to dispatch or circle dispatch."});return false}return MT.fire(b.src,b,i)}else{if(b.proxy){j.delegateTarget=k;j.orgType=b.origType_;j.handleObj=b;i[0]=j;g=((MT.events.special[b.origType_]||{}).handle||b.callback).apply(b.scope||
h,i);if(g!==f)if(g===false){j.preventDefault();j.stopPropagation()}}else g=b.callback.apply(b.scope,i);b.once&&this.removeBySig_(c,b.rec_,b);return g}};d.removeSlot=function(c,b,g){var h;if(c)this.removeBySig_(c,b,g);else for(h in this.slots)this.removeBySig_(h,b,g)};d.removeBySig_=function(c,b,g){var h,i=this.tag,j,k,l,o=false,m;if(!MT.isString(c)){c=e.addSig_(c);c=this.key+"_"+c}k=this.slots[c]||[];for(j=0;j<k.length;j++){l=k[j];if(!h)h=l.type;if((!g||g.uuid_===l.uuid_)&&(!b||b===l.rec_||b==="**"&&
l.rec_)){k.splice(j--,1);l.rec_&&this.delegateCount[c]--;if(l.proxy){o=true;m=MT.events.special[h]||{};m.remove&&m.remove.call(i,l)}}}o&&MT.events.remove_(this,k,i,h,b)};d.dispose=function(){this.removeSlot();delete this.tag;delete this.slots;delete this.delegateCount;delete this.eventHandle_;if(MT.cache[this.key]){MT.cache[this.key]=f;delete MT.cache[this.key]}delete this.key};a.on=function(c,b,g,h){if(arguments.length===3){h=g;g=null}if(!MT.isObject(c)||!b||!MT.isObject(h))MT.console({type:"error",
msg:"MT.on params error"});else{if(MT.isString(b))b=SIGNAL(b);if(!h.memType||h.memType!=SLOT.SLOT_CODE)h=SLOT(h);var i=e.meta(c),j;if(h.memType===SIGNAL.SIGNAL_CODE&&h.type===b.type&&h.src===c)MT.console({type:"error",msg:"MT.on cycle"});else{j=i.regSig(b);h.rec_=g;h.proxy=MT.events.add_(i,j,c,b,g,h);h.type=b.type;i.addSlot_(j,h);return i}}};a.fire=function(c,b,g){var h=e.meta(c);if(MT.isUndefined(h))throw Error(c);if(MT.isString(b))b=SIGNAL(b);return h.dispatch(b,g)};a.off=function(c,
b,g,h){if(MT.isObject(g)&&g.memType===SLOT.SLOT_CODE){h=g;g=f}if(!MT.isObject(c))throw Error("sender is not an object @M.disconnect");if(MT.isString(b))b=SIGNAL(b);if(MT.isObject(h)&&(!h.memType||h.memType!=SLOT.SLOT_CODE))h=SLOT(h);c=e.meta(c);if(c instanceof e){c.removeSlot(b,g,h);return c}}});
MT.add("mt-memoize",function(a){a.namespace("memoize");a.memoize.CACHE_KEY="_memoize_cache_";a.memoize=function(f,e){var d=MT.getUid(f);e=e||MT.memoize.simpleHash;return function(){var c=a.global;c=c[a.memoize.CACHE_KEY]||(c[a.memoize.CACHE_KEY]={});var b;b=e.apply(this,d,arguments);return a.has(c,b)?c[b]:c[b]=f.apply(this,arguments)}};a.memoize.simpleHash=function(f,e){for(var d=[f],c=e.length-1;c>=0;--c)d.push(typeof e[c],e[c]);return d.join("")}});
MT.add("mt-functions",function(a){var f=Function.prototype,e=Array.prototype.slice;a.func={};a.func.setter=function(d){return function(c,b){var g=this;if(c===null)return g;typeof c!=="string"?MT.each(c,function(h,i){d.call(g,i,h)}):d.call(g,c,b);return g}};a.func.bind=function(d,c){if(!MT.isFunction(d))throw Error("illegal function input,@MT.func.bind");var b,g;if(f.bind&&d.bind===f.bind)return f.bind.apply(d,e.call(arguments,1));g=e.call(arguments,2);return b=function(){if(!(this instanceof b))return d.apply(c,
g.concat(e.call(arguments)));var h=function(){};h.prototype=d.prototype;h=new h;var i=d.apply(h,g.concat(e.call(arguments)));if(Object(i)===i)return i;return h}};a.func.delay=function(d,c,b){var g=e.call(arguments,3);return setTimeout(function(){return d.apply(b,g)},c)};a.func.defer=function(d){return this.delay.apply(this,[d,1].concat(e.call(arguments,1)))};a.func.once=function(d,c){var b=false,g;return function(){if(b)return g;b=true;return g=d.apply(c||a.global,arguments)}};a.func.throttle=function(d,
c,b){var g,h,i,j,k=function(){d.apply(b||a.global,i);g=(new Date).getTime()};return function(){h=(new Date).getTime()-g;i=arguments;clearTimeout(j);if(!g||h>=c)k();else j=setTimeout(k,c-h)}}});
MT.add("util-hashmap",function(a,f){function e(){this.clear()}a.namespace("util.HashMap");var d=e.prototype;d.add=function(c,b){if(arguments.length===1){b=c;c=this.getKey(c)}if(c===""||MT.isUndefined(c)||MT.isNull(c))return false;if(this.containsKey(c))return this.replace(c,b);this._map[c]=b;++this.length;return b};d.get=function(c){return this._map[c]};d.replace=function(c,b){return this._map[c]=b};d.getKey=function(c){return c.id};d.removeByKey=function(c){if(this.containsKey(c)){delete this._map[c];
--this.length;return true}return false};d.removeByValue=function(c){c=this.findKey(c);if(c!==f)return this.removeByKey(c);return false};d.containsKey=function(c){return this._map[c]!==f};d.containsValue=function(c){return this.containsKey(this.findKey(c))};d.findKey=function(c){var b,g=this._map;for(b in g)if(g.hasOwnProperty(b)&&g[b]===c)return b;return f};d.getSet_=function(c){var b,g=[],h=this._map;for(b in h)if(h.hasOwnProperty(b))g.push(c?b:h[b]);return g};d.getKeys=function(){return this.getSet_(true)};
d.getValues=function(){return this.getSet_(false)};d.size=function(){return this.length};d.isEmpty=function(){return this.length===0};d.clear=function(){this._map={};this.length=0;return this};a.util.HashMap=e});
MT.add("mt-event-events",function(a,f){var e=a.Config,d=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,c=function(b){if(b=d.exec(b)){b[1]=(b[1]||"").toLowerCase();b[3]=b[3]&&RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")}return b};a.events={};a.events.add_=function(b,g,h,i,j,k){if(!b||h.nodeType===3||h.nodeType===8||!i||h.nodeType!==1&&h.nodeType!==9&&h!==e.win)return f;var l,o,m=MT.isString(i)?i:i.type,p=m;if(k){k.origType_=p;k.quick_=j&&c(j)}o=MT.events.special[m]||{};m=(j?o.delegateType:o.bindType)||m;o=MT.events.special[m]||
{};if(m!=p){b.replaceSig_(i,m);i.type=m}l=b.eventHandle_;if(!l){b.eventHandle_=l=function(t){t=MT.events.fix(t||window.event);return MT.fire(l.elem,t.type,t)};l.elem=h}b=b.slots[g];if(!b||b.length==0)if(!o.setup||o.setup.call(h,k.prevParams,l)===false)a.events.addEvent_(h,m,l);o.add&&o.add.call(h,k);return true};a.events.remove_=function(b,g,h,i,j){if(!b||!g||!i||!h)return f;var k;k=MT.events.special[i]||{};i=(j?k.delegateType:k.bindType)||i;if(g.length===0)if(!k.teardown||k.teardown.call(h)===false){a.events.removeEvent_(h,
i,b.eventHandle_);b.eventHandle_=null}};a.events.addEvent_=a.Config.doc.addEventListener?function(b,g,h,i){b.addEventListener&&b.addEventListener(g,h,!!i)}:function(b,g,h){b.attachEvent&&b.attachEvent("on"+g,h)};a.events.removeEvent_=a.Config.doc.removeEventListener?function(b,g,h,i){b.removeEventListener&&b.removeEventListener(g,h,!!i)}:function(b,g,h){b.detachEvent&&b.detachEvent("on"+g,h)}});
(function(a){a.events.BrowserFeature={HAS_W3C_BUTTON:!MT.ua.ie||MT.ua.isDocumentMode(9),HAS_W3C_EVENT_SUPPORT:!MT.ua.ie||MT.ua.isDocumentMode(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:MT.ua.ie&&!MT.ua.isVersion("8"),HAS_NAVIGATOR_ONLINE_PROPERTY:!MT.ua.webkit||MT.ua.isVersion("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:MT.ua.gecko&&MT.ua.isVersion("1.9b")||MT.ua.ie&&MT.ua.isVersion("8")||MT.ua.opera&&MT.ua.isVersion("9.5")||MT.ua.webkit&&MT.ua.isVersion("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:MT.ua.gecko&&!MT.ua.isVersion("8")||
MT.ua.ie&&!MT.ua.isVersion("9")}})(MT);
MT.add("mt-event",function(a){a.events.Event=function(f,e){if(!(this instanceof MT.events.Event))return new MT.events.Event(f,e);if(f&&f.type){this.originalEvent=f;this.type=f.type;this.isDefaultPrevented=f.defaultPrevented||f.returnValue===false||f.getPreventDefault&&f.getPreventDefault()?true:false}else this.type=f;e&&MT.mixin(this,e);this.timeStamp=f&&f.timeStamp||MT.now();this[MT.PROPERTY_+"qb"]=true};a.events.Event.prototype={preventDefault:function(){this.isDefaultPrevented=true;var f=this.originalEvent;
if(f)if(f.preventDefault)f.preventDefault();else f.returnValue=false},stopPropagation:function(){this.isPropagationStopped=true;var f=this.originalEvent;if(f){f.stopPropagation&&f.stopPropagation();f.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=true;this.stopPropagation()},halt:function(f){f?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()},within:function(f,e,d){if(f){e=e?this.relatedTarget:this.target;var c;if(e&&MT.dom){c=
MT.getDom(f);f=MT.dom.contains(c,e);if(!f&&d)f=e==c;return f}}return false},isDefaultPrevented:false,isPropagationStopped:false,isImmediatePropagationStopped:false}});
MT.add("mt-event-fix",function(a,f){var e={fixHooks:{},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b,g){if(b.which==null)b.which=g.charCode!=null?g.charCode:g.keyCode;return b}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY detail wheelDelta axis toElement".split(" "),
filter:function(b,g){var h,i,j=g.button,k=g.fromElement;if(b.pageX==null&&g.clientX!=null){h=b.target.ownerDocument||document;i=h.documentElement;h=h.body;b.pageX=g.clientX+(i&&i.scrollLeft||h&&h.scrollLeft||0)-(i&&i.clientLeft||h&&h.clientLeft||0);b.pageY=g.clientY+(i&&i.scrollTop||h&&h.scrollTop||0)-(i&&i.clientTop||h&&h.clientTop||0)}if(!b.relatedTarget&&k)b.relatedTarget=k===b.target?g.toElement:k;if(!b.which&&j!==f)b.which=j&1?1:j&2?3:j&4?2:0;return b}}},d=/^key/,c=/^(?:mouse|contextmenu)|click/;
a.mixin(a.events,e);a.events.fix=function(b){if(b[MT.PROPERTY_+"qb"])return b;var g,h,i=b,j=a.events.fixHooks[b.type]||{},k=j.props?this.props.concat(j.props):this.props;b=MT.events.Event(i);for(g=k.length;g;){h=k[--g];b[h]=i[h]}if(!b.target)b.target=i.srcElement||document;if(b.target.nodeType===3)b.target=b.target.parentNode;if(b.metaKey===f)b.metaKey=b.ctrlKey;return j.filter?j.filter(b,i):b};MT.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(b){if(d.test(b))a.events.fixHooks[b]=a.events.keyHooks;if(c.test(b))a.events.fixHooks[b]=a.events.mouseHooks})});MT.add("mt-event-special",function(a){a.events.special={focus:{delegateType:"focusin"},blur:{delegateType:"focusout"}}});
MT.add("mt-event-eventtarget",function(a){a.events.EventTarget=function(){a.Base.call(this)};a.inherits(a.events.EventTarget,a.Base);var f=a.events.EventTarget.prototype;f.on=function(e,d,c,b,g,h){var i=[],j=0;if(MT.isFunction(d)){h=g;g=b;b=c;c=d;d=null;c.once=h}if(MT.isArray(e))i=i.concat(e);else i.push(e);for(d=SLOT(c,b,d,g);e=i[j];j++)MT.on(this,SIGNAL(e),d);return this};f.off=function(e,d){var c=[],b,g=0;if(MT.isArray(e))c=c.concat(e);else c.push(e);for(;b=c[g];g++)b&&MT.off(this,SIGNAL(b),d);
return this};f.once=function(e,d,c,b,g){this.bind(e,d,c,b,g,true);return this};f.fire=function(e,d){return MT.fire(this,SIGNAL(e),d)};f.dispose=function(){MT.off(this)}});
MT.add("mt-event-mousewheel",function(a){function f(d){var c=0,b=0,g=0,h=this.data;d=MT.events.fix(d||window.event);if(d.type=="mousewheel"){b=1;if(MT.ua.ie||MT.ua.webkit&&(MT.ua.WIN||MT.ua.isVersion("532.0")))b=40;g=MT.events.special.mousewheel.smartScale_(-d.wheelDelta,b);if(MT.isUndefined(d.wheelDeltaX))b=g;else{c=a.events.special.mousewheel.smartScale_(-d.wheelDeltaX,b);b=a.events.special.mousewheel.smartScale_(-d.wheelDeltaY,b)}}else{g=d.detail;if(g>100)g=3;else if(g<-100)g=-3;if(!MT.isUndefined(d.axis)&&
d.axis===d.HORIZONTAL_AXIS)c=g;else b=g}if(h&&MT.isNumber(h.maxDeltaX_))c=a.number.clamp(c,-h.maxDeltaX_,h.maxDeltaX_);if(h&&MT.isNumber(h.maxDeltaY_))b=a.number.clamp(b,-h.maxDeltaY_,h.maxDeltaY_);MT.mixin(d,{deltaX:c,deltaY:b,detail:g,type:"mousewheel"});return MT.fire(this,SIGNAL("mousewheel"),d)}var e=MT.ua.gecko?"DOMMouseScroll":"mousewheel";a.events.special.mousewheel={setup:function(d){a.events.fixHooks[e]=a.events.mouseHooks;this.data=d;d=a.func.bind(f,this);a.events.addEvent_(this,e,d)},
teardown:function(){a.events.removeEvent_(this,e,f)},smartScale_:function(d,c){return MT.ua.webkit&&MT.ua.MAC&&d%c!=0?d:d/c}}});MT.add("mt-event-mouseenterleave",function(a){MT.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(f,e){a.events.special[e]={delegateType:f,bindType:f,handle:function(d){var c=d.relatedTarget,b;if(!c||c!==this&&!MT.dom.contains(this,c)){d.type=d.orgType;b=d.handleObj.callback.apply(this,arguments);d.type=f}return b}}})});
MT.add("mt-event-keycodes",function(a){a.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,
Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,
SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255}});
MT.add("mt-event-keyhandler",function(a){function f(c){a.events.EventTarget.call(this);this.init_(c||{})}var e,d=a.Config.doc;a.inherits(f,a.events.EventTarget);e=f.prototype;e.eventName="keydown";e.keyCode=-1;e._set=a.func.setter(function(c,b){if(a.isFunction(this["_set"+a.string.capitalFirst(c)]))this["_set"+a.string.capitalFirst(c)](b);else this[c]=b});e.init_=function(c){if(!c.target)c.target=d;this._set(c);this._el=this.target.isComp||this.target.isButton?this.target.getNode():a.get(this.target);
this.bindings=[];this.keyCodeMap_={};this.map?this.attach(this.map):this.attach(c);this.enable()};e.attach=function(c){var b=c.key,g,h,i,j=[],k,l,o;if(a.isArray(c)){g=c.length;for(k=0;k<g;k++)this.attach(c[k])}else{if(a.isString(b))b=[b];g=b.length;for(k=0;k<g;++k){i=b[k];if(a.isString(i)){i=i.toUpperCase();h=i.length;for(l=0;l<h;++l){o=i.charCodeAt(l);j.push(o);this.keyCodeMap_[o]=true}}else{j.push(i);this.keyCodeMap_[i]=true}}j.length&&this.bindings.push(a.mixin({keyCode:j},c,false))}};e.handleKeyDown_=
function(c){var b=c.which;if(this.enabled&&this.keyCodeMap_[b]){b=this.bindings;var g,h=b.length;for(g=0;g<h;++g)this.doAction_(b[g],c)}};e.doAction_=function(c,b){var g=b.which,h=c.fn||c.handler,i=c.scope||this,j=c.keyCode,k,l;k=0;for(l=j.length;k<l;++k)if(g===j[k]){h.call(i,g,b);break}};e.enable=function(){if(!this.enabled){this._el.on(this.eventName,a.func.bind(this.handleKeyDown_,this));this.enabled=true}};e.disable=function(){if(this.enabled){this._el.off(this.eventName,a.func.bind(this.handleKeyDown_,
this));this.enabled=false}};e.destroy=function(){this.bindings=[];delete this.keyCodeMap_;this.disable();this._el=null;delete this.target};a.namespace("util.keyMap");a.util.keyMap=f});
MT.add("mt-template",function(a){var f={prefix:"__out__.push(",suffix:");"},e=Array.prototype.push,d=Array.prototype.join,c=a.string;Template=function(b,g){if(a.isEmpty(b)||a.isUndefined(b))throw Error("invalid tpl @ M.Template");var h="";if(a.isString(g))h=Template.cache_[g]||"";if(c.isEmpty(h)){h=Template.convert_(b);h=Template.build_(h);if(a.isString(g)&&!Template.cache_[g])Template.cache_[g]=h}var i=new Function("$data","MT",h);h=null;return{render:function(j,k){return i.call(k||a.global,j,MT)}}};
Template.convert_=function(b){var g=Template.statements["if"],h=Template.statements.each;if(a.isArray(b))b=b.join("");return b=b.replace(h.start,function(i,j,k,l){i=c.trim(l.replace(/,/g,""));return"<% MT.each("+j+", function("+k+", "+i+") { %>"}).replace(h.end,"<% }); %>").replace(g.start,function(i,j){return"<% if ("+j+") {%>"}).replace(Template.statements.elseif.start,function(i,j){return"<% } else if ("+j+") {%>"}).replace(Template.statements["else"].start,"<% } else {%>").replace(g.end,"<% } %>").replace(Template.statements.comment,
"").replace(Template.statements.encode,function(i,j){return"<%=MT.string.htmlEncode(Template.checkData_("+j+"))%>"}).replace(Template.statements.unencode,function(i,j){return"<%=Template.checkData_("+j+")%>"})};Template.build_=function(b){var g=[],h=/^=/;b=b.replace(/[\r\n\t]/igm," ").replace(/\\/gm,"\\\\").replace(/'/gm,"\\'").replace(/(.*?)<%(.*?)%>/ig,function(i,j,k){j!=""&&e.call(g,f.prefix+"'"+j+"'"+f.suffix);k=c.trim(k);if(k!="")h.test(k)?e.call(g,f.prefix+k.substr(1)+f.suffix):e.call(g,k);
return""});b!=""&&e.call(g,f.prefix+"'"+b+"'"+f.suffix);b=null;g=d.call(g,"");b=d.call(["try{var __out__=[];with($data){",g,'};return __out__.join("");}catch(e){MT.console(e.message);}'],"");g=null;return b};Template.cache_={};Template.checkData_=function(b){return a.isUndefined(b)?"":b};Template.statements={"if":{start:/{[\s\xa0]*#if[\s\xa0]*([^}]*?)[\s\xa0]*}/igm,end:/{[\s\xa0]*#\/if[\s\xa0]*}/igm},elseif:{start:/{[\s\xa0]*#elseif[\s\xa0]*([^}]*?)[\s\xa0]*}/igm},"else":{start:/{[\s\xa0]*#else[\s\xa0]*}/igm},
each:{start:/{[\s\xa0]*#each[\s\xa0]*([\w\.]*?)[\s\xa0]*as[\s\xa0]*(\w*?)([\s\xa0]*,[\s\xa0]*\w*?)?[\s\xa0]*}/igm,end:/{[\s\xa0]*#\/each[\s\xa0]*}/igm},encode:/\${[\s\xa0]*([\s\S]+?)[\s\xa0]*}/igm,unencode:/\$\*{[\s\xa0]*([\s\S]+?)[\s\xa0]*}/igm,comment:/{[\s\xa0]*--[^}]*?[\s\xa0]*}/igm};a.Template=Template});
MT.add("mt-timer",function(a){function f(d,c,b){a.events.EventTarget.call(this);this.interval_=a.number.parse(d,1);this.repeat_=a.number.parse(c,0);this.timerObj_=b||f.defaultTimerObj;this.boundTick_=MT.func.bind(this.dispatchTick,this)}a.inherits(f,a.events.EventTarget);f.defaultTimerObj=MT.global.window;var e=f.prototype;e.enabled=false;e.currentCount=0;e.timer_=null;e.reset=function(){this.stop();this.currentCount=0};e.delay=function(d){this.interval_=d||this.interval_};e.start=function(){this.enabled=
true;if(!this.timer_)this.timer_=this.timerObj_.setInterval(this.boundTick_,this.interval_)};e.stop=function(){this.enabled=false;if(this.timer_){this.timerObj_.clearInterval(this.timer_);this.timer_=null}};f.TICK=MT.PROPERTY_+"_TIMER";f.COMPLETE=MT.PROPERTY_+"_TIMER_COMPLETE";e.dispatchTick=function(){if(this.enabled){this.fire(f.TICK);this.currentCount++;if(this.repeat_>0&&this.currentCount>=this.repeat_){this.fire(f.COMPLETE);this.stop()}}};f.once=function(d,c,b){if(MT.isFunction(d))d=MT.func.bind(d,
b);else if(d&&d.listener&&MT.isFunction(d.listener))d=MT.func.bind(d.listener,d);else{MT.console({type:"error",msg:"invalid fn"});return-1}return f.defaultTimerObj.setTimeout(d,c||0)};f.clear=function(d){f.defaultTimerObj.clearInterval(d)};e.dispose=function(){this.stop();delete this.timerObj_};a.namespace("Timer");a.Timer=f});
(function(a){var f={},e={};a.manageAjax=function(){return{create:function(d,c){f[d]=new a.manageAjax._manager(d,c);return f[d]},destroy:function(d){if(f[d]){f[d].clear(true);delete f[d]}}}}();a.manageAjax._manager=function(d,c){this.requests={};this.inProgress=0;this.qName=this.name=d;this.opts=a.extend({},a.manageAjax.defaults,c);if(c&&c.queue&&c.queue!==true&&typeof c.queue==="string"&&c.queue!=="clear")this.qName=c.queue};a.manageAjax._manager.prototype={add:function(d,c){if(typeof d=="object")c=
d;else if(typeof d=="string")c=a.extend(c||{},{url:d});c=a.extend({},this.opts,c);var b=c.complete||a.noop,g=c.success||a.noop,h=c.beforeSend||a.noop,i=c.error||a.noop,j=typeof c.data=="string"?c.data:a.param(c.data||{}),k=c.type+c.url+j,l=this,o=this._createAjax(k,c,g,b);if(c.preventDoubleRequests&&c.queueDuplicateRequests){if(c.preventDoubleRequests)c.queueDuplicateRequests=false;setTimeout(function(){throw"preventDoubleRequests and queueDuplicateRequests can't be both true";},0)}if(!(this.requests[k]&&
c.preventDoubleRequests)){o.xhrID=k;c.xhrID=k;c.beforeSend=function(m,p){var t=h.call(this,m,p);t===false&&l._removeXHR(k);return t};c.complete=function(m,p){l._complete.call(l,this,b,m,p,k,c)};c.success=function(m,p,t){l._success.call(l,this,g,m,p,t,c)};c.error=function(m,p,t){var w="",v="";if(p!=="timeout"&&m){w=m.status;v=m.responseXML||m.responseText}i?i.call(this,m,p,t,c):setTimeout(function(){throw p+"| status: "+w+" | URL: "+c.url+" | data: "+j+" | thrown: "+t+" | response: "+v;},0);m=null};
c.queue==="clear"&&a(document).clearQueue(this.qName);if(c.queue||c.queueDuplicateRequests&&this.requests[k]){a.queue(document,this.qName,o);if(this.inProgress<c.maxRequests&&(!this.requests[k]||!c.queueDuplicateRequests))a.dequeue(document,this.qName);return k}return o()}},_createAjax:function(d,c,b,g){var h=this;return function(){if(c.beforeCreate.call(c.context||h,d,c)!==false){h.inProgress++;h.inProgress===1&&a.event.trigger(h.name+"AjaxStart");if(c.cacheResponse&&e[d])if(!e[d].cacheTTL||e[d].cacheTTL<
0||(new Date).getTime()-e[d].timestamp<e[d].cacheTTL){h.requests[d]={};setTimeout(function(){h._success.call(h,c.context||c,b,e[d]._successData,"success",e[d],c);h._complete.call(h,c.context||c,g,e[d],"success",d,c)},0)}else delete e[d];if(!c.cacheResponse||!e[d])if(c.async)h.requests[d]=a.ajax(c);else a.ajax(c);return d}}},_removeXHR:function(d){if(this.opts.queue||this.opts.queueDuplicateRequests)a.dequeue(document,this.qName);this.inProgress--;this.requests[d]=null;delete this.requests[d]},clearCache:function(){e=
{}},_isAbort:function(d,c,b){if(!b.abortIsNoSuccess||!d&&!c)return false;return!!(!d||d.readyState===0||this.lastAbort===b.xhrID)},_complete:function(d,c,b,g,h,i){if(this._isAbort(b,g,i)){g="abort";i.abort.call(d,b,g,i)}c.call(d,b,g,i);a.event.trigger(this.name+"AjaxComplete",[b,g,i]);i.domCompleteTrigger&&a(i.domCompleteTrigger).trigger(this.name+"DOMComplete",[b,g,i]).trigger("DOMComplete",[b,g,i]);this._removeXHR(h);this.inProgress||a.event.trigger(this.name+"AjaxStop")},_success:function(d,c,
b,g,h,i){var j=this;if(!this._isAbort(h,g,i)){i.abortOld&&a.each(this.requests,function(m){if(m===i.xhrID)return false;j.abort(m)});if(i.cacheResponse&&!e[i.xhrID]){h||(h={});e[i.xhrID]={status:h.status,statusText:h.statusText,responseText:h.responseText,responseXML:h.responseXML,_successData:b,cacheTTL:i.cacheTTL,timestamp:(new Date).getTime()};if("getAllResponseHeaders"in h){var k=h.getAllResponseHeaders(),l,o=function(){if(!l){l={};a.each(k.split("\n"),function(m,p){var t=p.indexOf(":");l[p.substr(0,
t)]=p.substr(t+2)})}};a.extend(e[i.xhrID],{getAllResponseHeaders:function(){return k},getResponseHeader:function(m){o();return m in l?l[m]:null}})}}c.call(d,b,g,h,i);a.event.trigger(this.name+"AjaxSuccess",[h,i,b]);i.domSuccessTrigger&&a(i.domSuccessTrigger).trigger(this.name+"DOMSuccess",[b,i]).trigger("DOMSuccess",[b,i])}h=null},getData:function(d){if(d){var c=this.requests[d];if(!c&&this.opts.queue)c=a.grep(a(document).queue(this.qName),function(b){return b.xhrID===d})[0];return c}return{requests:this.requests,
queue:this.opts.queue?a(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(d){var c;if(d){if((c=this.getData(d))&&c.abort){this.lastAbort=d;c.abort();this.lastAbort=false}else a(document).queue(this.qName,a.grep(a(document).queue(this.qName),function(h){return h!==c}));c=null}else{var b=this,g=[];a.each(this.requests,function(h){g.push(h)});a.each(g,function(h,i){b.abort(i)})}},clear:function(d){a(document).clearQueue(this.qName);d&&this.abort()}};a.manageAjax._manager.prototype.getXHR=
a.manageAjax._manager.prototype.getData;a.manageAjax.defaults={beforeCreate:a.noop,abort:a.noop,abortIsNoSuccess:true,maxRequests:1,cacheResponse:false,async:true,domCompleteTrigger:false,domSuccessTrigger:false,preventDoubleRequests:false,queueDuplicateRequests:false,cacheTTL:-1,queue:false};a.each(a.manageAjax._manager.prototype,function(d,c){d.indexOf("_")===0||!a.isFunction(c)||(a.manageAjax[d]=function(b,g){if(!f[b])if(d==="add")a.manageAjax.create(b,g);else return;var h=Array.prototype.slice.call(arguments,
1);f[b][d].apply(f[b],h)})});MT.ajax=a.ajax;MT.ajaxQ=a.manageAjax})(jQuery);MT.add("mt-style",function(a){a.namespace("style");a.style={cssSizestoObject:function(f){f=f.split(" ");switch(f.length){case 1:f[1]=f[2]=f[3]=f[0];break;case 2:f[2]=f[0];f[3]=f[1];break;case 3:f[3]=f[1]}return{top:parseInt(f[0],10),right:parseInt(f[1],10),bottom:parseInt(f[2],10),left:parseInt(f[3],10)}}}});MT.add("mt-support",function(a){a.support={cssFloat:!MT.ua.ie,boxModel:a.Config.isStrict,css3Transition:false}});
MT.add("mt-math-box",function(a){function f(d,c,b,g){this.top=d;this.right=c;this.bottom=b;this.left=g}var e=f.prototype;e.clone=function(){return new f(this.top,this.right,this.bottom,this.left)};e.toString=function(){return"Box["+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l]"};e.contains=function(d){return f.contains(this,d)};f.contains=function(d,c){if(!d||!c)return false;if(c instanceof f)return c.left>=d.left&&c.right<=d.right&&c.top>=d.top&&c.bottom<=d.bottom;return c.x>=d.left&&
c.x<=d.right&&c.y>=d.top&&c.y<=d.bottom};e.expand=function(d,c,b,g){if(MT.isObject(d)){this.top-=d.top;this.right+=d.right;this.bottom+=d.bottom;this.left-=d.left}else{this.top-=d;this.right+=c;this.bottom+=b;this.left-=g}return this};f.equals=function(d,c){if(d==c)return true;if(!d||!c)return false;return d.top==c.top&&d.right==c.right&&d.bottom==c.bottom&&d.left==c.left};f.relativePositionX=function(d,c){if(c.x<d.left)return c.x-d.left;else if(c.x>d.right)return c.x-d.right;return 0};f.relativePositionY=
function(d,c){if(c.y<d.top)return c.y-d.top;else if(c.y>d.bottom)return c.y-d.bottom;return 0};f.distance=function(d,c){var b=MT.math.Box.relativePositionX(d,c),g=MT.math.Box.relativePositionY(d,c);return Math.sqrt(b*b+g*g)};f.intersects=function(d,c){return d.left<=c.right&&c.left<=d.right&&d.top<=c.bottom&&c.top<=d.bottom};f.intersectsWithPadding=function(d,c,b){return d.left<=c.right+b&&c.left<=d.right+b&&d.top<=c.bottom+b&&c.top<=d.bottom+b};e.translateBy=function(d,c){if(arguments.length==1){c=
d.y;d=d.x}this.top+=c;this.right+=d;this.bottom+=c;this.left+=d;return this};e.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};a.math.Box=f});
MT.add("mt-math-coordinate",function(){function a(e,d){this.x=MT.isUndefined(e)?0:e;this.y=MT.isUndefined(d)?0:d}var f=a.prototype;f.clone=function(){return new a(this.x,this.y)};f.toString=function(){return"OFFSET["+this.x+", "+this.y+"]"};a.equals=function(e,d){if(e==d)return true;if(!e||!d)return false;return e.x==d.x&&e.y==d.y};f.equals=function(e){return a.equals(this,e)};f.round=function(e){if(isNaN(e)){this.x=Math.round(this.x);this.y=Math.round(this.y)}else{e=Math.pow(10,e);this.x=Math.round(this.x*
e)/e;this.y=Math.round(this.y*e)/e}};f.isOrigin=function(){return this.x==0&&this.y==0};MT.math.Coordinate=a});
MT.add("mt-math-size",function(){function a(e,d){this.width=e;this.height=d}var f=a.prototype;a.equals=function(e,d){if(e==d)return true;if(!e||!d)return false;return e.width==d.width&&e.height==d.height};f.clone=function(){return new MT.math.Size(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.getLongest=function(){return Math.max(this.width,this.height)};f.getShortest=function(){return Math.min(this.width,this.height)};f.area=function(){return this.width*
this.height};f.perimeter=function(){return(this.width+this.height)*2};f.aspectRatio=function(){return this.width/this.height};f.isEmpty=function(){return!this.area()};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.width=Math.round(this.width);this.height=
Math.round(this.height);return this};f.scale=function(e){this.width*=e;this.height*=e;return this};f.scaleToFit=function(e){return this.scale(this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height)};MT.math.Size=a});
MT.add("mt-math-rect",function(a){function f(d,c,b,g){this.left=d;this.top=c;this.width=b;this.height=g}var e=f.prototype;e.clone=function(){return new a.math.Rect(this.left,this.top,this.width,this.height)};e.toBox=function(){return new MT.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};f.createFromBox=function(d){return new a.math.Rect(d.left,d.top,d.right-d.left,d.bottom-d.top)};e.toString=function(){return"RECT("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+
"h)"};f.equals=function(d,c){if(d==c)return true;if(!d||!c)return false;return d.left==c.left&&d.width==c.width&&d.top==c.top&&d.height==c.height};e.intersection=function(d){var c=Math.max(this.left,d.left),b=Math.min(this.left+this.width,d.left+d.width);if(c<=b){var g=Math.max(this.top,d.top);d=Math.min(this.top+this.height,d.top+d.height);if(g<=d){this.left=c;this.top=g;this.width=b-c;this.height=d-g;return true}}return false};f.intersection=function(d,c){var b=Math.max(d.left,c.left),g=Math.min(d.left+
d.width,c.left+c.width);if(b<=g){var h=Math.max(d.top,c.top),i=Math.min(d.top+d.height,c.top+c.height);if(h<=i)return new a.math.Rect(b,h,g-b,i-h)}return null};f.intersects=function(d,c){return d.left<=c.left+c.width&&c.left<=d.left+d.width&&d.top<=c.top+c.height&&c.top<=d.top+d.height};e.intersects=function(d){return f.intersects(this,d)};f.difference=function(d,c){var b=f.intersection(d,c);if(!b||!b.height||!b.width)return[d.clone()];b=[];var g=d.top,h=d.height,i=d.left+d.width,j=d.top+d.height,
k=c.left+c.width,l=c.top+c.height;if(c.top>d.top){b.push(new a.math.Rect(d.left,d.top,d.width,c.top-d.top));g=c.top;h-=c.top-d.top}if(l<j){b.push(new a.math.Rect(d.left,l,d.width,j-l));h=l-g}c.left>d.left&&b.push(new a.math.Rect(d.left,g,c.left-d.left,h));k<i&&b.push(new a.math.Rect(k,g,i-k,h));return b};e.difference=function(d){return f.difference(this,d)};e.boundingRect=function(d){var c=Math.max(this.left+this.width,d.left+d.width),b=Math.max(this.top+this.height,d.top+d.height);this.left=Math.min(this.left,
d.left);this.top=Math.min(this.top,d.top);this.width=c-this.left;this.height=b-this.top};f.boundingRect=function(d,c){if(!d||!c)return null;var b=d.clone();b.boundingRect(c);return b};e.contains=function(d){return d instanceof a.math.Rect?this.left<=d.left&&this.left+this.width>=d.left+d.width&&this.top<=d.top&&this.top+this.height>=d.top+d.height:d.x>=this.left&&d.x<=this.left+this.width&&d.y>=this.top&&d.y<=this.top+this.height};e.getSize=function(){return new MT.math.Size(this.width,this.height)};
MT.math.Rect=f});
MT.add("mt-dom",function(a,f){var e=a.Config,d=e.win,c=e.doc,b=Array.prototype.slice,g=a.Element;e=g.prototype;var h=/^https/i.test(d.location.protocol);if(MT.isUndefined(jQuery))throw Error("need jQuery!");a.mixin(a,{cssPrefix:"mt-",BLANK_IMAGE_URL:a.ua.ie6||a.ua.ie&&a.ua.isVersion("7")?a.Config.basePath+"/resources/images/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",ifrmSrc:h&&MT.ua.ie?"javascript:''":"about:blank",get:function(i){if(!i)return null;if(i instanceof
MT.Element)return i;else if(MT.isString(i)||i.tagName||i==c||i==d){i=this.getDom(i);return i=MT.Element.meta(i)}else if(i.isComp)return i.getNode();return null},getDom:function(i){var j=/^[.|#]/;if(!i||!c)return null;return i.tag?i.tag:MT.isString(i)?j.test(i)?a.q(i).get(0):c.getElementById(i):i instanceof a.q?i[0]:i},getCmp:function(){},removeNode:function(i){if(typeof jQuery!="undefined")this.q(i.tag?i.tag:i).remove();i.dd&&i.dd.dispose();i.drop&&i.drop.dispose();this.get(i).dispose()},q:jQuery});
a.dom={contains:function(i,j){return MT.q.contains(i,j)},NodeType:{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},isElementNode:function(i){return!!(i&&i.nodeType===1)},isWindow:function(i){return i!=null&&i==i.window},getOwnerDocument:function(i){return i.nodeType==MT.dom.NodeType.DOCUMENT?i:i.ownerDocument||i.document},getFrameContentDoc:function(i){return i.contentDocument||
i.contentWindow.document},getFrameContentWindow:function(i){return i.contentWindow||MT.dom.getWindow(MT.dom.getFrameContentDoc(i))},getDoc:function(){var i;return function(){return i||(i=MT.get(c))}}(),getBody:function(){var i;return function(){return i||(i=MT.get(c.body))}}(),getWindow:function(i){return MT.dom.isWindow(i)?i:i.nodeType===MT.dom.NodeType.DOCUMENT?i.defaultView||i.parentWindow:false},getScrollbarWidth:function(){var i=this.getDocument(),j=i.createElement("div"),k;j.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";
k=i.createElement("div");MT.q(k).width(200).height(200);j.appendChild(k);i.body.appendChild(j);i=j.offsetWidth-j.clientWidth;MT.q(j).remove();return i},create:function(i,j){j=j||a.dom.getDocument();return a.get(a.q(i,j)[0])}};g.VISIBILITY=1;g.DISPLAY=2;g.OFFSET=3;g.data=function(i,j,k){i=MT.get(i);if(!i)return null;var l=MT.cache[i.key].data;if(!l)l=MT.cache[i.key].data={};return arguments.length==2?l[j]:l[j]=k};e.getCache=function(){var i=MT.getUid(this.tag),j;j=MT.cache[i]||(MT.cache[i]={data:{}});
if(MT.isUndefined(j.data))j.data=MT.cache[i].data={};return j};e.addClass=function(){MT.q(this.tag).addClass(b.call(arguments).join(" "));return this};e.removeClass=function(){MT.q(this.tag).removeClass(b.call(arguments).join(" "));return this};e.set=function(i,j){var k=this,l=k.tag;MT.each(i,function(o,m){if(m==="style")k.setStyle(o);else if(m==="class")l.className=o;else if(j!==false)o===f?l.removeAttribute(m):l.setAttribute(m,o);else l[m]=o});return this};e.getAttr=function(i,j){var k=this.tag;
return k.getAttributeNS(j,i)||k.getAttribute(j+":"+i)||k.getAttribute(i)||k[i]};e.contains=function(i){if(!i)return false;i=i.tag||i;var j=this.tag;return i===j||MT.dom.contains(j,i)};e.setHtml=function(i){var j=this.tag;if(j)j.innerHTML=i;return this};e.getHtml=function(){return this.tag?this.tag.innerHTML:""};e.show=function(){this.setVisible_(true);return this};e.hide=function(){this.setVisible_(false);return this};e.setVisible_=function(i){var j=this.getDisplayMode(),k=MT.cssPrefix;switch(j){case MT.Element.VISIBILITY:this.removeClass(k+
"hidden-display",k+"hidden-offset");this[i?"removeClass":"addClass"](k+"hidden-visibility");break;case MT.Element.DISPLAY:this.removeClass(k+"hidden-visibility",k+"hidden-offset");this[i?"removeClass":"addClass"](k+"hidden-display");break;case MT.Element.OFFSET:this.removeClass(k+"hidden-visibility",k+"hidden-display");this[i?"removeClass":"addClass"](k+"hidden-offset")}return this};e.getDisplayMode=function(){var i=this.getCache().data,j=i.displayMode;if(j===f)i.displayMode=j=MT.Element.DISPLAY;
return j};e.setDisplayMode=function(i){this.getCache().data.displayMode=i;return this};e.on=function(i,j,k,l,o,m){if(k==null&&l==null){l=j;k=j=f}else if(l==null)if(typeof j==="string"){l=k;k=f}else{l=k;k=j;j=f}if(!l)return this;l.once=m;MT.on(this.tag,i,j,SLOT(l,o,k));return this};e.off=function(i,j,k,l){if(j===false||typeof j==="function"){k=j;j=f}k=k?SLOT(k,l):null;this.removeSlot(SIGNAL(i),j,k);return this};e.once=function(i,j,k,l,o){this.on(i,j,k,l,o,true);return this};e.fire=function(i,j){this.dispatch(SIGNAL(i),
j);return this};e.hover=function(i,j,k){var l=a.func;k=k||this;this.on("mouseenter",l.bind(i,k));this.on("mouseleave",l.bind(j||i,k))};e.focus=function(){try{this.tag.focus();this.fire("focus",this)}catch(i){}return this};e.blur=function(){try{this.tag.blur();this.fire("blur",this)}catch(i){}return this};e.remove=function(){MT.removeNode(this)};e.load=function(i){this.getLoader(i?i.queueOptions:f).load(i);return this};e.getLoader=function(i){var j=g.data(this,"loader");if(!j){j=new MT.ElemLoader(a.mixin({target:this},
i||{}));g.data(this,"loader",j)}return j};e.monitorMouseLeave=function(i,j,k){var l=this,o,m={mouseleave:function(p){o=setTimeout(MT.func.bind(i,k||l,p),j)},mouseenter:function(){clearTimeout(o)}};l.on("mouseenter",m.mouseenter);l.on("mouseleave",m.mouseleave);return m};e.unMonMouseEnLv=function(i){var j;i=i||{};for(j in i)this.off(j,i[j])}});
MT.add("mt-dom-static",function(a,f){var e=a.Config,d=e.win,c=e.doc;a.mixin(a.dom,{getViewportWidth:function(b){b=b||d;return MT.q(b).width()},getViewportHeight:function(b){b=b||d;return MT.q(b).height()},getViewSize:function(b){var g=MT.dom.getViewportWidth(b);b=MT.dom.getViewportHeight(b);return new MT.math.Size(g,b)},getDocumentWidth:function(b){b=b||c;return Math.max(MT.q(b).width(),MT.dom.getViewportWidth(MT.dom.getWindow(b)))},getDocumentHeight:function(b){b=b||c;return Math.max(MT.q(b).height(),
MT.dom.getViewportHeight(MT.dom.getWindow(b)))},swapPosition:function(b,g){b=a.get(b);g=a.get(g);var h=b.getXY(),i=g.getXY();b.setXY(i);g.setXY(h);return b},swapNode:function(b,g){b=a.get(b);g=a.get(g);var h=g.tag.parentNode,i=g.tag.nextSibling;if(i==b)h.insertBefore(b,g);else if(g==b.tag.nextSibling)h.insertBefore(g,b);else{b.tag.parentNode.replaceChild(g,b);h.insertBefore(b,i)}return b},addUnits:function(b,g){if(MT.isNumber(b))return b+(g||"px");if(b===""||b=="auto"||b===f||b===null)return b||"";
return b},applyMarkup:function(b){var g,h,i=/tag|html|tpl|tplData$/i,j=b.tpl,k=b.html,l=b.tplData;h=b.tag||"<div></div>";for(g in b)b.hasOwnProperty(g)&&i.test(g)&&delete b[g];h=a.q(h,b);if(j){if(a.isString(j))j=a.Template(j);j=j.render(l);h.append(j)}k&&h.append(j);return h.get(0)}},true)});
MT.add("mt-dom-style",function(a,f){var e=function(g){var h=a.Element.data(g,"originalDisplay");if(h===f)a.Element.data(g,"originalDisplay",h="");return h},d={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},c={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},b={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};a.mixin(a.dom,{setStyle:function(g,h){if(MT.isString(h)){h=MT.string.trim(h).split(/\s*(?::|;)\s*/);for(var i=
0,j=h.length;i<j;)g.style[MT.string.toCamelCase(h[i++])]=h[i++]||""}else MT.isObject(h)&&MT.q(g).css(h);return this},getStyle:function(g,h){return MT.q(g).css(h)},setUnselectable:function(g,h){var i=MT.getDom(g);if(MT.ua.gecko||MT.ua.webkit)i.style[name]=h?"none":"";else if(MT.ua.ie||MT.ua.opera)i.setAttribute("unselectable",h?"on":"");if(h)MT.on(g,"selectstart",function(){return false});else MT.off(g,"selectstart")},setOpacity:function(g,h){var i=a.getDom(g).style;if("opacity"in i)i.opacity=h;else if("MozOpacity"in
i)i.MozOpacity=h;else if("filter"in i)i.filter=h===""?"":"alpha(opacity="+h*100+")"},setInlineBlock:function(g){g=MT.getDom(g).style;g.position="relative";if(MT.ua.ie&&!MT.ua.isVersion("8")){g.zoom="1";g.display="inline"}else g.display=MT.ua.gecko?MT.ua.isVersion("1.9a")?"inline-block":"-moz-inline-box":"inline-block"}});a.mixin(a.Element.prototype,{setStyle:function(g){MT.dom.setStyle(this.tag,g);return this},getStyle:function(g){return MT.dom.getStyle(this.tag,g)},isStyle:function(g,h){return this.getStyle(g)==
h},hasClass:function(g){return MT.q(this.tag).hasClass(g)},toggleCls:function(g,h){MT.q(this.tag).toggleClass(g,h);return this},width:function(g){var h=MT.q(this.tag);if(g){h.width(g);return this}return h.width()},height:function(g){var h=MT.q(this.tag);if(g){h.height(g);return this}return h.height()},innerWidth:function(){return MT.q(this.tag).innerWidth()},innerHeight:function(){return MT.q(this.tag).innerHeight()},outerWidth:function(g){return MT.q(this.tag).outerWidth(g||false)},outerHeight:function(g){return MT.q(this.tag).outerHeight(g||
false)},setWidth:function(g,h){if(!h||!this.anim)this.width(g);else{a.isPlainObject(h)||(h={});this.animate(a.mixin({to:{width:g}},h,false))}return this},setHeight:function(g,h){if(!h||!this.anim)this.height(g);else{a.isPlainObject(h)||(h={});this.animate(a.mixin({to:{height:g}},h,false))}return this},setSize:function(g,h,i){if(g instanceof MT.math.Size||MT.isObject(g)){h=g.height;g=g.width}if(!i||!this.anim){this.width(g);this.height(h)}else{a.isPlainObject(i)||(i={});this.animate(a.mixin({to:{width:g,
height:h}},i,false))}return this},getSize:function(g){var h;g=g||0;if(g==0){g=this.width();h=this.height()}else if(g==1){g=this.innerWidth();h=this.innerHeight()}else{g=this.outerWidth();h=this.outerHeight()}return new MT.math.Size(g,h)},getViewSize:function(){var g=document,h=this.tag;return h==g||h==g.body?{width:MT.dom.getViewportWidth(),height:MT.dom.getViewportHeight()}:{width:h.clientWidth,height:h.clientHeight}},setOpacity:function(g){MT.dom.setOpacity(this.tag,g);return this},setUnselectable:function(g){MT.dom.setUnselectable(this.tag,
g);return this},getColor:function(g,h,i){g=this.getStyle(g);var j=i||i===""?i:"#",k;if(!g||/transparent|inherit/.test(g))return h;if(/^r/.test(g))a.each(g.slice(4,g.length-1).split(","),function(l){k=parseInt(l,10);j+=(k<16?"0":"")+k.toString(16)});else{g=g.replace("#","");j+=g.length==3?g.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):g}return j.length>5?j.toLowerCase():h},setDisplayed:function(g){if(typeof g=="boolean")g=g?e(this.tag):"none";this.setStyle("display:"+g);return this},fixDisplay:function(){if(this.isStyle("display",
"none")){this.setStyle("visibility","hidden");this.setStyle("display",e(this.tag));this.isStyle("display","none")&&this.setStyle("display:block")}},addStyles:function(g,h){var i=0,j=(g||"").match(/\w/g),k,l=j.length,o;if(l==1)i=Math.abs(parseFloat(this.getStyle(h[j[0]]))||0);else if(l)for(k=0;k<l;k++){o=j[k];i+=Math.abs(parseFloat(this.getStyle(h[o]))||0)}return i},getPadding:function(g){return this.addStyles(g,c)},getBorderWidth:function(g){return this.addStyles(g,d)},getMargin:function(g){return this.addStyles(g,
b)}})});
MT.add("mt-dom-position",function(a){a.mixin(a.dom,{getXY:function(f){f=MT.getDom(f);var e;if(f.nodeType===MT.dom.NodeType.DOCUMENT)f=e=0;else{f=MT.q(f).offset();e=f.top;f=f.left}return new MT.math.Coordinate(f,e)},getX:function(f){return MT.dom.getXY(f).x},getY:function(f){return MT.dom.getXY(f).y},getOffsetsTo:function(f,e){var d=MT.dom.getXY(e),c=MT.dom.getXY(f);return[c.x-d.x,c.y-d.y]},setXY:function(f,e,d){var c=MT.getDom(f),b;if(!MT.isFunction(e)){if(a.isObject(e)){b=e.x||e.left;e=e.y||e.top;
if(d&&(a.isBoolean(d)||a.isObject(d))){var g={};if(anim&&f.anim){a.isPlainObject(d)||(d={});if(b)g.left=b;if(e)g.top=e;f.animate(a.mixin({to:g},d));return this}}}else{b=e;e=d}e={left:b,top:e};MT.q(c).offset(e)}return this},setX:function(f,e){return MT.dom.setXY(f,e,MT.dom.getY(f))},setY:function(f,e){return MT.dom.setXY(f,MT.dom.getX(f),e)}},true);a.mixin(a.Element.prototype,{getXY:function(){return MT.dom.getXY(this)},getX:function(){return this.getXY().x},getY:function(){return this.getXY().y},
getOffsetsTo:function(f){return MT.dom.getOffsetsTo(this,f)},getLeft:function(){return parseInt(this.getStyle("left"),10)||0},getTop:function(){return parseInt(this.getStyle("top"),10)||0},getRight:function(){return this.getX()+this.outerWidth()},getBottom:function(){return this.getY()+this.outerHeight()},position:function(){return MT.q(this.tag).position()},setXY:function(f,e){MT.dom.setXY(this,f,e);return this},setX:function(f,e){this.setXY(f,this.getY(),e);return this},setY:function(f,e){this.setXY(this.getX(),
f,e);return this},setLeftTop:function(f,e){var d=this.tag.style;d.left=a.dom.addUnits(f);d.top=a.dom.addUnits(e);return this},getBox:function(){var f=this.getXY(),e=this.getRight(),d=this.getBottom();return new MT.math.Box(f.y,e,d,f.x)},setBox:function(f,e){var d=f.width||f.right-f.left,c=f.height||f.bottom-f.top;this.setXY(f.left,f.top,e);this.setSize(d,c,e);return this},getBound:function(f){f=f||2;var e=this.getXY();f=this.getSize(f);return new MT.math.Rect(e.x,e.y,f.width,f.height)},getRegion:function(){return this.tag==
MT.dom.getBody().tag?this.getViewPortRegion():this.getBox()},getViewPortRegion:function(f){f=f||a.Config.docEl;var e=false,d=a.dom.getWindow(this.tag);d=a.dom.getViewSize(d);if(f){f=a.get(f).getScroll();e=new a.math.Box(f.top,d.width+f.left,f.top+d.height,f.left)}return e},inRegion:function(f,e,d){var c={};if(d&&!(d instanceof a.math.Box))d=new a.math.Box(d.top,d.right,d.bottom,d.left);d=d||this.getBox();if(f.tagName||f instanceof a.Element)c=a.get(f).getBox();else if(a.isObject(f))c=f instanceof
a.math.Box?f:new a.math.Box(f.top,f.right,f.bottom,f.left);else return false;return e?c.contains(d):MT.math.Box.intersects(c,d)},inViewportRegion:function(f,e){return this.inRegion(this.getViewPortRegion(),f,e)},intersect:function(f,e){var d=e||this.getBox(),c={};if(f.tagName||f instanceof a.Element)c=a.get(f).getBox();else if(a.isObject(f))c=f;else return false;d={left:Math.max(c.left,d.left),right:Math.min(c.right,d.right),top:Math.max(c.top,d.top),bottom:Math.min(c.bottom,d.bottom)};return{top:d.top,
right:d.right,bottom:d.bottom,left:d.left,area:(d.bottom-d.top)*(d.right-d.left),yoff:d.bottom-d.top,xoff:d.right-d.left,inRegion:this.inRegion(f,false,e)}},clearPositioning:function(f){f=f||"";this.setStyle({left:f,right:f,top:f,bottom:f,"z-index":"",position:"static"});return this},getPositioning:function(){var f=this.getStyle("left"),e=this.getStyle("top");return{position:this.getStyle("position"),left:f,right:f?"":this.getStyle("right"),top:e,bottom:e?"":this.getStyle("bottom"),"z-index":this.getStyle("z-index")}},
setPositioning:function(f){var e=this.tag.style;this.setStyle(f);if(f.right=="auto")e.right="";if(f.bottom=="auto")e.bottom="";return this}},true)});
MT.add("mt-dom-scroll",function(a){a.mixin(a.Element.prototype,{isScrollable:function(){var f=this.tag;return f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth},getScroll:function(){var f=this.tag,e=MT.dom.getDoc().tag,d=e.body,c=e.documentElement;if(f==e||f==d){if(MT.ua.ie&&MT.support.boxModel){e=c.scrollLeft;f=c.scrollTop}else{e=window.pageXOffset;f=window.pageYOffset}e=e||(d?d.scrollLeft:0);f=f||(d?d.scrollTop:0)}else{e=f.scrollLeft;f=f.scrollTop}return{left:e,top:f}},scrollBy:function(f,
e,d){var c=this.tag;if(f.length){d=e;e=f[1];f=f[0]}else if(typeof f!="number"){d=e;e=f.y;f=f.x}f&&this.scrollTo("left",Math.max(Math.min(c.scrollLeft+f,c.scrollWidth-c.clientWidth),0),d);e&&this.scrollTo("top",Math.max(Math.min(c.scrollTop+e,c.scrollHeight-c.clientHeight),0),d);return this},scrollTo:function(f,e,d){f=/top/i.test(f);var c=this.tag,b={};if(!d||!this.anim)c["scroll"+(f?"Top":"Left")]=e;else{MT.isPlainObject(d)||(d={});b["scroll"+(f?"Top":"Left")]=e;this.animate(a.mixin({to:b},d))}return this},
scroll:function(f,e,d){if(!this.isScrollable())return false;var c=this.tag,b=c.scrollLeft,g=c.scrollTop,h=false;e={l:Math.min(b+e,c.scrollWidth-c.clientWidth),r:Math.max(b-e,0),t:Math.max(g-e,0),b:Math.min(g+e,c.scrollHeight-c.clientHeight)};e.d=e.b;e.u=e.t;f=f.substr(0,1);if((e=e[f])>-1){h=true;this.scrollTo(f=="l"||f=="r"?"left":"top",e,d)}return h},scrollIntoView:function(f,e,d,c){f=a.getDom(f)||a.dom.getDoc().tag;var b=this.tag,g=this.getOffsetsTo(f),h=f.clientWidth-b.offsetWidth;b=f.clientHeight-
b.offsetHeight;var i=f.scrollLeft,j=f.scrollTop,k={};if(e){if(d)i+=g[0]-h/2;j+=g[1]-b/2}else{if(d)i+=Math.min(g[0],Math.max(g[0]-h,0));j+=Math.min(g[1],Math.max(g[1]-b,0))}if(!c||!this.anim){f.scrollTop=j;if(d)f.scrollLeft=i}else{k.scrollTop=j;if(d)k.scrollLeft=i;a.isPlainObject(c)||(c={});a.get(f).animate(a.mixin({to:k},c))}return this}},true)});
MT.add("mt-dom-alignment",function(a){var f=MT.dom.getDoc().tag,e=Math.round;a.mixin(a.Element.prototype,{getAlignToXY:function(d,c,b){d=MT.get(d);b=b||[0,0];c=(!c||c=="?"?"tl-bl?":!/-/.test(c)&&c!==""?"tl-"+c:c||"tl-bl").toLowerCase();var g,h,i=false;if(c=c.match(/^([a-z]+)-([a-z]+)(\?)?$/)){var j=c[1],k=c[2];i=!!c[3];g=this.getAnchorXY(j,true);h=d.getAnchorXY(k,false);c=h[0]-g[0]+b[0];b=h[1]-g[1]+b[1];if(i){d=this.Bound(d,c,b,j,k);c=d[0];b=d[1]}return new MT.math.Coordinate(c,b)}},Bound:function(d,
c,b,g,h){var i,j,k=MT.dom.getViewportWidth()-10,l=MT.dom.getViewportHeight()-10,o,m;m=o=false;i=f.documentElement;j=f.body;var p=i.scrollLeft||j.scrollLeft||0,t=i.scrollTop||j.scrollTop||0;i=this.outerWidth();j=this.outerHeight();d=d.getBox();if(g||h){o=g.charAt(0);g=g.charAt(g.length-1);m=h.charAt(0);h=h.charAt(h.length-1);o=o=="t"&&m=="b"||o=="b"&&m=="t";m=g=="r"&&h=="l"||g=="l"&&h=="r"}if(c+i>k+p)c=m?d.left-i:k+p-i;if(c<p)c=m?d.right:p;if(b+j>l+t)b=o?d.top-j:l+t-j;if(b<t)b=o?d.bottom:t;return[c,
b]},getAnchorXY:function(d,c,b){d=(d||"tl").toLowerCase();b=b||{};var g=this.tag,h=g==f.body||g==f;g=b.width||h?MT.dom.getViewportWidth():this.outerWidth();var i=b.height||h?MT.dom.getViewportHeight():this.outerHeight(),j=this.getXY(),k=this.getScroll();b=h?k.left:!c?j.x:0;c=h?k.top:!c?j.y:0;d={c:[e(g*0.5),e(i*0.5)],t:[e(g*0.5),0],l:[0,e(i*0.5)],r:[g,e(i*0.5)],b:[e(g*0.5),i],tl:[0,0],bl:[0,i],br:[g,i],tr:[g,0]}[d];return[d[0]+b,d[1]+c]},alignTo:function(d,c,b,g){this.setXY(this.getAlignToXY(d,c,b),
g);return this},center:function(d){return this.alignTo(d||f,"c-c")},getConstrainVector:function(d){var c=false,b=[0,0],g;if(d.tagName||MT.isString(d)||d instanceof MT.Element)g=MT.get(d).getBox();else if(a.isObject(d))g=d;else return false;d=this.getRegion();if(d.right>g.right){c=true;b[0]=g.right-d.right}if(d.left+b[0]<g.left){c=true;b[0]=g.left-d.left}if(d.bottom>g.bottom){c=true;b[1]=g.bottom-d.bottom}if(d.top+b[1]<g.top){c=true;b[1]=g.top-d.top}return c?b:false}},true)});
MT.add("mt-dom-mask",function(a){var f=a.Element,e=f.prototype,d=a.Config.win,c=a.Config.doc;e.createShim=function(){var b=c.createElement("iframe"),g=this.tag;b.frameBorder="0";b.className=MT.cssPrefix+"shim";b.target=MT.ifrmSrc;return MT.get(g.parentNode.insertBefore(b,g))};e.createProxy=function(b,g,h){b=MT.isString(b)?{"class":b}:b;var i=b.tag||"<div>";proxy=g?MT.q(i,b).appendTo(MT.getDom(g)):MT.q(i,b).insertBefore(this.tag);proxy=MT.get(proxy[0]);proxy.setDisplayMode(f.DISPLAY);proxy.hide();
h&&this.setBox&&this.getBox&&proxy.setBox(this.getBox());return proxy};e.mask=function(b,g,h){var i=this.tag,j=this.getCache().data,k=j.mask,l=j.maskMsg,o,m,p=MT.cssPrefix;this.addClass(p+"masked");this.isStyle("position","static")&&this.addClass(p+"masked-relative");k&&k.remove();l&&l.remove();o=this.createChild({"class":p+"mask"+(h!==false?"":" "+p+"mask-gray"),html:b?'<div class="'+(g||p+"mask-message")+'">'+b+"</div>":""});b=b?MT.get(o.tag.firstChild):null;m=this.getSize();j.mask=o;j.maskMsg=
b;if(i===c.body){m.width=d.innerWidth;m.height=d.innerHeight;this.maskDocResize&&a.off(d,"resize",SLOT(this.maskDocResize,this));this.maskDocResize=function(){m={};m.width=d.innerWidth;m.height=d.innerHeight;o.setSize(m)};a.on(d,"resize",SLOT(this.maskDocResize,this))}o.setSize(m);b&&b.center(o);return this};e.isMasked=function(){var b=false;if(this.getCache().data.mask)b=true;return b};e.unmask=function(){var b=this.getCache().data,g=b.mask,h=b.maskMsg,i=MT.cssPrefix;if(g){g.remove();delete b.mask}if(h){h.remove();
delete b.maskMsg}this.removeClass(i+"masked",i+"masked-relative");if(this.tag===c.body){a.off(d,"resize",SLOT(this.maskDocResize,this));delete this.maskDocResize}return this}});
MT.add("mt-dom-insertion",function(a){var f=a.Element.prototype,e=/^body/i,d=/a|button|embed|iframe|img|input|object|select|textarea/i;f.createChild=function(c,b,g){c=MT.isString(c)?{"class":c}:c;var h=c.tag||"<div>",i=this.tag;c=b?MT.q(h,c).insertBefore(i):i.firstChild&&g?MT.q(h,c).insertBefore(i.firstChild):MT.q(h,c).appendTo(i);return MT.get(c[0])};f.needsTabIndex=function(){var c=this.tag;if(c){if(c.nodeName==="a"&&!c.href)return true;return!d.test(c.nodeName)}};f.focusable=function(){var c=this.tag,
b=c.nodeName,g=false;if(!c.disabled)if(d.test(b)){if(b!=="a"||c.href)g=true}else g=!isNaN(c.tabIndex);return g&&this.isVisible(true)};f.wrap=function(c){return MT.q(this.tag).wrap(c)[0].parentNode};f.unwrap=function(){MT.q(this.tag).unwrap();return this};f.html=function(c){var b=this.tag;if(arguments.length>0)MT.q(b).html(c);else return MT.q(b).html()};f.text=function(c){var b=this.tag;if(arguments.length>0)MT.q(b).text(c);else return MT.q(b).text()};f.append=function(c){a.q(this.tag).append(c);return this};
f.prepend=function(c){a.q(this.tag).prepend(c);return this};f.insertBefore=function(c){a.q(this.tag).insertBefore(c);return this};f.insertAfter=function(c){a.q(this.tag).insertAfter(c);return this};f.empty=function(){a.q(this.tag).empty();return this};f.inDoc=function(c){var b=this.tag;c=c?c.tag||c:b.ownerDocument;if(c.documentElement)return a.dom.contains(c.documentElement,b)};f.isVisible=function(c){var b=!this.isStyle("visibility","hidden")&&!this.isStyle("display","none"),g=this.tag.parentNode;
if(c!==true||!b)return b;for(;g&&!e.test(g.tagName);){b=g.style;c=b.visibility;b=b.display;c=c?c=="hidden":false;b=b?b=="none":false;if(c&&b)return false;g=g.parentNode}return true};f.replace=function(c){var b=this.tag;if(typeof c=="string")c=a.dom.create(c);b.parentNode.replaceChild(a.getDom(c),b);return this}});
(function(a){var f=parseInt,e=RegExp;a.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(d){a.Color.re_RGB.test(d)||(d=a.Color.toHex(d));if(a.Color.re_hex.exec(d))d="rgb("+
[f(e.$1,16),f(e.$2,16),f(e.$3,16)].join(", ")+")";return d},toHex:function(d){d=a.Color.KEYWORDS[d]||d;if(a.Color.re_RGB.exec(d)){d=[Number(e.$1).toString(16),Number(e.$2).toString(16),Number(e.$3).toString(16)];for(var c=0;c<d.length;c++)if(d[c].length<2)d[c]="0"+d[c];d=d.join("")}if(d.length<6)d=d.replace(a.Color.re_hex3,"$1$1");if(d!=="transparent"&&d.indexOf("#")<0)d="#"+d;return d.toUpperCase()}}})(MT);
MT.mtClass("MT.ElemLoader",{$extend:MT.events.EventTarget,baseParams:null,isLoader:true,autoLoad:false,statics:{autoId:100},target:null,url:null,ajaxOptions:null,loadMask:false,constructor:function(a,f){var e=MT;f=f||{};if(e.isString(a))this.qName=a;else if(e.isObject(a))f=a;e.mixin(this,f,true);this.pkg={};this.optCache={};this.setTarget(this.target);if(this.autoLoad)this.load(this.ajaxOptions||{})},isQue:function(){return this.qName?true:false},getQue:function(){if(this.isQue())return this.pkg.ajaxQ;
return null},checkQue:function(){var a;a=this.getQue();if(!a){a=MT.ajaxQ.create(this.qName,this.queueOptions||{});this.pkg.ajaxQ=a}return a},resetQue:function(a,f){if(MT.isObject(a))f=a;f=f||{};this.getQue()&&MT.ajaxQ.destroy(this.qName);if(MT.isString(a))this.qName=a;this.queueOptions=f;this.pkg.ajaxQ=MT.ajaxQ.create(this.qName,f)},load:function(a){a=MT.object.clone(a);var f=MT,e=this.pkg,d="optCache"+MT.ElemLoader.autoId++,c=this.isQue(),b=f.func,g=a.loadMask||this.loadMask,h=a.params||{},i=a.ajaxOptions||
{};f.mixin(i,this.ajaxOptions);f.mixin(a,i);f.mixin(h,this.baseParams||{},true);f.mixin(a,{url:this.url});if(!a.url)throw Error("ajax without url @dom.loader.js, attention please!");a.data=h;if(this.fire("beforeload",[this,a])!==false){if(g){this.addMask(g);e.mask=g}this.optCache[d]={mask:g,renderer:a.renderer||this.renderer,success:a.success||this.success,complete:a.complete||this.complete,error:a.error||this.error};f.mixin(a,{success:b.bind(this.onSucc,this,d),complete:b.bind(this.onComplete,this,
d),error:b.bind(this.onErr,this,d)},true);c?this.checkQue().add(a):f.ajax(a)}},onSucc:function(a,f,e,d){a=this.optCache[a]||{};this.getRenderer(a.renderer).call(this,this,f);delete a.renderer;if(a.success){a.success.call(this,f,e,d);delete a.success}},onComplete:function(a,f,e){var d=this.pkg;a=this.optCache[a]||{};this.fire("onload",[this,e]);if(a.complete){a.complete.call(this,f,e);delete a.complete}d.mask&&this.removeMask()},onErr:function(a,f,e,d){a=this.optCache[a]||{};if(a.error){a.error.call(this,
f,e,d);delete a.error}},getRenderer:function(a){if(MT.isFunction(a))return a;return this.Renderers.Html},Renderers:{Html:function(a,f){a.getTarget().html(f);return true}},addMask:function(a){this.target.mask(a===true?null:a)},setTarget:function(a){a=MT.get(a);this.getQue()&&this.target&&this.target.key!=a.key&&this.abort();this.target=a},getTarget:function(){return this.target||null},removeMask:function(){this.target.unmask()},startRefresh:function(a,f){var e=this;e.stopRefresh();e.autoRefresh=setInterval(function(){e.load(f)},
a)},stopRefresh:function(){if(this.autoRefresh){clearInterval(this.autoRefresh);delete this.autoRefresh}},clear:function(a){if(this.isQue()){this.getQue().clear(a);a&&this.pkg.mask&&this.removeMask()}},abort:function(a){this.isQue()&&this.getQue().abort(a);this.pkg.mask&&this.removeMask()},destroy:function(){this.stopRefresh();delete this.target;this.clear(true);MT.off(this);delete this.pkg;delete this.optCache}});
MT.add("mt-fx-transition",function(a){function f(){a.events.EventTarget.call(this);this.state_=a.fx.Transition.State.STOPPED;this.endTime=this.startTime=null}a.namespace("fx");a.inherits(f,a.events.EventTarget);var e=f.prototype;f.EventType={BEGIN:"begin",PLAY:"play",PAUSE:"pause",RESUME:"resume",STOP:"stop",END:"end",FINISH:"finish"};f.State={PLAYING:1,PAUSED:0,STOPPED:-1};e.setState=function(d){this.state_=d};e.setStatePlaying=function(){this.state_=a.fx.Transition.State.PLAYING};e.setStatePaused=
function(){this.state_=a.fx.Transition.State.PAUSED};e.setStateStopped=function(){this.state_=a.fx.Transition.State.STOPPED};e.getState=function(){return this.state_};e.play=MT.noop;e.pause=MT.noop;e.stop=MT.noop;e.isPlaying=function(){return this.state_===a.fx.Transition.State.PLAYING};e.isPaused=function(){return this.state_===a.fx.Transition.State.PAUSED};e.isStopped=function(){return this.state_===a.fx.Transition.State.STOPPED};e.onBegin=function(){this.dispatchEvent_(a.fx.Transition.EventType.BEGIN)};
e.onPlay=function(){this.dispatchEvent_(a.fx.Transition.EventType.PLAY)};e.onPause=function(){this.dispatchEvent_(a.fx.Transition.EventType.PAUSE)};e.onResume=function(){this.dispatchEvent_(a.fx.Transition.EventType.RESUME)};e.onStop=function(){this.dispatchEvent_(a.fx.Transition.EventType.STOP)};e.onEnd=function(){this.dispatchEvent_(a.fx.Transition.EventType.END)};e.onFinish=function(){this.dispatchEvent_(a.fx.Transition.EventType.FINISH)};e.dispatchEvent_=function(d){this.fire(d)};a.fx.Transition=
f});
MT.fx.easing={Linear:function(a){return a},ease:function(a){var f=0.07813-a/2,e=Math.sqrt(0.0066+f*f);a=e-f;f=-e-f;a=Math.pow(Math.abs(a),1/3)*(a<0?-1:1)+Math.pow(Math.abs(f),1/3)*(f<0?-1:1)+0.25;return Math.pow(1-a,2)*3*a*0.1+(1-a)*3*a*a+a*a*a},easeIn:function(a){return Math.pow(a,1.7)},easeOut:function(a){return Math.pow(a,0.48)},easeInOut:function(a){var f=0.48-a/1.04,e=Math.sqrt(0.1734+f*f);a=e-f;f=-e-f;a=Math.pow(Math.abs(a),1/3)*(a<0?-1:1)+Math.pow(Math.abs(f),1/3)*(f<0?-1:1)+0.5;return(1-a)*
3*a*a+a*a*a},quadIn:function(a){return a*a},quadOut:function(a){return(2-a)*a},quadInOut:function(a){if((a*=2)<1)return 0.5*a*a;return 0.5*(1- --a*(a-2))},quartIn:function(a){return a*a*a*a},quartOut:function(a){return 1-MT.fx.easing.quartIn(a-1)},quartInOut:function(a){if((a*=2)<1)return 0.5*a*a*a*a;return 0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){if(a===0||a===1)return a;return-(Math.pow(2,10*(a-=1))*Math.sin((a-0.075)*2*Math.PI/0.3))},elasticOut:function(){return 1-Ext.fx.Easing.elasticIn(1-
n)},elasticInOut:function(a){if(a===0||(a*=2)===2)return a;if(a<1)return-0.5*Math.pow(2,10*(a-=1))*Math.sin((a-0.1125)*2*Math.PI/0.45);return Math.pow(2,-10*(a-=1))*Math.sin((a-0.1125)*2*Math.PI/0.45)*0.5+1},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},backInOut:function(a){var f=1.70158;if((a*=2)<1)return 0.5*a*a*(((f*=1.525)+1)*a-f);return 0.5*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)},bounceIn:function(a){return 1-MT.fx.easing.bounceOut(1-
a)},bounceOut:function(a){if(a<1/2.75)a*=7.5625*a;else if(a<2/2.75){a-=1.5/2.75;a=7.5625*a*a+0.75}else if(a<2.5/2.75){a-=2.25/2.75;a=7.5625*a*a+0.9375}else{a-=2.625/2.75;a=7.5625*a*a+0.984375}return a},bounceInOut:function(a){if(a<0.5)return MT.fx.easing.bounceIn(a*2)*0.5;return MT.fx.easing.bounceOut(a*2-1)*0.5+0.5}};
MT.add("mt-fx-anim",function(a){a.namespace("fx.anim");var f={};a.fx.anim=f;f.Animated=function(){};a.mixin(f,{TIMEOUT:20,MOZ_BEFORE_PAINT_EVENT_:"MozBeforePaint",activeAnimations_:{},animationWindow_:null,requestAnimationFrameFn_:null,cancelRequestAnimationFrameFn_:null,animationTimer_:null,registerAnimation:function(e){var d=a.getUid(e);d in f.activeAnimations_||(f.activeAnimations_[d]=e);f.requestAnimationTimer_()},unregisterAnimation:function(e){e=a.getUid(e);delete f.activeAnimations_[e];a.isEmpty(f.activeAnimations_)&&
f.cancelAnimationTimer_()},tearDown:function(){f.animationWindow_=null;f.cancelTimer_()},setAnimationWindow:function(e){f.animationWindow_=e;var d=!!f.animationTimer_;d&&f.cancelAnimationTimer_();if(e){f.requestAnimationFrameFn_=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||null;f.cancelRequestAnimationFrameFn_=e.cancelRequestAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||
e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||null}else{f.requestAnimationFrameFn_=null;f.cancelRequestAnimationFrameFn_=null}if(f.requestAnimationFrameFn_&&e.mozRequestAnimationFrame&&!f.cancelRequestAnimationFrameFn_){f.requestAnimationTimer_=f.requestMozAnimationFrame_;f.cancelAnimationTimer_=f.cancelMozAnimationFrame_}else if(f.requestAnimationFrameFn_&&f.cancelRequestAnimationFrameFn_){f.requestAnimationTimer_=f.requestAnimationFrame_;f.cancelAnimationTimer_=f.cancelAnimationFrame_}else{f.requestAnimationTimer_=
f.requestTimer_;f.cancelAnimationTimer_=f.cancelTimer_}d&&f.requestAnimationTimer_()},requestTimer_:function(){if(!f.animationTimer_)f.animationTimer_=a.Timer.once(function(){f.animationTimer_=null;f.cycleAnimations_(a.now())},f.TIMEOUT)},cancelTimer_:function(){if(f.animationTimer_){a.Timer.clear(f.animationTimer_);f.animationTimer_=null}},requestAnimationFrame_:function(){if(!f.animationTimer_)f.animationTimer_=f.requestAnimationFrameFn_.call(f.animationWindow_,function(){f.animationTimer_=null;
f.cycleAnimations_(a.now())})},cancelAnimationFrame_:function(){if(f.animationTimer_){f.cancelRequestAnimationFrameFn_.call(f.animationWindow_,f.animationTimer_);f.animationTimer_=null}},requestMozAnimationFrame_:function(){if(!f.animationTimer_){var e=a.on(f.animationWindow_,SIGNAL(f.MOZ_BEFORE_PAINT_EVENT_),SLOT(function(d){f.cycleAnimations_(d.timeStamp||a.now())}));f.animationTimer_=e.key}f.requestAnimationFrameFn_.call(f.animationWindow_,null)},cancelMozAnimationFrame_:function(){if(f.animationTimer_){a.off(f.animationWindow_,
SIGNAL(f.MOZ_BEFORE_PAINT_EVENT_));f.animationTimer_=null}},requestAnimationTimer_:f.requestTimer_,cancelAnimationTimer_:f.cancelTimer_,cycleAnimations_:function(e){a.each(f.activeAnimations_,function(d){d.onAnimationFrame(e)});a.isEmpty(f.activeAnimations_)||f.requestAnimationTimer_()}})});
MT.add("mt-fx-animation",function(a){function f(d,c,b,g){a.fx.Transition.call(this);if(!a.isArray(d)||!a.isArray(c))throw Error("Start and end parameters must be arrays");if(d.length!=c.length)throw Error("Start and end points must be the same length");this.startPoint=d;this.endPoint=c;this.duration=b;this.accel_=g;this.coords=[]}a.inherits(f,a.fx.Transition);var e=f.prototype;f.EventType=MT.mixin({ANIMATE:"animate",DESTROY:"destroy"},a.fx.Transition.EventType);f.TIMEOUT=a.fx.anim.TIMEOUT;f.State=
a.fx.Transition.State;f.setAnimationWindow=function(d){a.fx.anim.setAnimationWindow(d)};e.fps_=0;e.progress=0;e.lastFrame=null;e.play=function(d){if(d||this.isStopped()){this.progress=0;this.coords=this.startPoint}else if(this.isPlaying())return false;a.fx.anim.unregisterAnimation(this);this.startTime=d=MT.now();if(this.isPaused())this.startTime-=this.duration*this.progress;this.endTime=this.startTime+this.duration;this.lastFrame=this.startTime;if(!this.progress)this.onBegin();this.onPlay();if(this.isPaused())this.onResume();
this.setStatePlaying();a.fx.anim.registerAnimation(this);this.cycle(d);return true};e.stop=function(d){a.fx.anim.unregisterAnimation(this);this.setStateStopped();if(d)this.progress=1;this.updateCoords_(this.progress);this.onStop();this.onEnd()};e.pause=function(){if(this.isPlaying()){a.fx.anim.unregisterAnimation(this);this.setStatePaused();this.onPause()}};e.setProgress=function(d){this.progress=d;if(this.isPlaying()){this.startTime=MT.now()-this.duration*this.progress;this.endTime=this.startTime+
this.duration}};e.dispose=function(){this.isStopped()||this.stop(false);this.onDestroy()};e.destroy=function(){this.dispose()};e.onAnimationFrame=function(d){this.cycle(d)};e.cycle=function(d){this.progress=(d-this.startTime)/(this.endTime-this.startTime);if(this.progress>=1)this.progress=1;this.fps_=1E3/(d-this.lastFrame);this.lastFrame=d;this.updateCoords_(this.progress);if(this.progress==1){this.setStateStopped();a.fx.anim.unregisterAnimation(this);this.onFinish();this.onEnd()}else if(this.isPlaying())this.onAnimate()};
e.updateCoords_=function(d){var c;if(MT.isFunction(this.accel_))d=this.accel_(d);this.coords=Array(this.startPoint.length);for(c=0;c<this.startPoint.length;c++)this.coords[c]=(this.endPoint[c]-this.startPoint[c])*d+this.startPoint[c]};e.onAnimate=function(){this.dispatchAnimationEvent(a.fx.Animation.EventType.ANIMATE)};e.onDestroy=function(){this.dispatchAnimationEvent(a.fx.Animation.EventType.DESTROY)};e.dispatchAnimationEvent=function(d){this.fire(d,new a.fx.AnimationEvent(d,this))};a.fx.Animation=
f;a.fx.AnimationEvent=function(d,c){a.events.Event.call(this,d);this.coords=c.coords;this.x=c.coords[0];this.y=c.coords[1];this.z=c.coords[2];this.duration=c.duration;this.progress=c.progress;this.fps=c.fps_;this.state=c.getState();this.anim=c};a.inherits(a.fx.AnimationEvent,a.events.Event);a.fx.AnimationEvent.prototype.coordsAsInts=function(){return a.array.map(this.coords,Math.round)}});
MT.add("mt-fx-anim",function(a){function f(){a.fx.Transition.call(this);this.queue=[]}function e(){a.fx.Queue.call(this);this.finishedCounter_=0}function d(){a.fx.Queue.call(this);this.current_=0}a.inherits(f,a.fx.Transition);var c=f.prototype;c.add=function(b){if(!this.isStopped())throw Error("Not allowed to add animations to a running animation queue.");if(!(a.array.indexOf(this.queue,b)>-1)){this.queue.push(b);a.on(b,SIGNAL(a.fx.Transition.EventType.FINISH),SLOT(this.onAnimationFinish,this))}};
c.remove=function(b){if(!this.isStopped())throw Error("Not allowed to remove animations from a running animation queue.");a.array.remove(this.queue,b)&&a.off(b,SIGNAL(a.fx.Transition.EventType.FINISH),SLOT(this.onAnimationFinish,this))};c.onAnimationFinish=MT.noop;c.dispose=function(){a.each(this.queue,function(b){b.dispose()});this.queue.length=0};a.fx.Queue=f;a.inherits(e,a.fx.Queue);c=e.prototype;c.play=function(b){if(this.queue.length==0)return false;if(b||this.isStopped()){this.finishedCounter_=
0;this.onBegin()}else if(this.isPlaying())return false;this.onPlay();if(this.isPaused())this.onResume();var g=this.isPaused()&&!b;this.startTime=a.now();this.endTime=null;this.setStatePlaying();a.each(this.queue,function(h){if(!g||h.isPaused())h.play(b)});return true};c.pause=function(){if(this.isPlaying()){a.each(this.queue,function(b){b.isPlaying()&&b.pause()});this.setStatePaused();this.onPause()}};c.stop=function(b){a.each(this.queue,function(g){g.isStopped()||g.stop(b)});this.setStateStopped();
this.endTime=MT.now();this.onStop();this.onEnd()};c.onAnimationFinish=function(){this.finishedCounter_++;if(this.finishedCounter_==this.queue.length){this.endTime=MT.now();this.setStateStopped();this.onFinish();this.onEnd()}};a.fx.ParallelQueue=e;a.inherits(d,a.fx.Queue);c=d.prototype;c.play=function(b){if(this.queue.length==0)return false;if(b||this.isStopped()){this.current_<this.queue.length&&!this.queue[this.current_].isStopped()&&this.queue[this.current_].stop(false);this.current_=0;this.onBegin()}else if(this.isPlaying())return false;
this.onPlay();if(this.isPaused())this.onResume();this.startTime=MT.now();this.endTime=null;this.setStatePlaying();this.queue[this.current_].play(b);return true};c.pause=function(){if(this.isPlaying()){this.queue[this.current_].pause();this.setStatePaused();this.onPause()}};c.stop=function(b){this.setStateStopped();this.endTime=MT.now();if(b)for(b=this.current_;b<this.queue.length;++b){var g=this.queue[b];g.isStopped()&&g.play();g.isStopped()||g.stop(true)}else this.current_<this.queue.length&&this.queue[this.current_].stop(false);
this.onStop();this.onEnd()};c.onAnimationFinish=function(){if(this.isPlaying()){this.current_++;if(this.current_<this.queue.length)this.queue[this.current_].play();else{this.endTime=MT.now();this.setStateStopped();this.onFinish();this.onEnd()}}};a.fx.SerialQueue=d});
MT.add("mt-fx-dom",function(a,f){a.dom.Anim=function(c,b){this.node=c;this.keyframes=[];this.nextPct=-1;this._runtimeAttr={};var g=this.keyFrames_(b);a.fx.Animation.call(this,g[0],g[1],g[2],g[3]);a.dom.Anim._instances[a.getUid(this)]=this};a.inherits(a.dom.Anim,a.fx.Animation);var e=a.dom.Anim,d=e.prototype;e._instances={};e.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;e.DEFAULT_UNIT="px";e.DEFAULT_EASING=a.fx.easing.Linear;e.behaviors={left:{get:function(c){return c.node.getX()}},
top:{get:function(c){return c.node.getY()}}};e.DEFAULT_SETTER=function(c,b,g,h){c=c.node;var i=c.tag;if(i)if("style"in i&&(b in i.style||b==="opacity")){h=h||"";b==="opacity"?c.setOpacity(g):c.setStyle(b+":"+g+h)}else if("attributes"in i&&b in i.attributes)i.setAttribute(b,g);else{if(b in i)i[b]=g}else if(c.set)c.set({attr:g});else if(b in c)c[b]=g};e.DEFAULT_GETTER=function(c,b){var g=c.node,h=g.tag,i="";if(h)if("style"in h&&(b in h.style||b==="opacity"))i=g.getStyle(b);else if("attributes"in h&&
b in h.attributes)i=g.getAttr(b);else{if(b in h)i=h[b]}else if(g.get)i=g.get(b);else if(b in g)i=g[b];return i};e.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;d.updateStyle=function(){var c;if(this.nextPct!=-1&&this.nextPct<this.progress*100&&this.keyframes.length>0){this.pause();c=this.keyframes.shift();if(this.keyframes.length){this.nextPct=this.keyframes[0].pct;c=this._initAnimAttr(c.attrs);this.startPoint=c[0];this.endPoint=c[1];this.play();return}else{this.nextPct=-1;this.play()}}this.updateStyle_()};
d.updateStyle_=function(c){var b=this._runtimeAttr,g=a.dom.Anim.behaviors,h,i,j,k=0,l;for(j in b)if(a.isPlainObject(b[j])&&b[j].to!=f){h=b[j];if(j in g&&"set"in g[j]){i=g[j].set;l="allData"in g[j]?this.coords:this.coords[k]}else{i=a.dom.Anim.DEFAULT_SETTER;l=this.coords[k]}if(c)l=c[k];i(this,j,l,h.unit);k++}};d.keyFrames_=function(c){var b=[],g;if(c.keyframes){var h,i=c.keyframes,j=/^(from|to|\d+%?)$/;for(h in i)if(i.hasOwnProperty(h)&&j.test(h)){g={attrs:a.mixin({to:i[h]},c,false)};if(h==="from")h=
0;else if(h==="to")h=100;g.pct=parseInt(h,10);b.push(g)}this.keyframes=b;b=this.keyframes.shift();if(this.keyframes.length)this.nextPct=this.keyframes[0].pct;return this._initAnimAttr(a.mixin(c,b.attrs,true))}else return this._initAnimAttr(c)};d._initAnimAttr=function(c){var b=c.from||{},g={duration:c.duration*1E3,easing:c.easing||a.dom.Anim.DEFAULT_EASING},h=a.dom.Anim.behaviors,i=this.node,j,k,l,o=[],m=[];a.each(c.to,function(p,t){if(typeof p==="function")p=p.call(this,i);k=b[t];if(k===f)k=t in
h&&"get"in h[t]?h[t].get(this,t):a.dom.Anim.DEFAULT_GETTER(this,t);else if(typeof k==="function")k=k.call(this,i);var w=a.dom.Anim.RE_UNITS.exec(k),v=a.dom.Anim.RE_UNITS.exec(p),C=false;k=w?w[1]:k;l=v?v[1]:p;j=v?v[2]:w?w[2]:"";if(!j&&a.dom.Anim.RE_DEFAULT_UNIT.test(t))j=a.dom.Anim.DEFAULT_UNIT;if(k&&l){C=t in h&&"parse"in h[t];a.isArray(k)||(k=C?h[t].parse(k):Number(k));l=C?h[t].parse(l):Number(l);g[t]={from:k,to:l,unit:j};o.push(k);m.push(l)}},this);a.mixin(g,c,false);this._runtimeAttr=g;return[a.array.flatten(o),
a.array.flatten(m),g.duration,g.easing]};d.onAnimate=function(){var c=this._runtimeAttr;this.updateStyle();c.onAnimate&&c.onAnimate.call(this);MT.dom.Anim.superClass_.onAnimate.call(this)};d.onEnd=function(){var c=this._runtimeAttr;this.updateStyle();c&&c.onEnd&&c.onEnd.call(this);a.dom.Anim.superClass_.onEnd.call(this)};d.onBegin=function(){var c=this._runtimeAttr;this.updateStyle();c.onBegin&&c.onBegin.call(this);a.dom.Anim.superClass_.onBegin.call(this)};d.dispose=function(){this._runtimeAttr=
{};this.keframes=[];delete this._runtimeAttr;delete a.dom.Anim._instances[MT.getUid(this)];a.dom.Anim.superClass_.dispose.call(this)};a.ready(function(){a.fx.Animation.setAnimationWindow(a.Config.win)})});
MT.add("mt-dom-fx-color",function(a){a.dom.Anim.behaviors.color={set:function(f,e,d){if(a.isArray(d)){for(var c=[],b=0,g=d.length;b<g;b++)c[b]=Math.round(d[b]);f.node.setStyle(e+":rgb("+c.join(",")+")")}},get:function(f,e){var d=f.node.getColor(e);return d=this.parse(d==="transparent"?"rgb(255, 255, 255)":d)},allData:true,parse:function(f){f=a.Color.re_RGB.exec(a.Color.toRGB(f));if(!f||f.length<3)throw Error("invalid from or to passed to color behavior @dom.anim-color");a.array.removeAt(f,0);return f=
a.array.map(f,function(e){return Number(e)})}};a.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(f){a.dom.Anim.behaviors[f]=a.dom.Anim.behaviors.color})});MT.add("mt-dom-fx-scroll",function(a){a.dom.Anim.behaviors.scrollLeft={set:function(f,e,d){f.node.scrollTo("left",d)},get:function(f){return f.node.getScroll().left}};a.dom.Anim.behaviors.scrollTop={set:function(f,e,d){f.node.scrollTo("top",d)},get:function(f){return f.node.getScroll().top}}});
MT.add("mt-dom-anim",function(a){var f=a.Element.prototype;f.animate=function(e){var d;d=new a.dom.Anim(this,this.anim(e));e.stop||d.play();return d};f.anim=function(e){if(!MT.isObject(e))return false;return{duration:e.duration||1,easing:e.easing,from:e.from||{},to:e.to,onBegin:e.onBegin,onAnimate:e.onAnimate,onEnd:e.onEnd,keyframes:e.keyframes}};f.fadeIn=function(e){e=e||{};this.show().animate(a.mixin(e,{to:{opacity:1}}));return this};f.fadeOut=function(e){e=e||{};var d=this;d.animate(a.mixin(e,
{to:{opacity:0},onEnd:function(){if(d.tag)e.useDisplay?d.setVisible_(false):d.hide()}}));return d};f.highlight=function(e,d){var c=this,b=c.tag,g={},h,i,j;d=d||{};j=d.attr||"backgroundColor";g[j]=e||"ffff9c";if(d.to)i=d.to;else{i={};i[j]=d.endColor||c.getColor(j,"ffffff","")}d.onBegin=function(){h=b.style[j];c.setOpacity("");c.show()};d.onEnd=function(){if(b)b.style[j]=h};c.animate(a.mixin(d,{duration:1,easing:a.fx.easing.easeIn,from:g,to:i}));return c};f.ghost=function(e,d){var c=this,b={};e=e||
"b";var g=c.width(),h=c.height(),i=c.getXY();i=[i.x,i.y];var j=c.getPositioning(),k={opacity:0};switch(e){case "t":k.top=i[1]-h;break;case "l":k.left=i[0]-g;break;case "r":k.left=i[0]+g;break;case "b":k.top=i[1]+h;break;case "tl":k.left=i[0]-g;k.top=i[1]-h;break;case "bl":k.left=i[0]-g;k.top=i[1]+h;break;case "br":k.left=i[0]+g;k.top=i[1]+h;break;case "tr":k.left=i[0]+g;k.top=i[1]-h}b.to=k;b.onEnd=function(){if(c.tag){c.hide();c.setOpacity("");c.setPositioning(j)}};a.mixin(b,d||{});c.animate(a.mixin(b,
{duration:0.5,easing:a.fx.easing.easeOut}));return c};f.switchOff=function(e){e=e||{};var d=this,c=d.getSize(),b=d.getXY(),g;d.animate({duration:e.duration||0.5,easing:e.easing||a.fx.easing.easeIn,keyframes:{33:{opacity:0.3},66:{height:1,top:b.y+c.height/2},100:{width:1,left:b.x+c.width/2}},onBegin:function(){d.setOpacity("");g=d.getPositioning()},onEnd:function(){e.useDisplay?d.setDisplayed(false):d.hide();d.setOpacity("");d.setPositioning(g);d.setSize(c)}});return d};f.puff=function(e){var d=this,
c=e||{};a.mixin(c,{easing:a.fx.easing.easeOut,duration:0.5,useDisplay:false});d.setOpacity("");d.show();e=d.getBound();var b=d.getStyle("fontSize"),g=d.getPositioning();c.to={width:e.width*2,height:e.height*2,left:e.left-e.width/2,top:e.top-e.height/2,opacity:0,fontSize:"200%"};c.onEnd=function(){if(d.tag){c.useDisplay?d.setDisplayed(false):d.hide();d.setOpacity("");d.setPositioning(g);d.setStyle({fontSize:b})}};d.animate(c);return d};f.slideIn=function(e,d,c){var b=this,g=b.tag,h=g.style,i;e=e||
"t";d=d||{};b.animate({duration:d.duration?Math.max(d.duration,0.5)*2:1,onBegin:function(){var j=this,k,l,o,m,p;c||b.fixDisplay();k=b.getBound();if((e=="t"||e=="b")&&k.height===0)k.height=g.scrollHeight;else if((e=="l"||e=="r")&&k.width===0)k.width=g.scrollWidth;o=b.getPositioning();b.setSize(k.width,k.height);l=b.wrap("<div></div>");l.id="mt-anim-wrap-for-"+b.key;l=a.get(l);l.setPositioning(o);l.isStyle("position","static")&&l.setStyle("position:relative");b.clearPositioning("auto");b.setStyle({visibility:"",
position:"absolute"});c&&l.setSize(k.width,k.height);switch(e){case "t":m={width:k.width+"px",height:"0px"};p={width:k.width+"px",height:k.height+"px"};h.bottom="0px";break;case "r":m={left:k.left+k.width,width:"0px",height:k.height+"px"};p={left:k.left,width:k.width+"px",height:k.height+"px"};break;case "b":m={top:k.top+k.height,width:k.width+"px",height:"0px"};p={top:k.top,width:k.width+"px",height:k.height+"px"};break;case "l":m={width:"0px",height:k.height+"px"};p={width:k.width+"px",height:k.height+
"px"};h.right="0px";break;case "tl":m={left:k.left,top:k.top,width:"0px",height:"0px"};p={width:k.width+"px",height:k.height+"px"};h.bottom="0px";h.right="0px";break;case "tr":m={top:k.top+k.height,width:"0px",height:"0px"};p={top:k.top,width:k.width+"px",height:k.height+"px"};h.bottom="0px";break;case "bl":m={left:k.left+k.width,width:"0px",height:"0px"};p={left:k.top,width:k.width+"px",height:k.height+"px"};h.right="0px";break;case "br":m={left:k.left+k.width,top:k.top+k.height,width:"0px",height:"0px"};
p={left:k.left,top:k.top,width:k.width+"px",height:k.height+"px"}}l.show();a.mixin(d,{duration:d.duration||0.5,easing:d.easing||a.fx.easing.easeOut,from:c?p:m,to:c?m:p,onEnd:function(){if(c){b.setPositioning(o);if(d.useDisplay)b.setDisplayed(false);else{b.setStyle("display:none");b.hide()}}else{b.clearPositioning();b.setPositioning(o)}if(l.tag){l.tag.parentNode.insertBefore(b.tag,l.tag);l.remove()}b.setSize(k.width,k.height);j.dispose()}});i=l.animate(d)},onEnd:function(){i&&i.isPlaying()&&i.dispose()}});
return b};f.slideOut=function(e,d){return this.slideIn(e,d,true)}});
MT.add("dd-ddmbase",function(a){var f=function(){a.events.EventTarget.call(this)},e=a.func;a.inherits(f,a.events.EventTarget);f.prototype.get=function(d){var c=this.constructor;return c.ATTRS?c.ATTRS[d]:c[d]};f.ATTRS={dragCursor:"move",clickPixelThresh:3,clickTimeThresh:1E3,throttleTime:-1,dragMode:"point"};a.mixin(f.prototype,{_createPG:function(){},_setDragMode:function(d){if(d===null)d=a.dd.DDM.get("dragMode");switch(d){case 1:case "intersect":return 1;case 2:case "strict":return 2}return 0},CSS_PREFIX:"mt-dd",
_active:false,_activateTargets:function(){},_drags:[],activeDrag:false,getDrag:function(d){var c=false,b=MT.get(d);b instanceof a.Element&&MT.each(this._drags,function(g){if(g.node.tag===b.tag){c=g;return false}});return c},_regDrag:function(d){if(this.getDrag(d.node))return false;this._active||this._setupListeners();this._drags.push(d);return true},_unregDrag:function(d){var c;c=MT.array.findIndex(this._drags,function(b){if(b.node.key===d.node.key)return true});c!=-1&&MT.array.removeAt(this._drags,
c)},_setupListeners:function(){this._createPG();this._active=true;var d=MT.get(a.Config.doc);d.on("mousemove",e.throttle(e.bind(this._move,this),this.get("throttleTime")));d.on("mouseup",e.bind(this._end,this))},_start:function(){this.fire("ddm:start");this._startDrag()},_startDrag:function(){},_endDrag:function(){},_dropMove:function(){},_end:function(){if(this.activeDrag){this._endDrag();this.fire("ddm:end");this.activeDrag.end.call(this.activeDrag);this.activeDrag=null}},stopDrag:function(){this.activeDrag&&
this._end();return this},_move:function(d){if(this.activeDrag){this.activeDrag._move.call(this.activeDrag,d);this._dropMove()}}});a.namespace("dd");a.dd.DDM=new f;a.mixin(a.dd.DDM,{_pg:null,_debugShim:false,_activateTargets:function(){},_deactivateTargets:function(){},_startDrag:function(){if(this.activeDrag&&this.activeDrag.useShim){this._pg_activate();this._activateTargets()}},_endDrag:function(){this._pg_deactivate();this._deactivateTargets()},_pg_deactivate:function(){this._pg.setStyle("display:none")},
_pg_activate:function(){this._pg||this._createPG();var d=this.activeDrag.activeHandle,c="auto";if(d)c=d.getStyle("cursor");if(c=="auto")c=this.get("dragCursor");this._pg_size();this._pg.setStyle({top:0,left:0,display:"block",opacity:this._debugShim?".5":"0",cursor:c})},_pg_size:function(){if(this.activeDrag){var d=a.dom.getDocumentHeight(),c=a.dom.getDocumentWidth();this._pg.setStyle({height:d+"px",width:c+"px"})}},_createPG:function(){var d=a.q("<div></div>"),c=a.q("body");d=a.get(d[0]);d.setStyle({top:"0",
left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"});d.set({id:"pg_"+d.key},false);d.addClass(this.CSS_PREFIX+"-shim");c.prepend(d.tag);this._pg=d;this._pg.on("mousemove",e.throttle(e.bind(this._move,this),this.get("throttleTime")));this._pg.on("mouseup",e.bind(this._end,this));d=a.get(a.Config.win);d.on("resize",e.bind(this._pg_size,this));d.on("scroll",e.bind(this._pg_size,this))}},true);a.mixin(a.dd.DDM,{_noShim:false,_activeShims:[],
_hasActiveShim:function(){if(this._noShim)return true;return this._activeShims.length},_addActiveShim:function(d){this._activeShims[this._activeShims.length]=d},_removeActiveShim:function(d){var c=[];a.each(this._activeShims,function(b){if(b.key!==d.key)c[c.length]=b});this._activeShims=c},syncActiveShims:function(d){e.delay(function(c){c=c?this.targets:this._lookup();a.each(c,function(b){b.sizeShim.call(b)},this)},0,this,d)},mode:0,POINT:0,INTERSECT:1,STRICT:2,useHash:true,activeDrop:null,validDrops:[],
otherDrops:{},targets:[],_addValid:function(d){this.validDrops[this.validDrops.length]=d;return this},_removeValid:function(d){var c=[];a.each(this.validDrops,function(b){if(b!==d)c[c.length]=b});this.validDrops=c;return this},isOverTarget:function(d){if(this.activeDrag&&d){var c=this.activeDrag.mouseXY,b=this.activeDrag.dragMode,g,h=d.shim;if(c&&this.activeDrag){g=this.activeDrag.region;if(b==this.STRICT)return this.activeDrag.dragNode.inRegion(d.region,true,g);else if(d&&d.shim)if(b==this.INTERSECT&&
this._noShim){c=g?g:this.activeDrag.node;return d.node.inRegion(c,false,d.region)}else{if(this._noShim)h=d.node;return h.inRegion({top:c[1],bottom:c[1],left:c[0],right:c[0]},false,d.region)}else return false}else return false}else return false},clearCache:function(){this.validDrops=[];this.otherDrops={};this._activeShims=[]},_activateTargets:function(){this._noShim=true;this.clearCache();a.each(this.targets,function(d){d._activateShim([]);if(d.noShim==true)this._noShim=false},this);this._handleTargetOver()},
getBestMatch:function(d,c){var b=null,g=0,h;a.each(d,function(i){var j=this.activeDrag.dragNode.intersect(i.node);i.region.area=j.area;if(j.inRegion)if(j.area>g){g=j.area;b=i}},this);if(c){h=[];a.each(d,function(i){if(i!==b)h[h.length]=i},this);return[b,h]}else return b},_deactivateTargets:function(){var d=[],c=this.activeDrag,b=this.activeDrop;if(c&&b&&this.otherDrops[b]){if(c.dragMode){d=this.getBestMatch(this.otherDrops,true);b=d[0];d=d[1]}else{d=this.otherDrops;delete d[b]}c.node.removeClass(this.CSS_PREFIX+
"-drag-over");if(b){b.fire("drop:hit",{drag:c,drop:b,others:d});c.fire("drag:drophit",{drag:c,drop:b,others:d})}}else if(c&&c.dragging){c.node.removeClass(this.CSS_PREFIX+"-drag-over");c.fire("drag:dropmiss",{pageX:c.lastXY[0],pageY:c.lastXY[1]})}this.activeDrop=null;a.each(this.targets,function(g){g._deactivateShim([])},this)},_dropMove:function(){this._hasActiveShim()?this._handleTargetOver():a.each(this.otherDrops,function(d){d._handleOut.apply(d,[])})},_lookup:function(){if(!this.useHash||this._noShim)return this.validDrops;
var d=[];a.each(this.validDrops,function(c){if(c.shim&&c.shim.inViewportRegion(false,c.region))d[d.length]=c});return d},_handleTargetOver:function(){var d=this._lookup();a.each(d,function(c){c._handleTargetOver.call(c)},this)},_regTarget:function(d){this.targets[this.targets.length]=d},_unregTarget:function(d){var c=[],b;a.each(this.targets,function(g){if(g!=d)c[c.length]=g},this);this.targets=c;b=[];a.each(this.validDrops,function(g){if(g!==d)b[b.length]=g});this.validDrops=b},getDrop:function(d){var c=
false,b=a.get(d);b instanceof Y.Node&&a.each(this.targets,function(g){if(b.key===g.node.key)c=g});return c}},true)});
MT.add("dd-drag",function(a){function f(b){a.events.EventTarget.call(this);b=b||{};if(!c._regDrag(this))throw Error("Failed to register node, already in use: "+b.node);this.initializer(b)}a.inherits(f,a.events.EventTarget);var e=f.prototype,d=a.func,c=a.dd.DDM;e.offsetNode=true;e.startCentered=false;e.clickPixelThresh=c.get("clickPixelThresh");e.clickTimeThresh=c.get("clickTimeThresh");e.lock=false;e.setLock=function(b){this.node[b?"addClass":"removeClass"](c.CSS_PREFIX+"-locked");this.lock=b||false;
return this};e.data=false;e.move=true;e.useShim=true;e.activeHandle=false;e.primaryButtonOnly=true;e.dragging=false;e.parent=false;e.target=false;e.setTarget=function(b){this._handleTarget(b);return this};e.dragMode=null;e.setMode=function(b){this.dragMode=b;c._setDragMode(b);return this};e.groups=["default"];e.getGroups=function(){if(!this._groups)this._groups={};var b=[];a.each(this._groups,function(g,h){b[b.length]=h});return b};e.setGroups=function(b){this._groups={};a.each(b,function(g){this._groups[g]=
true},this);return this};e.handles=null;e.setHandles=function(b){if(b){this._handles={};a.each(b,function(g){var h=g;if(g instanceof a.Element)h=g.key;this._handles[h]=g},this)}else this._handles=null;return this};e.haltDown=true;e._bubbleTargets=a.dd.DDM;e.addToGroup=function(b){this._groups[b]=true;c._activateTargets();return this};e.removeFromGroup=function(b){delete this._groups[b];c._activateTargets();return this};e.target=null;e._handleTarget=function(b){if(a.dd.Drop)if(b===false){if(this.target){c._unregTarget(this.target);
this.target=null}return false}else{a.isObject(b)||(b={});b.node=this.node;b.groups=b.groups||this.groups;this.target=new a.dd.Drop(b)}else return false};e._groups=null;e._createEvents=function(){this.on("drag:mouseDown",this._defMouseDownFn,this);this.on("drag:align",this._defAlignFn,this);this.on("drag:drag",this._defDragFn,this);this.on("drag:end",this._defEndFn,this)};e._ev_md=null;e._startTime=null;e._endTime=null;e._handles=null;e._invalids=null;e._invalidsDefault={textarea:true,input:true,a:true,
button:true,select:true};e._dragThreshMet=null;e.deltaXY=null;e.startXY=null;e.nodeXY=null;e.lastXY=null;e.actXY=null;e.realXY=null;e.mouseXY=null;e.region=null;e._handleMouseUp=function(){this.fire("drag:mouseup");this._fixIEMouseUp();c.activeDrag&&c._end()};e._fixDragStart=function(b){b.preventDefault()};e._ieSelectFix=function(){return false};e._ieSelectBack=null;e._fixIEMouseDown=function(){if(a.ua.ie){this._ieSelectBack=a.Config.doc.body.onselectstart;a.Config.doc.body.onselectstart=this._ieSelectFix}};
e._fixIEMouseUp=function(){if(a.ua.ie)a.Config.doc.body.onselectstart=this._ieSelectBack};e._handleMouseDownEvent=function(b){this.fire("drag:mouseDown",b)};e.validClick=function(b){var g=false,h=false,i=b.target,j=null,k=null,l=/^\./;set=false;if(this._handles)a.each(this._handles,function(o,m){if(o instanceof a.Element){if(!g)if(o.contains(i)){g=true;return false}}else if(a.isString(m)){m=m.replace(/^#/,"");j=a.q((l.test(m)?"":"#")+m);j=j[0];if(!k&&(j===i||a.dom.contains(j,i))){g=true;k=j;return false}}});
else{h=this.node;if(h.contains(i))g=true}g&&this._invalids&&a.each(this._invalids,function(o,m){if(a.isString(m))if(i.tagName.toLowerCase()===m)return g=false});if(g)this.activeHandle=k?a.get(k):this.node;return g};e._setStartPosition=function(b){this.startXY=b;b=this.node.getXY();this.nodeXY=this.lastXY=this.realXY=[b.x,b.y];this.deltaXY=this.offsetNode?[this.startXY[0]-this.nodeXY[0],this.startXY[1]-this.nodeXY[1]]:[0,0]};e._defMouseDownFn=function(b){this._dragThreshMet=false;this._ev_md=b;if(this.primaryButtonOnly&&
b.which>1)return false;if(this.validClick(b)){this._fixIEMouseDown(b);this.haltDown?b.halt():b.preventDefault();this._setStartPosition([b.pageX,b.pageY]);c.activeDrag=this}this.fire("drag:afterMouseDown",b)};e.removeHandle=function(b){var g=b;if(b instanceof a.Element)g=b.key;if(this._handles[g]){delete this._handles[g];this.fire("drag:removeHandle",{handle:b})}return this};e.addHandle=function(b){if(!this._handles)this._handles={};var g=b;if(b instanceof a.Element)g=b.key;this._handles[g]=b;this.fire("drag:addHandle",
{handle:b});return this};e.removeInvalid=function(b){if(this._invalids[b]){this._invalids[b]=null;delete this._invalids[b];this.fire("drag:removeInvalid",{handle:b})}return this};e.addInvalid=function(b){if(a.isString(b)){this._invalids[b]=true;this.fire("drag:addInvalid",{handle:b})}return this};e.setValue_=d.setter(function(b,g){if(a.isFunction(this[b]))this[b](g);else if(a.isFunction(this["set"+a.string.capitalFirst(b)]))this["set"+a.string.capitalFirst(b)](g);else this[b]=g});e.initializer=function(b){this.setValue_(b);
this.node=a.get(b.node);this.dragNode=b.handle?a.get(b.handle):this.node;this.node.dd=this;this.actXY=[];this._invalids=a.mixin({},this._invalidsDefault,true);this._createEvents();this._prep();this.setGroups(this.groups);this.constrainCfg&&this.constrain(this.constrainCfg);this.proxyCfg&&this.proxy(this.proxyCfg)};e._prep=function(){this._dragThreshMet=false;var b=this.node;b.addClass(c.CSS_PREFIX+"-draggable");b.on("mousedown",d.bind(this._handleMouseDownEvent,this));b.on("mouseup",d.bind(this._handleMouseUp,
this));b.on("dragstart",d.bind(this._fixDragStart,this))};e._unprep=function(){var b=this.node;b.removeClass(c.CSS_PREFIX+"-draggable");b.off("mouseup");b.off("dragstart");b.off("mousedown");this.mouseXY=[];this.deltaXY=[0,0];this.startXY=[];this.nodeXY=[];this.lastXY=[];this.actXY=[];this.realXY=[]};e.start=function(){if(!this.lock&&!this.dragging){var b=this.node,g,h;this._startTime=(new Date).getTime();c._start();b.addClass(c.CSS_PREFIX+"-dragging");this.fire("drag:start",{pageX:this.nodeXY[0],
pageY:this.nodeXY[1],startTime:this._startTime});b=this.dragNode;h=this.nodeXY;g=b.tag.offsetWidth;b=b.tag.offsetHeight;this.startCentered&&this._setStartPosition([h[0]+g/2,h[1]+b/2]);this.region={"0":h[0],"1":h[1],area:0,top:h[1],right:h[0]+g,bottom:h[1]+b,left:h[0]};this.dragging=true}return this};e.end=function(){this._endTime=(new Date).getTime();this._dragThreshMet=false;!this.lock&&this.dragging&&this.fire("drag:end",{pageX:this.lastXY[0],pageY:this.lastXY[1],startTime:this._startTime,endTime:this._endTime});
this.node.removeClass(c.CSS_PREFIX+"-dragging");this.dragging=false;this.deltaXY=[0,0];return this};e._defEndFn=function(){this._fixIEMouseUp();this._ev_md=null};e.prevEnd=function(){this._fixIEMouseUp();this.dragNode.setXY({x:this.nodeXY[0],y:this.nodeXY[1]});this.region=this._ev_md=null};e._align=function(b){this.fire("drag:align",{pageX:b[0],pageY:b[1]})};e._defAlignFn=function(b){this.actXY=[b.pageX-this.deltaXY[0],b.pageY-this.deltaXY[1]]};e._alignNode=function(b,g){this._align(b);g||this._moveNode()};
e._moveNode=function(b){var g=[],h=[],i=this.nodeXY,j=this.actXY;g[0]=j[0]-this.lastXY[0];g[1]=j[1]-this.lastXY[1];h[0]=j[0]-this.nodeXY[0];h[1]=j[1]-this.nodeXY[1];this.region={"0":j[0],"1":j[1],area:0,top:j[1],right:j[0]+this.dragNode.tag.offsetWidth,bottom:j[1]+this.dragNode.tag.offsetHeight,left:j[0]};this.fire("drag:drag",{pageX:j[0],pageY:j[1],scroll:b,info:{start:i,xy:j,delta:g,offset:h}});this.lastXY=j};e._defDragFn=function(b){if(this.move){if(b.scroll&&b.scroll.node){b.scroll.node.scrollTo("left",
b.scroll.top);b.scroll.node.scrollTo("top",b.scroll.left)}this.dragNode.setXY({x:b.pageX,y:b.pageY});this.realXY=[b.pageX,b.pageY]}};e._move=function(b){if(this.lock)return false;else{this.mouseXY=[b.pageX,b.pageY];if(this._dragThreshMet)this._alignNode([b.pageX,b.pageY]);else{var g=Math.abs(this.startXY[1]-b.pageY);if(Math.abs(this.startXY[0]-b.pageX)>this.clickPixelThresh||g>this.clickPixelThresh){this._dragThreshMet=true;this.start();this._alignNode([b.pageX,b.pageY])}}}};e.stopDrag=function(){this.dragging&&
c._end();return this};e.constrain=function(b){if(a.Plugin&&a.Plugin.DDConstrained&&!this._constrain)this._constrain=new a.Plugin.DDConstrained(this,b);return this};e.proxy=function(b){if(a.Plugin&&a.Plugin.DDProxy&&!this._proxy)this._proxy=new a.Plugin.DDProxy(this,b);return this};e.dispose=function(){this._unprep();if(this._constrain){this._constrain.dispose();delete this._constrain}if(this._proxy){this._proxy.dispose();delete this._proxy}this.dragTarget&&delete this.dragTarget;c._unregDrag(this)};
a.namespace("dd");a.dd.Drag=f});
MT.add("dd-constrain",function(a){function f(b,g){a.events.EventTarget.call(this);g=g||{};this.host=b;this.initializer(g)}var e=a.dd.DDM,d,c=a.func;a.inherits(f,a.events.EventTarget);d=f.prototype;d.stickX=false;d.stickY=false;d.tickX=false;d.tickY=false;d.tickXArray=false;d.tickYArray=false;d.gutter=0;d.setGutter=function(b){this.gutter=a.style.cssSizestoObject(b);return this};d.constrain="view";d.setConstrain=function(b){a.get(b);return this};d.constrain2region=function(b){this.constrain=b;return this};
d.constrain2node=function(b){this.constrain=a.get(b);return this};d.constrain2view=function(){this.constrain="view"};d.cacheRegion=true;d._lastTickXFired=null;d._lastTickYFired=null;d.setValue_=c.setter(function(b,g){if(a.isFunction(this[b]))this[b](g);else if(a.isFunction(this["set"+a.string.capitalFirst(b)]))this["set"+a.string.capitalFirst(b)](g);else this[b]=g});d.initializer=function(b){this._createEvents();this.setValue_(b);this._eventHandles={"drag:end":this.host.on("drag:end",c.bind(this._handleEnd,
this)),"drag:start":this.host.on("drag:start",c.bind(this._handleStart,this)),"drag:align":this.host.on("drag:align",c.bind(this.align,this)),"drag:drag":this.host.on("drag:drag",c.bind(this.drag,this))}};d.dispose=function(){a.each(this._eventHandles,function(b,g){b.off(g)});this._eventHandles={}};d._createEvents=function(){};d._handleEnd=function(){this._lastTickXFired=this._lastTickYFired=null};d._handleStart=function(){this.resetCache()};d._regionCache=null;d._cacheRegion=function(){this._regionCache=
this.constrain.getBox()};d.resetCache=function(){this._regionCache=null};d._getConstraint=function(){var b=this.constrain,g=this.gutter,h;if(b)if(b instanceof a.Element){if(!this._regionCache){this._eventHandles.resize=a.on(a.Config.win,"resize",c.bind(this._cacheRegion,this));this._cacheRegion()}h=a.object.clone(this._regionCache);this.cacheRegion||this.resetCache()}else if(a.isObject(b))h=a.object.clone(b);if(!b||!h)b="view";if(b==="view")h=this.host.dragNode.getViewPortRegion();a.each(g,function(i,
j){if(j=="right"||j=="bottom")h[j]-=i;else h[j]+=i});return h};d.getRegion=function(b){var g={},h=null,i=null;i=this.host.dragNode;g=this._getConstraint();if(b){h=i.tag.offsetHeight;i=i.tag.offsetWidth;g.right-=i;g.bottom-=h}return g};d._checkRegion=function(b){var g=this.getRegion(),h=this.host.dragNode,i=h.tag.offsetHeight;h=h.tag.offsetWidth;if(b[1]>g.bottom-i)b[1]=g.bottom-i;if(g.top>b[1])b[1]=g.top;if(b[0]>g.right-h)b[0]=g.right-h;if(g.left>b[0])b[0]=g.left;return b};d.inRegion=function(b){b=
b||this.host.dragNode.getXY();var g=this._checkRegion([b[0],b[1]]),h=false;if(b[0]===g[0]&&b[1]===g[1])h=true;return h};d.align=function(){var b=this.host,g=[b.actXY[0],b.actXY[1]],h=this.getRegion(true);if(this.stickX)g[1]=b.startXY[1]-b.deltaXY[1];if(this.stickY)g[0]=b.startXY[0]-b.deltaXY[0];if(h)g=this._checkRegion(g);g=this._checkTicks(g,h);b.actXY=g};d.drag=function(){var b=this.host,g=this.tickY;b=[b.actXY[0],b.actXY[1]];if((a.isNumber(this.tickX)||this.tickXArray)&&this._lastTickXFired!==
b[0]){this._tickAlignX();this._lastTickXFired=b[0]}if((a.isNumber(g)||this.tickYArray)&&this._lastTickYFired!==b[1]){this._tickAlignY();this._lastTickYFired=b[1]}};d._checkTicks=function(b,g){var h=this.host,i=h.startXY[0]-h.deltaXY[0];h=h.startXY[1]-h.deltaXY[1];var j=this.tickX,k=this.tickY;if(j&&!this.tickXArray)b[0]=e._calcTicks(b[0],i,j,g.left,g.right);if(k&&!this.tickYArray)b[1]=e._calcTicks(b[1],h,k,g.top,g.botom);if(this.tickXArray)b[0]=e._calcTickArray(b[0],this.tickXArray,g.left,g.right);
if(this.tickYArray)b[1]=e._calcTickArray(b[1],this.tickYArray,g.top,g.botom);return b};d._tickAlignX=function(){this.fire("drag:tickAlignX")};d._tickAlignY=function(){this.fire("drag:tickAlignY")};a.namespace("Plugin");a.Plugin.DDConstrained=f;a.mixin(e,{_calcTicks:function(b,g,h,i,j){var k=(b-g)/h,l=Math.floor(k),o=Math.ceil(k);if(l!==0||o!==0)if(k>=l&&k<=o){b=g+h*l;if(i&&j){if(b<i)b=g+h*(l+1);if(b>j)b=g+h*(l-1)}}return b},_calcTickArray:function(b,g,h,i){var j=0,k=g.length,l=0,o;if(!g||g.length===
0)return b;else if(g[0]>=b)return g[0];else{for(j=0;j<k;j++){l=j+1;if(g[l]&&g[l]>=b){o=b-g[j];b=g[l]-b;l=b>o?g[j]:g[l];if(h&&i)if(l>i)l=g[j]?g[j]:g[k-1];return l}}return g[g.length-1]}}})});
MT.add("dd-proxy",function(a){function f(b,g){this.host=b;this.initializer(g)}var e=a.dd.DDM,d,c=a.func;d=f.prototype;d.moveOnEnd=true;d.hideOnEnd=true;d.resizeFrame=true;d.positionProxy=true;d.borderStyle="1px solid #808080";d.cloneNode=false;d._hands=null;d._init=function(){if(e._proxy){if(!this._hands)this._hands={};var b,g,h=this.host;if(h.dragNode.key===h.node.key)if(e._proxy)h.dragNode=e._proxy;a.each(this._hands,function(i,j){i.off(j)});b=e.on("ddm:start",c.bind(function(){e.activeDrag===h&&
e._setFrame(h)},this));g=e.on("ddm:end",c.bind(function(){if(h.dragging){if(this.moveOnEnd){var i=h.lastXY;h.node.setXY({x:i[0],y:i[1]})}this.hideOnEnd&&h.dragNode.setStyle("display:none");if(this.cloneNode){h.dragNode.remove();h.dragNode=e._proxy}}},this));this._hands={"ddm:start":b,"ddm:end":g}}else{e._createFrame();a.ready(c.bind(this._init,this))}};d.setValue_=c.setter(function(b,g){if(a.isFunction(this[b]))this[b](g);else if(a.isFunction(this["set"+a.string.capitalFirst(b)]))this["set"+a.string.capitalFirst(b)](g);
else this[b]=g});d.initializer=function(b){this.setValue_(b);this._init()};d.dispose=function(){var b=this.host;a.each(this._hands,function(g,h){g.off(h)});b.dragNode=b.node};d.clone=function(){var b=this.host,g=b.node,h=g.tag.cloneNode(true);h.setAttribute("id",a.guid());h.style.position="absolute";g.tag.parentNode.appendChild(h);h=a.get(h);return b.dragNode=h};a.namespace("Plugin");a.Plugin.DDProxy=f;a.mixin(e,{_createFrame:function(){if(!e._proxy){e._proxy=true;var b,g=a.q("body");b=a.q("<div></div>").css({position:"absolute",
display:"none",zIndex:"999",top:"-999px",left:"-999px"});g.prepend(b);b=b[0];b.id=a.guid();b=a.get(b);b.addClass(e.CSS_PREFIX+"-proxy");e._proxy=b}},_setFrame:function(b){var g=b.node,h=b.dragNode,i,j="auto";if(i=e.activeDrag.activeHandle)j=i.getStyle("cursor");if(j==="auto")j=e.dragCursor;h.setStyle({visibility:"hidden",display:"block",cursor:j,border:b._proxy.borderStyle});if(b._proxy.cloneNode)h=b._proxy.clone();b._proxy.resizeFrame&&h.setStyle({height:g.tag.offsetHeight+"px",width:g.tag.offsetWidth+
"px"});if(b._proxy.positionProxy){b=b.nodeXY;h.setXY({x:b[0],y:b[1]})}h.setStyle("visibility:visible")}})});
MT.add("dd-drop",function(a){function f(b){a.events.EventTarget.call(this);b=b||{};a.ready(c.bind(function(){c.delay(this._createShim,100,this)},this));e._regTarget(this);this.initializer(b)}var e=a.dd.DDM,d,c=a.func;a.inherits(f,a.events.EventTarget);d=f.prototype;d.groups=["default"];d.getGroups=function(){if(!this._groups)this._groups={};var b=[];a.each(this._groups,function(g,h){b[b.length]=h});return b};d.setGroups=function(b){this._groups={};a.each(b,function(g){this._groups[g]=true},this);
return b};d.padding="0";d.setPadding=function(b){this.padding=a.style.cssSizestoObject(b);return this};d.lock=false;d.setLock=function(b){this.node[b?"addClass":"removeClass"](e.CSS_PREFIX+"-drop-locked");this.lock=b||false;return this};d.bubbles=function(b){this.addTarget(b);return this};d.useShim=true;d.setUseShim=function(b){a.dd.DDM._noShim=!b;return this};d._bubbleTargets=a.dd.DDM;d.addToGroup=function(b){this._groups[b]=true;return this};d.removeFromGroup=function(b){delete this._groups[b];
return this};d._createEvents=function(){};d._valid=null;d._groups=null;d.shim=null;d.region=null;d.overTarget=null;d.inGroup=function(b){var g=this._valid=false;a.each(b,function(h){if(this._groups[h])this._valid=g=true},this);return g};d.setValue_=c.setter(function(b,g){if(a.isFunction(this[b]))this[b](g);else if(a.isFunction(this["set"+a.string.capitalFirst(b)]))this["set"+a.string.capitalFirst(b)](g);else this[b]=g});d.initializer=function(b){this.setValue_(b);c.delay(this._createEvents,100,this);
this.node=a.get(b.node);this.node.drop=this;b=this.node;if(!b.tag.id)b.tag.id=a.guid();b.addClass(e.CSS_PREFIX+"-drop");this.setPadding(this.padding);this.setGroups(this.groups)};d.dispose=function(){e._unregTarget(this);if(this.shim&&this.shim!==this.node){a.off(this.shim);this.shim.remove();this.shim=null}this.node.removeClass(e.CSS_PREFIX+"-drop");a.off(this)};d._deactivateShim=function(){if(!this.shim)return false;this.node.removeClass(e.CSS_PREFIX+"-drop-active-valid");this.node.removeClass(e.CSS_PREFIX+
"-drop-active-invalid");this.node.removeClass(e.CSS_PREFIX+"-drop-over");this.useShim&&this.shim.setStyle({top:"-999px",left:"-999px",zIndex:"1"});this.overTarget=false};d._activateShim=function(){if(!e.activeDrag)return false;if(this.node===e.activeDrag.node)return false;if(this.lock)return false;var b=this.node;if(this.inGroup(e.activeDrag.groups)){b.removeClass(e.CSS_PREFIX+"-drop-active-invalid");b.addClass(e.CSS_PREFIX+"-drop-active-valid");e._addValid(this);this.overTarget=false;if(!this.useShim)this.shim=
this.node;this.sizeShim()}else{e._removeValid(this);b.removeClass(e.CSS_PREFIX+"-drop-active-valid");b.addClass(e.CSS_PREFIX+"-drop-active-invalid")}};d.sizeShim=function(){if(!e.activeDrag)return false;if(this.node===e.activeDrag.node)return false;if(this.lock)return false;if(!this.shim){c.delay(this.sizeShim,100,this);return false}var b=this.node,g=b.tag.offsetHeight,h=b.tag.offsetWidth;b=b.getXY();b=[b.x,b.y];var i=this.padding,j,k;h=h+i.left+i.right;g=g+i.top+i.bottom;b[0]-=i.left;b[1]-=i.top;
if(e.activeDrag.dragMode===e.INTERSECT){i=e.activeDrag;j=i.node.tag.offsetHeight;k=i.node.tag.offsetWidth;g+=j;h+=k;b[0]-=k-i.deltaXY[0];b[1]-=j-i.deltaXY[1]}this.useShim&&this.shim.setStyle({height:g+"px",width:h+"px",top:b[1]+"px",left:b[0]+"px"});this.region={"0":b[0],"1":b[1],area:0,top:b[1],right:b[0]+h,bottom:b[1]+g,left:b[0]}};d._createShim=function(){if(e._pg){if(!this.shim){var b=this.node;if(this.useShim){b=a.q('<div id="'+this.node.tag.id+'_shim"></div>');b.css({height:this.node.tag.offsetHeight+
"px",width:this.node.tag.offsetWidth+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"});e._pg.tag.appendChild(b[0]);b=a.get(b[0]);b.on("mouseover",c.bind(this._handleOverEvent,this));b.on("mouseout",c.bind(this._handleOutEvent,this))}this.shim=b}}else c.delay(this._createShim,10,this)};d._handleTargetOver=function(){if(e.isOverTarget(this)){this.node.addClass(e.CSS_PREFIX+"-drop-over");e.activeDrop=this;e.otherDrops[this]=this;
if(this.overTarget){e.activeDrag.fire("drag:over",{drop:this,drag:e.activeDrag});this.fire("drop:over",{drop:this,drag:e.activeDrag})}else if(e.activeDrag.dragging){this.overTarget=true;this.fire("drop:enter",{drop:this,drag:e.activeDrag});e.activeDrag.fire("drag:enter",{drop:this,drag:e.activeDrag});e.activeDrag.node.addClass(e.CSS_PREFIX+"-drag-over")}}else this._handleOut()};d._handleOverEvent=function(){this.shim.setStyle("zIndex:999");e._addActiveShim(this)};d._handleOutEvent=function(){this.shim.setStyle("zIndex:1");
e._removeActiveShim(this)};d._handleOut=function(b){if(!e.isOverTarget(this)||b)if(this.overTarget){this.overTarget=false;b||e._removeActiveShim(this);if(e.activeDrag){this.node.removeClass(e.CSS_PREFIX+"-drop-over");e.activeDrag.node.removeClass(e.CSS_PREFIX+"-drag-over");this.fire("drop:exit",{drop:this,drag:e.activeDrag});e.activeDrag.fire("drag:exit",{drop:this,drag:e.activeDrag});delete e.otherDrops[this]}}};a.namespace("dd");a.dd.Drop=f});
MT.add("dd-delegate",function(a){var f=function(g){g=g||{};this.initializer(g)},e=a.func,d=a.get(a.q("<div>Temp Node</div>")[0]),c,b=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/;c=f.prototype;c._bubbleTargets=a.dd.DDM;c.dd=null;c._shimState=null;c._handles=null;c._onNodeChange=function(g){this.dragNode=g.newVal};c._afterDragEnd=function(){a.dd.DDM._noShim=this._shimState;this.lastNode=this.dd.node;this.lastNode.removeClass(a.dd.DDM.CSS_PREFIX+"-dragging");this.dd._unprep()};c._afterDragEnd.priority=9;
c._delMouseDown=function(g){var h=g.currentTarget,i=this.dd,j=a.get(h),k=this.dragConfig,l=b.exec(this.nodes);if(l){l[1]=(l[1]||"").toLowerCase();l[3]=l[3]&&RegExp("(?:^|\\s)"+l[3]+"(?:\\s|$)")}var o=h.tagName.toLowerCase(),m=h.attributes||{};if((!l[1]||h.nodeName.toLowerCase()===l[1])&&(!l[2]||(m.id||{}).value===l[2])&&(!l[3]||l[3].test((m["class"]||{}).value))&&this.invalid.indexOf(o+",")==-1){this._shimState=a.dd.DDM._noShim;a.dd.DDM._noShim=true;this.currentNode=j;i.node=j;if(k&&k.dragNode)j=
k.dragNode;else if(i._proxy)j=a.dd.DDM._proxy;i.dragNode=j;i._prep();i.fire("drag:mouseDown",g)}};c._onMouseEnter=function(){this._shimState=a.dd.DDM._noShim;a.dd.DDM._noShim=true};c._onMouseLeave=function(){a.dd.DDM._noShim=this._shimState};c.setValue_=e.setter(function(g,h){if(a.isFunction(this[g]))this[g](h);else if(a.isFunction(this["set"+a.string.capitalFirst(g)]))this["set"+a.string.capitalFirst(g)](h);else this[g]=h});c.initializer=function(g){this._handles={};this.setValue_(g);g=this.dragConfig||
{};var h=a.getDom(this.container);g.node=d.tag.cloneNode(true);g.bubbleTargets=this;if(this.handles)g.handles=this.handles;this.dd=new a.dd.Drag(g);this.dd.on("drag:end",this._afterDragEnd,this);this.dd.on("dragNodeChange",e.bind(this._onNodeChange,this));this.dd.on("drag:mouseup",function(){this.dd._unprep()},this);this._handles.mousedown=a.on(h,"mousedown",this.nodes,e.bind(this._delMouseDown,this));this._handles.mouseenter=a.on(h,"mouseenter",e.bind(this._onMouseEnter,this));this._handles.mouseleave=
a.on(h,"mouseleave",e.bind(this._onMouseLeave,this));e.delay(this.syncTargets,50,this);a.dd.DDM.regDelegate(this)};c.syncTargets=function(){if(!(!a.dd.Drop||this.destroyed)){var g,h,i;if(this.target){g=a.q(this.container).find(this.nodes);h=this.dd.groups;if((i=this.dragConfig)&&"groups"in i)h=i.groups;a.each(g,function(j){this.createDrop(j,h)},this)}return this}};c.createDrop=function(g,h){var i={useShim:false,bubbleTargets:this};g=a.get(g);if(!g.drop){i.node=g;g.drop=new a.dd.Drop(i)}g.drop.setValue_("groups",
h);return g};c.dispose=function(){this.dd&&this.dd.dispose();if(a.dd.Drop){var g=a.q(this.container).find(this.nodes);a.each(g,function(h){h=a.get(h);h.drop&&h.drop.dispose()})}a.each(this._handles,function(h,i){h.off(i)})};c.container="body";c.nodes=".dd-draggable";c.invalid="input, select, button, a, textarea";c.lastNode=d;c.currentNode=d;c.dragNode=d;c.over=false;c.target=false;c.dragConfig=null;c.handles=null;a.mixin(a.dd.DDM,{_delegates:[],regDelegate:function(g){this._delegates.push(g)},getDelegate:function(g){var h=
null;g=a.get(g);a.each(this._delegates,function(i){if(g.tag===a.getDom(i.container))h=i},this);return h}});a.namespace("dd");a.dd.Delegate=f});
MT.add("mt-resize-resizer",function(a){function f(c){a.events.EventTarget.call(this);c=c||{};this.initializer(c)}var e,d=a.Config.doc;a.inherits(f,a.events.EventTarget);e=f.prototype;e.resizeCls=a.cssPrefix+"resize";e.handleCls=a.cssPrefix+"resize-handle";e.wrapCls=a.cssPrefix+"resize-wrap";e.proxyCls=a.cssPrefix+"resize-proxy";e.hiddenCls=a.cssPrefix+"resize-hidden-handles";e.node=null;e.activeHandle=null;e.activeHandleNode=null;e.dynamic=true;e.handles=["s","e","se"];e.setHandles=function(c){var b=
[],g=this.ALL_HANDLES,h;if(a.isArray(c))b=c;else if(a.isString(c))if(c.toLowerCase()=="all")b=g;else a.each(c.split(","),function(i){h=a.string.trim(i);a.array.indexOf(h,g)>-1&&b.push(h)});this.handles=b;return this};e.ALL_HANDLES=["n","s","e","w","se","sw","ne","nw"];e.wrapElemRegex=/^canvas|textarea|input|select|button|img|iframe|table|embed$/i;e.width=null;e.height=null;e.minHeight=20;e.minWidth=20;e.maxHeight=1E4;e.maxWidth=1E3;e.autoHide=false;e.preserveRatio=false;e.transparent=false;e.heightInc=
0;e.widthInc=0;e.setValue_=a.func.setter(function(c,b){if(a.isFunction(this[c]))this[c](b);else if(a.isFunction(this["set"+a.string.capitalFirst(c)]))this["set"+a.string.capitalFirst(c)](b);else this[c]=b});e.initializer=function(c){var b,g,h=0,i="",j,k=[];this._eventHandles={};this.setValue_(c);c=this.node=a.get(c.node);if(this.wrapElemRegex.test(c.tag.tagName)){this.orgNode=c;this.node=a.get(this.node.wrap('<div class="'+this.wrapCls+'"></div>'));this.node.setPositioning(this.orgNode.getPositioning());
this.orgNode.clearPositioning();box=this.orgNode.getBox();this.node.setBox(box)}c=this.handles;b=c.length;g=this.ALL_HANDLES;if(a.ua.ie6)i=' style="height:'+this.node.innerHeight()+'px"';for(;h<b;h++)if(c[h]&&a.array.indexOf(c[h],g)>-1){pos=c[h];j=pos==="e"||pos==="w"?i:"";k.push('<div id="h'+this.node.key+"-"+pos+'-handle" class="'+this.handleCls+" "+this.handleCls+"-"+pos+" "+a.cssPrefix+'unselectable"'+j+'><div class="'+this.handleCls+"-inner "+this.handleCls+"-inner-"+pos+'">&nbsp;</div></div>')}this.node.append(k.join(""));
for(h=0;h<b;h++)if(c[h]&&a.array.indexOf(c[h],g)>-1){pos=c[h]+"_handle";this[pos]=a.get("#h"+this.node.key+"-"+c[h]+"-handle");this[pos].region=c[h];this[pos].setUnselectable(true);this.transparent&&this[pos].setOpacity(0)}if(a.isNumber(this.width))this.width=a.number.clamp(this.width,this.minWidth,this.maxWidth);if(a.isNumber(this.height))this.height=a.number.clamp(this.height,this.minHeight,this.maxHeight);this._createEvents();this._bindDD();if(this.width!==null||this.height!==null){this.orgNode&&
this.orgNode.setSize(this.width,this.height);this.node.setSize(this.width,this.height);this.fire("resize:resize",{reizer:this,width:this.width,height:this.height})}this.node.addClass(this.resizeCls);this._setHideHandlesUI(this.autoHide)};e._createEvents=function(){this.on("resize:start",this._defResizeStartFn,this);this.on("resize:resize",this._defResizeFn,this);this.on("resize:align",this._defResizeAlignFn,this);this.on("resize:end",this._defResizeEndFn,this);this.on("resize:mouseUp",this._defMouseUpFn,
this)};e._defResizeStartFn=function(c){var b=this.node;this.resizing=true;this.orgInfo=this._getInfo(b,c);this.info=this._getInfo(b,c)};e._defResizeFn=function(c){this.fire("resize:align",{dragEvent:c.dragEvent,info:this.info});this._syncUI()};e._defResizeAlignFn=function(c){var b,g=this.orgInfo,h=this.activeHandle;this.lastInfo=this.info;b=this.info=this._getInfo(this.node,c);b.ajustX=false;b.ajustY=false;c=b.actXY[0]-g.actXY[0];g=b.actXY[1]-g.actXY[1];if(h&&a.Resizer.RULES[h]){a.Resizer.RULES[h](this,
c,g);this._checkSize(h)}};e._checkSize=function(c){var b=this.info,g=this.orgInfo,h,i,j=a.number,k=b.offsetWidth,l=b.offsetHeight;h=j.snap(k,this.widthInc);i=j.snap(l,this.heightInc);if(h!=k||i!=l){switch(c){case "ne":b.top-=i-l;break;case "n":b.top-=i-l;break;case "sw":b.left-=h-k;break;case "w":b.left-=h-k;break;case "nw":b.left-=h-k;b.top-=i-k}b.offsetWidth=h;b.offsetHeight=i}k=b.offsetWidth;l=b.offsetHeight;if(k<this.minWidth||k>this.maxWidth){b.offsetWidth=j.clamp(k,this.minWidth,this.maxWidth);
if(b.ajustX)b.left=g.left+(g.offsetWidth-b.offsetWidth)}else this.lastInfo.left=b.left;if(l<this.minHeight||l>this.maxHeight){b.offsetHeight=j.clamp(l,this.minHeight,this.maxHeight);if(b.ajustY)b.top=g.top+(g.offsetHeight-b.offsetHeight)}else this.lastInfo.top=b.top;if(this.preserveRatio){k=b.axis;j=g.offsetWidth/g.offsetHeight;h=Math.min(Math.max(this.minHeight,b.offsetWidth/j),this.maxHeight);i=Math.min(Math.max(this.minWidth,b.offsetHeight*j),this.maxWidth);if(k==1)b.offsetHeight=h;else if(k==
2)b.offsetWidth=i;else{k=this.delegate.dd;if(Math.abs(b.oppc[0]-k.mouseXY[0])/Math.abs(b.oppc[1]-k.mouseXY[1])>j)b.offsetHeight=h;else b.offsetWidth=i;if(c=="ne")b.top=g.top-(b.offsetHeight-g.offsetHeight);else if(c=="nw"){b.top=g.top-(b.offsetHeight-g.offsetHeight);b.left=g.left-(b.offsetWidth-g.offsetWidth)}else if(c=="sw")b.left=g.left-(b.offsetWidth-g.offsetWidth)}}};e._defResizeEndFn=function(c){c.dragEvent.currentTarget.actXY=[];this.proxy&&this.proxy.hide();this._syncUI(true);this.activeHandleNode=
this.activeHandle=null};e._defMouseUpFn=function(){this.resizing=false};e._bindDD=function(){var c,b=a.func,g=this.node,h="."+this.handleCls;this.delegate=new a.dd.Delegate({bubbleTargets:this,container:g,dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:true,move:false},nodes:"."+a.cssPrefix+"resize-handle",target:false});c=this.delegate.dd;this._eventHandles["drag:drag"]=c.on("drag:drag",this._handleResizeEvent,this);this._eventHandles["drag:dropmiss"]=c.on("drag:dropmiss",this._handleMouseUpEvent,
this);this._eventHandles["drag:end"]=c.on("drag:end",this._handleResizeEndEvent,this);this._eventHandles["drag:start"]=c.on("drag:start",this._handleResizeStartEvent,this);this._eventHandles.mouseenter=g.on("mouseenter",h,b.bind(this._onHandleMouseEnter,this));this._eventHandles.mouseleave=g.on("mouseleave",h,b.bind(this._onHandleMouseLeave,this));this._eventHandles.mouseenter=g.on("mouseenter",b.bind(this._onWrapperMouseEnter,this));this._eventHandles.mouseleave=g.on("mouseleave",b.bind(this._onWrapperMouseLeave,
this))};e._onWrapperMouseEnter=function(){this.autoHide&&this._setHideHandlesUI(false)};e._onWrapperMouseLeave=function(){this.autoHide&&this._setHideHandlesUI(true)};e._setHideHandlesUI=function(c){var b=this.node;this.resizing||(c?b.addClass(this.hiddenCls):b.removeClass(this.hiddenCls))};e._onHandleMouseEnter=function(c){this._setHandleFromNode(a.get(c.currentTarget))};e._onHandleMouseLeave=function(){};e.getResizeTarget=function(c){return c?this.node:this.getDynamicTarget()};e._syncUI=function(c){c=
this.getResizeTarget(c);var b=this.activeHandle,g=this.info,h=this.activeHandleNode.getStyle("cursor");xyHandles=["n","w","nw","sw","ne"];if(this.proxy){this.proxy.setStyle("cursor:"+h);this.delegate.dd.dragCursor=h}c.setSize(g.offsetWidth,g.offsetHeight);a.array.indexOf(b,xyHandles)>-1&&c.setXY({left:g.left,top:g.top});if(this.orgNode){this.orgNode.setSize(g.offsetWidth,g.offsetHeight);a.array.indexOf(b,xyHandles)>-1&&this.orgNode.setXY({left:g.left,top:g.top})}if(a.ua.webkit)(this.orgNode||c).setStyle("resize:none")};
e._handleMouseUpEvent=function(c){this.fire("resize:mouseUp",{dragEvent:c})};e._handleResizeEvent=function(c){this.fire("resize:resize",{dragEvent:c})};e._handleResizeEndEvent=function(c){this.fire("resize:end",{dragEvent:c,info:this.info})};e._handleResizeStartEvent=function(c){this._setHandleFromNode(a.get(c.currentTarget.node));this.fire("resize:start",{dragEvent:c,info:this.info})};e._setHandleFromNode=function(c){var b=c.region;if(!this.resizing){this.activeHandle=b;this.activeHandleNode=c}};
f.RULES={s:function(c,b,g){b=c.info;c=c.orgInfo;b.axis=2;b.offsetHeight=c.offsetHeight+g},w:function(c,b){var g=c.info,h=c.orgInfo;g.ajustX=true;g.axis=1;g.left=h.left+b;g.offsetWidth=h.offsetWidth-b},e:function(c,b){var g=c.info,h=c.orgInfo;g.axis=1;g.offsetWidth=h.offsetWidth+b},n:function(c,b,g){b=c.info;c=c.orgInfo;b.ajustY=true;b.axis=2;b.top=c.top+g;b.offsetHeight=c.offsetHeight-g},ne:function(c){c.info.ajustY=true;c.info.axis=3;var b=c.orgInfo;c.oppc=[b.left,b.top+b.offsetHeight];this.n.apply(this,
arguments);this.e.apply(this,arguments)},sw:function(c){c.info.ajustX=true;c.info.axis=3;var b=c.orgInfo;c.oppc=[b.left+b.offsetWidth,b.top];this.s.apply(this,arguments);this.w.apply(this,arguments)},se:function(c){c.info.axis=3;var b=c.orgInfo;c.oppc=[b.left,b.top];this.s.apply(this,arguments);this.e.apply(this,arguments)},nw:function(c){c.info.ajustX=true;c.info.ajustY=true;c.info.axis=3;var b=c.orgInfo;c.oppc=[b.left+b.offsetWidth,b.top+b.offsetHeight];this.n.apply(this,arguments);this.w.apply(this,
arguments)}};e._getInfo=function(c,b){var g=[0,0],h=b.dragEvent.currentTarget,i=c.getXY(),j=i.x;i=i.y;var k=c.height(),l=c.width();if(b)g=h.actXY.length?h.actXY:h.lastXY;return{actXY:g,bottom:i+k,left:j,offsetHeight:k,offsetWidth:l,right:j+l,top:i}};e.getDynamicTarget=function(){var c=this.node;if(this.dynamic)return c;else if(!this.proxy)this.proxy=this.createProxy(c);this.proxy.show();return this.proxy};e.createProxy=function(c){var b,g=this.proxyCls;if(!c.isComponent){b=d.body;b=c.createProxy({"class":g,
id:"rzp"+c.tag.key+"-rzproxy"},b)}b.setXY({left:this.info.left,top:this.info.top});return b};e.dispose=function(){var c=0,b=this.handles,g=b.length,h=this.node;a.each(this._eventHandles,function(i,j){i.off(j)});for(delete this._eventHandles;c<g;c++)this[b[c]+"_handle"].remove();this.delegate.dispose();if(this.orgNode){h.orgNode.setPositioning(h.getPositioning());this.orgNode.unwrap()}h.removeClass(this.resizeCls);this.proxy&&this.proxy.remove()};a.Resizer=f});
MT.add("mt-layer",function(a){var f=1E3,e=a.Config.doc;a.mtClass("MT.Layer",{$extend:a.Element,constructor:function(d){d=d||{};var c=d.renderTo;c=c?a.getDom(c):e.body;var b,g=d.hideMode;if(d.node)this.tag=a.getDom(d.node);if(this.tag){this.addClass(a.cssPrefix+"layer");this.tag.parentNode||c.appendChild(this.tag)}else{b=d.dh?d.dh.tag:"<div>";this.tag=a.q(b,d.dh||{"class":a.cssPrefix+"layer"}).appendTo(c);this.tag=this.tag.get(0)}this.id=this.tag.id=d.id||a.cssPrefix+"layer"+ ++f;this.key=a.getUid(this.tag);
a.Element.call(this,this.key,this.tag);d.cls&&this.addClass(d.cls);this.constrain=d.constrain!==false;if(g)this.setDisplayMode(a.Element[g.toUpperCase()]);else d.useDisplay?this.setDisplayMode(a.Element.DISPLAY):this.setDisplayMode(a.Element.VISIBILITY);this.useShim=d.shim!==false&&a.ua.ie6;d.hidden===true?this.hide():this.show()},statics:{shims:[]},isLayer:true,getZIndex:function(){return parseInt((this.getShim()||this).getStyle("z-index"),10)},getShim:function(){var d,c;if(!this.useShim)return null;
if(!this.shim){d=a.Layer.shims.shift();if(!d){d=this.createShim();this.setDisplayMode(a.Element.DISPLAY);this.getCache().data.originalDisplay="block";d.hide()}c=this.tag.parentNode;d.tag.parentNode!=c&&c.insertBefore(d.tag,this.tag);this.shim=d}return this.shim},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);a.Layer.shims.push(this.shim);delete this.shim}},sync:function(){var d,c,b,g,h,i;h=this.tag;if(!this.updating&&this.isVisible()&&this.useShim){d=this.getShim();c=this.getLeft();
b=this.getTop();g=h.offsetWidth;h=h.offsetHeight;if(d){i=d.getStyle("z-index");i>this.zindex&&this.shim.setStyle("z-index:"+this.zindex-2);d.show();d.setSize(g,h);d.setLeftTop(c,b)}}return this},remove:function(){this.hideUnders_();this.callParent()},hideUnders_:function(){this.hideShim()},beginUpdate_:function(){this.updating=true},endUpdate_:function(){this.updating=false;this.sync(true)},constrainXY:function(){if(this.constrain){var d=a.dom.getViewportWidth(),c=a.dom.getViewportHeight(),b=a.get(e).getScroll(),
g=this.getXY(),h=g.x;g=g.y;var i=this.tag.offsetWidth,j=this.tag.offsetHeight,k=false;if(h+i>d+b.left){h=d-i-0;k=true}if(g+j>c+b.top){g=c-j-0;k=true}if(h<b.left){h=b.left;k=true}if(g<b.top){g=b.top;k=true}if(k){a.Layer.superClass_.setXY.call(this,{x:h,y:g});this.sync()}}return this},setVisible_:function(d,c){var b=this,g,h=null;g=function(){d&&b.sync(true);if(c)h=a.isPlainObject(c)?c.onEnd:c;h&&a.isFunction(h)&&h()};if(c&&a.isPlainObject(c))c.onEnd=g;d||b.hideUnders_(true);b.callParent([d,c]);c||
g();return b},beforeAction_:function(){},setLeft:function(){this.callParent(arguments);return this.sync()},setTop:function(){this.callParent(arguments);return this.sync()},setLeftTop:function(){this.callParent(arguments);return this.sync()},setXY:function(d,c){callback=this.wrapCB_(c);if(c&&a.isPlainObject(c))c.onEnd=callback;this.fixDisplay();this.beforeAction_();this.callParent([d,c]);c||callback();return this},wrapCB_:function(d){var c=this;if(d&&a.isPlainObject(d))d=d.onEnd;return function(){c.constrainXY();
c.sync(false);d&&a.isFunction(d)&&d()}},setSize:function(d,c,b){var g;g=this.wrapCB_(b);if(b&&a.isPlainObject(b))b.onEnd=g;this.beforeAction_();this.callParent([d,c,b]);b||g();return this},setWidth:function(d,c){var b;b=this.wrapCB_(c);if(c&&a.isPlainObject(c))c.onEnd=b;this.beforeAction_();this.callParent([d,c]);c||b();return this},setHeight:function(d,c){var b;b=this.wrapCB_(c);if(c&&a.isPlainObject(c))c.onEnd=b;this.beforeAction_();this.callParent([d,c]);c||b();return this},setZIndex:function(d){this.zindex=
d;this.getShim()&&this.shim.setStyle("z-index:"+d++);return this.setStyle("z-index:"+d)}})});
MT.mtClass("MT.util.ElementCt",{childEls:[],constructor:function(){var a;if(this.hasOwnProperty("childEls")){a=this.childEls;delete this.childEls;this.addChildEls.apply(this,a)}},getChildEls_:function(){var a;if(this.hasOwnProperty("childEls")||this.childEls)return this.childEls;a=this.self;if(a.$childEls)return a.$childEls;if((a=a.prototype)&&a.hasOwnProperty("childEls"))return a.childEls;return[]},destroy:function(){var a=this.getChildEls_(),f,e,d;for(d=a.length-1;d>=0;d--){e=a[d];if(typeof e!=
"string")e=e.name;if(f=this.childCt[e]){this.childCt[e]=null;f.remove()}}},addChildEls:function(){var a=arguments;if(this.hasOwnProperty("childEls"))this.childEls.push.apply(this.childEls,a);else this.childEls=this.getChildEls_().concat(Array.prototype.slice.call(a));this.childEls=MT.array.unique(this.childEls)},applyChildEls:function(a,f){var e=this.getChildEls_(),d,c,b,g;if(!this.childCt)this.childCt={};d=(f||this.id)+"-";for(b=e.length-1;b>=0;b--){c=e[b];if(typeof c==="string")g=MT.getDom(d+c);
else{g=MT.getDom(c.id||d+c.itemId||c.selector);c=c.name}this.childCt[c]=MT.get(g)}},removeChildEls:function(a){var f=this.getChildEls_(),e=this.childEls=[],d,c,b;c=0;for(d=f.length;c<d;++c){b=f[c];if(a(b)){b=MT.isString(b)?b:b.name;this.childCt[b]=null;delete this.childCt[b]}else e.push(b)}}});
MT.mtClass("MT.ui.ZIndexMgr",{statics:{zBase:9E3},constructor:function(a){var f=this,e=MT;f.list={};f.zIndexStack=[];f.front=null;if(a)if(a.isContainer){a.on("resize",f._onContainerResize,f);f.zseed=e.number.parse(f.rendered?a.getNode().getStyle("zIndex"):undefined,f.getNextSeed());f.targetEl=a.getTargetEl();f.container=a}else{e.on(e.Config.win,"resize",e.func.bind(f._onContainerResize,f));f.zseed=f.getNextSeed();f.targetEl=e.get(a)}else{e.on(e.Config.win,"resize",e.func.bind(f._onContainerResize,
f));f.zseed=f.getNextSeed();e.ready(function(){f.targetEl=e.dom.getBody().tag})}},getNextSeed:function(){return MT.ui.ZIndexMgr.zBase+=1E4},setBase:function(a){this.zseed=a;a=this.assignZIndices();this._activateLast();return a},assignZIndices:function(){for(var a=this.zIndexStack,f=a.length,e=0,d=this.zseed,c;e<f;e++)if((c=a[e])&&c.visible)d=c.setZIndex(d);this._activateLast();return d},_setActiveChild:function(a,f){var e=this.front;if(a!==e){e&&!e.destroying&&e.setActive(false,a);if(a&&a!=f){a.setActive(true);
a.modal&&this._showModalMask(a)}}},onComponentHide:function(a){a.setActive(false);this._activateLast()},_activateLast:function(){var a=this.zIndexStack,f=a.length-1,e=this.front,d;for(this.front=undefined;f>=0&&!a[f].visible;--f)if(d=a[f]){this._setActiveChild(d,e);if(d.visible&&d.modal)return}for(;f>=0;--f){d=a[f];if(d.isVisible()&&d.modal){this._showModalMask(d);return}}this._hideModalMask()},_showModalMask:function(a){var f=a.node.getStyle("zIndex")-4,e=a.getFloatParent();a=e?e.getTargetEl():a.container;
e=a.getBound();var d=MT,c=d.Config.doc;if(a.tag===c.body){e.height=Math.max(c.body.scrollHeight,d.dom.getDocumentHeight());e.width=Math.max(c.body.scrollWidth,e.width)}if(!this.mask){this.mask=d.get(c.body).createChild({"class":d.cssPrefix+"mask"});this.mask.setDisplayMode(d.Element.DISPLAY);this.mask.on("click",d.func.bind(this._onMaskClick,this))}this.mask.maskTarget=a;a.addClass(d.cssPrefix+"body-masked");this.mask.setStyle("zIndex:"+f);this.mask.show();this.mask.setBox(e)},_hideModalMask:function(){var a=
this.mask;if(a&&a.isVisible()){a.maskTarget.removeClass(MT.cssPrefix+"body-masked");a.maskTarget=undefined;a.hide()}},_onMaskClick:function(){this.front&&this.front.focus()},_onContainerResize:function(){var a=this.mask,f,e=MT.Config.doc;if(a&&a.isVisible()){a.hide();f=a.maskTarget;f=f.tag===e.body?{height:Math.max(e.body.scrollHeight,MT.dom.getDocumentHeight()),width:Math.max(e.body.scrollWidth,e.documentElement.clientWidth)}:f.getViewSize(true);a.setSize(f);a.show()}},register:function(a){a.zIndexManager&&
a.zIndexManager.unregister(a);a.zIndexManager=this;this.list[a.id]=a;this.zIndexStack.push(a);a.on("hide",this.onComponentHide,this)},unregister:function(a){var f=this.list;delete a.zIndexManager;if(f&&f[a.id]){delete f[a.id];a.off("hide",this.onComponentHide);MT.array.remove(this.zIndexStack,a);this._activateLast()}},get:function(a){return a.isComp?a:this.list[a]},bringToFront:function(a){var f=false,e=this.zIndexStack;a=this.get(a);if(a!==this.front){MT.array.remove(e,a);a.preventBringToFront?e.unshift(a):
e.push(a);this.assignZIndices();f=true;this.front=a}f&&a.modal&&this._showModalMask(a);return f},sendToBack:function(a){a=this.get(a);MT.array.remove(this.zIndexStack,a);this.zIndexStack.unshift(a);this.assignZIndices();this._activateLast();return a},hideAll:function(){var a=this.list,f,e;for(e in a)if(a.hasOwnProperty(e)){f=a[e];f.isComp&&f.isVisible()&&f.hide()}},hide:function(){var a=this.mask,f=0,e=this.zIndexStack,d=e.length,c;for(this.tempHidden=[];f<d;f++){c=e[f];if(c.isVisible()){this.tempHidden.push(c);
c.node.hide()}}a&&a.hide()},show:function(){for(var a=0,f=this.tempHidden,e=this.mask,d=f?f.length:0,c;a<d;a++){c=f[a];c.node.show();c.setPosition(c.x,c.y)}this.tempHidden.length=0;if(e){e.show();e.alignTo(e.maskTarget,"tl-tl")}},getActive:function(){return this.front},getBy:function(a,f){for(var e=[],d=0,c=this.zIndexStack,b=c.length,g;d<b;d++){g=c[d];if(a.call(f||g,g)!==false)e.push(g)}return e},each:function(a,f){var e=this.list,d,c;for(d in e)if(e.hasOwnProperty(d)){c=e[d];if(c.isComp&&a.call(f||
c,c)===false)break}},eachBottomUp:function(a,f){for(var e=this.zIndexStack,d=0,c=e.length,b;d<c;d++){b=e[d];if(b.isComp&&a.call(f||b,b)===false)break}},eachTopDown:function(a,f){for(var e=this.zIndexStack,d=e.length,c;d-- >0;){c=e[d];if(c.isComp&&a.call(f||c,c)===false)break}},destroy:function(){var a=this.list,f,e;for(e in a)if(a.hasOwnProperty(e)){f=a[e];f.isComp&&f.destroy()}delete this.zIndexStack;delete this.list;delete this.container;delete this.targetEl}},function(){MT.WindowMgr=new this});
MT.mtClass("MT.util.Floating",{focusOnToFront:true,constructor:function(a){this.node=new MT.Layer(MT.mixin({id:this.id,hideMode:this.hideMode,hidden:!this.visible,constrain:false,shim:this.shim===false?false:undefined,node:a},this.floating,true));this.floating=true;this.registerWithOwnerCt()},registerWithOwnerCt:function(){var a;this.zIndexParent&&this.zIndexParent.unregisterFloatingItem(this);for(a=this.getParent();a;){if(a.floating)break;a=a.getParent()}this.zIndexParent=a;if(this.registerWithManager!==
false)this.zIndexParent?this.zIndexParent.registerFloatingItem(this):MT.WindowMgr.register(this)},setZIndex:function(a){var f=this.loadMask;this.node.setZIndex(a);if(f&&f.onZIndexChange)f.onZIndexChange(a);a+=10;if(this.floatingItems)a=Math.floor(this.floatingItems.setBase(a)/100)*100+1E4;return a},alignTo:function(a,f,e){this.setPagePosition(this.el.getAlignToXY(a.tag||a,f,e));return this},toFront:function(a){this.zIndexParent&&this.bringParentToFront!==false&&this.zIndexParent.toFront(true);if(MT.isUndefined(a))a=
!this.focusOnToFront;if(a)this.preventFocusOnActivate=true;if(this.zIndexManager.bringToFront(this))a||this.focus();delete this.preventFocusOnActivate;return this},setActive:function(a){if(a){this.modal&&!this.preventFocusOnActivate&&this.focus();this.fire("activate",this)}else this.fire("deactivate",this)},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a;if(this.isVisible()){a=this.node.getAlignToXY(this.container,"c-c");this.setPagePosition(a)}else this.needsCenter=
true;return this},onFloatShow:function(){this.needsCenter&&this.center();delete this.needsCenter},fitContainer:function(){var a=this.getFloatParent();this.setSize((a?a.getTargetEl():this.container).getViewSize(false))},doConstrain:function(a){var f=this.getNode(),e=this.getParent();a=a||e&&e.getTargetEl()||this.container;if(f=f.getConstrainVector(a)){a=this.getPosition();a[0]+=f[0];a[1]+=f[1];this.setPosition(a)}return this}});
MT.mtClass("MT.ui.CompLoader",{$extend:"MT.ElemLoader",target:null,loadMask:false,isLoader:true,setTarget:function(a){this.target&&this.target!=a&&this.abort();this.target=a},Renderers:{Html:function(a,f){a.getTarget().update(f);return true}},addMask:function(a){this.target.setLoading(a)},removeMask:function(){this.target.setLoading(false)}});
MT.mtClass("MT.ui.AbstractComponent",{mixins:{elCt:"MT.util.ElementCt",evtag:MT.events.EventTarget},statics:{INC_ID:1E3,_instances:{}},isComp:true,autoShow:false,baseCls:MT.cssPrefix+"widget",disableCls:MT.cssPrefix+"item-disabled",visible:true,focused:false,disabled:false,draggable:false,maskOnDisable:true,ui:"default",uiCls:[],renderTpl:null,rendered:false,floating:false,hideMode:"display",defUnit:"px",mType:"component",constructor:function(a){this.initConfig=a=a||{};MT.events.EventTarget.call(this);
this.mixins.elCt.constructor.call(this);this.initializer(a);MT.ui.AbstractComponent._instances[this.getId()]||(MT.ui.AbstractComponent._instances[this.getId()]=this);this.loader=this.getLoader();this.renderTo&&this.render(this.renderTo);this.autoShow&&this.show()},initializer:function(a){MT.mixin(this,a,true);this.getId();this.renderData=this.renderData||{};this.dh=this.dh||MT.q;this.setSize(this.width,this.height)},getId:function(){var a=this.mType?this.mType+"-":"comp-";return this.id||(this.id=
a+ ++MT.ui.AbstractComponent.INC_ID)},set:MT.func.setter(function(a,f){if(MT.isFunction(this[a]))this[a](f);else if(MT.isFunction(this["set"+MT.string.capitalFirst(a)]))this["set"+MT.string.capitalFirst(a)](f);else this[a]=f}),tpl:null,tplMode:"overwrite",getTpl:function(a){if(a&&this[a]){this[a]=MT.Template(this[a],this.getId());return this[a]}return null},setUi:function(a){var f=this.baseCls+"-",e=f+this.ui,d=f+a;this.uiCls.push(this.baseCls);this.uiCls.push(e);this.ui=a;if(this.uiCls.length){this.removeCls(this.uiCls.join(" "));
this.uiCls=MT.array.unique(this.uiCls);this.uiCls=MT.array.map(this.uiCls,function(c){if(c)c=c.replace(e,d);return c});this.addCls(this.uiCls.join(" "))}},addCls:function(a){this.node&&this.rendered&&this.node.addClass(a);return this},removeCls:function(a){this.node&&this.rendered&&this.node.removeClass(a);return this},addUiCls:function(a){this.addCls(this.mapCls_(a).join(" "))},removeUiCls:function(a){this.removeCls(this.mapCls_(a,true).join(" "))},mapCls_:function(a,f){var e=[],d=this;if(MT.isArray(a))e=
a;else if(MT.isString(a))e=a.split(" ");return e=MT.array.map(e,function(c){var b=d.baseCls+"-"+c;b=b+" "+(d.baseCls+"-"+d.ui+"-"+c);c=d.hasUiCls_(b);if(f&&c)MT.array.remove(d.uiCls,b);else if(c)b="";else d.uiCls.push(b);return b},d)},hasUiCls_:function(a){return MT.array.indexOf(a,this.uiCls||[])===-1?false:true},setVisible:function(a){return this[a?"show":"hide"]()},onShow:function(){},onHide:function(){},isVisible:function(a){var f=this.visible,e=this._parent;if(this.destroyed)return false;if(a&&
f&&this.rendered&&e)for(;e;){if(!e.visible||e.collapsed){f=false;break}e=e._parent}return f},setDisabled:function(a){return this[a?"disable":"enable"]()},enable:function(a){this.removeCls(this.disableCls);if(this.rendered)this.onEnable();this.disabled=false;a!==true&&this.fire("enable",this);return this},onEnable:function(){if(this.maskOnDisable){this.getNode().tag.disabled=false;this.unmask()}},disable:function(a){this.addCls(this.disableCls);if(this.rendered)this.onDisable();this.disabled=true;
a!==true&&this.fire("disable",this);return this},onDisable:function(){if(this.maskOnDisable){this.getNode().tag.disabled=true;this.mask()}},mask:function(){var a=this.getNode();a&&a.mask.apply(a,arguments)},unmask:function(){var a=this.getNode();a&&a.unmask()},addOverCls:function(){this.disabled||this.node.addClass(this.overCls)},removeOverCls:function(){this.node.removeClass(this.overCls)},setSize:function(a,f){var e=this.getNode(),d=MT;if(d.isObject(a)){f=a.height;a=a.width}if(d.isNumber(a))this.width=
d.number.clamp(a,this.minWidth,this.maxWidth);if(d.isNumber(f))this.height=d.number.clamp(f,this.minHeight,this.maxHeight);if(this.rendered){a&&e.setStyle("width:"+d.dom.addUnits(a,this.defUnit));f&&e.setStyle("height:"+d.dom.addUnits(f,this.defUnit))}return this},setWidth:function(a){this.setSize(a)},setHeight:function(a){this.setSize(undefined,a)},getSize:function(a){if(this.rendered)return this.getNode().getSize(a||0)},setModel:function(a){this.model_=a},getModel:function(){return this.model_},
update:function(a,f,e){var d="";d=MT;f=this.getTargetEl();if(this.tpl&&!d.isString(a)){this.setModel(a);if(this.rendered){d=this.tpl.render(a||{},this);f[this.tplMode==="overwrite"?"html":this.tplMode](d)}}else{this.html=d.isArray(a)?a.join(""):a;if(this.rendered&&d.isString(this.html)){f.html(this.html);delete this.html;e&&d.isFunction(e)&&e.call(this)}}return this},initCt_:function(a){if(!a&&this.node)a=this.node.tag.parentNode;return this.container=a.tag?a:MT.get(a)},beforeRender:function(){this.setUi(this.ui)},
getRender:function(){this.beforeRender();if(this.fire("beforerender",this)!==false){if(this.node)return{tag:"<div></div>",id:"comp-"+ ++MT.AbstractComponent.INC_ID};return this.initElCfg_()}return null},initElCfg_:function(){var a=this.autoEl,f={tag:"<div></div>",id:this.id,tpl:this.getTpl("renderTpl")};if(MT.isString(a))f.tag=a;else MT.mixin(f,a,true);if(f.tpl)f.tplData=this.initRenderData_();return f},initRenderData_:function(){return MT.mixin({id:this.id,ui:this.ui,uiCls:this.uiCls,baseCls:this.baseCls,
compCls:this.compCls},this.renderData)},getInsertPosition_:function(a){if(a!==undefined)a=MT.isNumber(a)?this.container.tag.childNodes[a]:MT.getDom(a);return a},render:function(a){var f=this.node&&(this.node=MT.get(this.node)),e;e=this.renderPos;a=this.initCt_(a);e=this.getInsertPosition_(e);if(f){this.fromDoc=true;this.initStyles(f);e?a.tag.insertBefore(f.tag,e):a.tag.appendChild(f.tag)}else{this.fromDoc=false;f=this.getRender();f=MT.dom.applyMarkup(f);if(e){f=MT.q(f).insertBefore(e);f=f[0]}else a.tag.appendChild(f);
this.wrapPrimaryEl(f);this.initStyles(this.node)}if(!this.container)this.container=MT.get(this.node.tag.parentNode);this.ctCls&&this.container.addClass(this.ctCls);this.onRender(this.container);a=this.getTargetEl();this.node.setDisplayMode(MT.Element[this.hideMode.toUpperCase()]);this.compCls&&this.node.addClass(this.compCls);this.overCls&&this.node.hover(this.addOverCls,this.removeOverCls,this);this.fire("render",this);if(this.contentEl){pre=MT.cssPrefix;hide=pre+"hide-";contentEl=MT.get(this.contentEl);
contentEl.removeClass([pre+"hidden",hide+"display",hide+"offsets",hide+"nosize"].join(" "));a.tag.appendChild(contentEl.tag)}this.afterRender();this.fire("afterrender",this);this.bindUI();this.visible||this.node.hide()},wrapPrimaryEl:function(a){this.node=MT.get(a)},doAutoRender:function(){var a=MT.Config.doc;this.rendered||(this.floating?this.render(a.body):this.render(MT.isBoolean(this.autoRender)?MT.get(a.body):this.autoRender))},onRender:function(){var a=this.x,f=this.y,e={};this.applyChildEls(this.node);
this.rendered=true;if(a!==undefined)e.x=a;if(f!==undefined)e.y=f;width=this.width;height=this.height;if(typeof width=="number")e.width=width;if(typeof height=="number")e.height=height;this.lastBox=e},afterRender:function(){this.fitCt||this.maximized?this.fitContainer():this.setSize(this.width,this.height);this.disabled&&this.disable(true)},initStyles:function(a){if(this.cls){if(MT.isArray(this.cls))this.cls=this.cls.join(" ");a.addClass(this.cls);delete this.cls}if(this.style){a.setStyle(this.style);
delete this.style}},bindUI:function(){this.addFocusListeners_()},registerFloatingItem:function(a){if(!this.floatingItems)this.floatingItems=new MT.ZIndexMgr(this);this.floatingItems.register(a)},unregisterFloatingItem:function(a){this.floatingItems&&this.floatingItems.unregister(a)},addFocusListeners_:function(){var a=this.getFocusEl(),f=MT.func;if(a){if(a.isComp)return a.addFocusListeners_();if(a.needsTabIndex())a.tag.tabindex=-1;a.on("focus",f.bind(this.onFocus,this));a.on("blur",f.bind(this.onBlur,
this))}},preFocus:MT.noop,onFocus:function(a){var f=this.focusCls,e=this.getFocusEl();if(!this.disabled){this.preFocus(a);f&&e&&e.addClass(this.mapCls_(f).join(" "));if(!this.hasFocus){this.hasFocus=true;this.fire("focus",[this,a])}}},beforeBlur:MT.noop,onBlur:function(a){var f=this.focusCls,e=this.getFocusEl();if(!this.destroying){this.beforeBlur(a);f&&e&&e.removeClass(this.mapCls_(f).join(" "));this.validateOnBlur&&this.validate();this.hasFocus=false;this.fire("blur",[this,a]);this.postBlur(a)}},
postBlur:MT.noop,getNode:function(){return this.node},getTargetEl:function(){return this.node},getContentEl:function(){return this.node},getFocusEl:MT.noop,setParent:function(a){if(this==a)throw Error("can't set parent as itself!");if(a&&this._parent&&this.id_&&this._parent._getChild(this.id_)&&this._parent!=a)throw Error("this comp is already the child of some parent.");this._parent=a},getParent:function(){return this._parent},addChild:function(a){this.addChildAt(a,this.getChildLen())},getChildLen:function(){return this.children_?
this.children_.length:0},addChildAt:function(a,f){if(f<0||f>this.getChildLen())throw Error("children out of bound.");if(!this.childIndex_||!this.children_){this.childIndex_={};this.children_=[]}a.getParent()==this&&MT.array.remove(this.children_,a);this.childIndex_[a.getId()]=a;a.setParent(this);this.children_.splice(f,0,a);a.onAdded(this,f)},getChildren:function(){return this.children_?this.children_:[]},getChild:function(a){return this.childIndex_&&a?this.childIndex_[a]:null},getChildAt:function(a){return this.children_?
this.children_[a]:null},indexOfChild:function(a){return this.children_&&a?MT.array.indexOf(a,this.children_):-1},eachChild:function(a,f){this.children_&&this.children_.length&&MT.each(this.children_,a,f)},removeChild:function(a){if(!a)throw Error("unknown child.");var f=MT.isString(a)?a:a.getId();a=this.getChild(f);if(f&&a){this.childIndex_[f]&&delete this.childIndex_[f];MT.array.remove(this.children_,a);a.onRemoved(this);a.setParent(null)}return a},removeChildAt:function(a){return this.removeChild(this.getChildAt(a))},
removeChildren:function(){var a=this.children_,f;if(a&&a.length)for(f=0;f<a.length;f++)this.removeChild(a[f])},onAdded:MT.noop,onRemoved:MT.noop,beforeDestroy:MT.noop,onResize:MT.noop,destroy:function(){var a=this.getId();if(!this.destroyed)if(this.fire("beforedestroy",this)!==false){this.destroying=true;this.beforeDestroy();this.floating&&this.zIndexManager&&this.zIndexManager.unregister(this);this.onDestroy();this.fire("destroy",this);MT.ui.AbstractComponent._instances[a]&&delete MT.ui.AbstractComponent._instances[a];
MT.off(this);if(this.rendered){this.eachChild(function(f){f.getParent();f.destroy()});this.mixins.elCt.destroy.call(this);this.node.remove();delete this.node;delete this.rendered}this.childIndex_=this.children_=null;if(this.state_){this.state_.clear();delete this.state_}this._parent=this.model_=null;this.parentComp&&delete this.parentComp;this.destroying=false;this.destroyed=true}},onDestroy:function(){this.floatingItems&&this.floatingItems.destroy()},addState:function(a,f){if(!this.state_)this.state_=
new MT.util.HashMap;this.state_.add(a,f);return this},getState:function(a){return this.state_?this.state_.get(a):null},removeState:function(a){this.state_&&this.state_.removeByKey(a);return this},setPosition:function(a,f,e){var d=this.beforeSetPosition.apply(this,arguments),c=this.getNode();if(d&&this.rendered){d=this.convertPosition(d);if(e){if(MT.isBoolean(e))e={};this.node.animate(MT.mixin({duration:1,onEnd:MT.func.bind(this.afterSetPosition,this,[d.left,d.top]),to:d},e))}else{if(d.left!==undefined&&
d.top!==undefined)c.setLeftTop(d.left,d.top);else if(d.left!==undefined)c.setLeft(d.left);else d.top!==undefined&&c.setTop(d.top);this.afterSetPosition(d.left,d.top)}}return this},beforeSetPosition:function(a,f,e){var d;a=!a||MT.isNumber(a)?{x:a,y:f,anim:e}:MT.isNumber(d=a[0])?{x:d,y:a[1],anim:f}:{x:a.x,y:a.y,anim:f};a.hasX=MT.isNumber(a.x);a.hasY=MT.isNumber(a.y);this.x=a.x;this.y=a.y;return a.hasX||a.hasY?a:null},afterSetPosition:function(a,f){this.onPosition(a,f);this.fire("move",[this,a,f])},
convertPosition:function(a,f){var e={};if(a.hasX)e.left=f?MT.dom.addUnits(a.x):a.x;if(a.hasY)e.top=f?MT.dom.addUnits(a.y):a.y;return e},onPosition:MT.noop,getOverflow:function(){var a=null;if(typeof this.autoScroll=="boolean")a={overflow:this.autoScroll?"auto":""};else if(this.overflowX!==undefined||this.overflowY!==undefined)a={"overflow-x":this.overflowX||"","overflow-y":this.overflowY||""};if(a&&(MT.ua.ie6||MT.ua.ie&&MT.ua.isVersion(7)))a.position="relative";return a},getFloatParent:function(){var a=
this.getParent();if(a&&a.floating)return a;return null},upLayout:function(a,f){a&&a.setStyle(f)},getLoader:function(){var a=this.autoLoad?MT.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad}:null,f=this.loader||a;if(f){if(f.isLoader)f.setTarget(this);else this.loader=new MT.ui.CompLoader(MT.mixin({target:this,autoLoad:a},f));return this.loader}return null}},function(){MT.CompMgr={get:function(a){if(MT.isString(a))return MT.ui.AbstractComponent._instances[a];return a}}});
MT.mtClass("MT.ui.Component",{$extend:"MT.ui.AbstractComponent",mixins:{floating:"MT.util.Floating"},statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g},resizeHandles:"all",floating:false,toFrontOnShow:true,hideMode:"display",constructor:function(a){a=a||{};if(a.tagName||a.tag||MT.isString(a))a={applyTo:a,id:a.id||a};this.callParent(arguments)},initializer:function(){var a,f=this.listeners;
this.callParent(arguments);if(f){for(a in f)this.on(a,f[a],this);this.listeners=null}},afterRender:function(){this.setUi(this.ui);this.callParent();if(!(this.x&&this.y)&&(this.pageX||this.pageY))this.setPagePosition_({x:this.pageX,y:this.pageY});this.resizable&&this.initResizable(this.resizable);this.draggable&&this.initDraggable();this.autoScroll&&this.setAutoScroll(true);this.update(this.html);this.useProxy&&this.getProxy();this.dock&&this.setDock(this.dock);this.focus()},beforeRender:function(){var a=
this.floating;this.uiCls=[];if(a){this.addCls(MT.cssPrefix+"layer");(a=a.cls)&&this.addClass(a)}return this.callParent()},makeFloating_:function(a){this.mixins.floating.constructor.call(this,a)},wrapPrimaryEl:function(a){this.floating?this.makeFloating_(a):this.callParent(arguments)},initResizable:function(a){a=MT.mixin({node:this.node,dynamic:false,handles:this.resizeHandles||"all"},a);a.resizeTarget=this;this.resizer=new MT.Resizer(a)},getDragEl:function(){return this.node},initDraggable:function(){var a=
this.indicateDragCls||MT.cssPrefix+"widget-draggable",f=MT.mixin({clickPixelThresh:0,clickTimeThresh:0,useShim:true,move:false,haltDown:false,dragNode:this.getDragEl(),dragTarget:this},this.ddConfig||{},true);this.delegate=new MT.dd.Delegate({bubbleTargets:this,container:this.node,dragConfig:f,nodes:"."+a,target:false})},scrollBy:function(){var a;if((a=this.getNode())&&a.tag)a.scrollBy.apply(a,arguments)},showAt:function(a,f,e){if(!this.rendered&&(this.autoRender||this.floating))this.doAutoRender();
this.floating?this.setPosition(a,f,e):this.setPagePosition(a,f,e);this.show()},setAutoScroll:function(a){this.autoScroll=!!a;if(this.rendered){a=this.getTargetEl();a.setStyle(this.getOverflow())}return this},setPagePosition:function(a,f,e){var d={};if(MT.isArray(a)){f=a[1];a=a[0]}this.pageX=a;this.pageY=f;if(this.floating)this.setPosition(a,f,e);else{d.left=a;d.top=f;this.setPosition(d.left,d.top,e)}return this},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},
show:function(){if(this.rendered&&this.isVisible()){if(this.toFrontOnShow&&this.floating){this.toFront();if(!this.onFirstShow){this.onFirstShow=true;this.onShow.apply(this,arguments);this.afterShow.apply(this,arguments)}}}else if(this.fire("beforeshow",this)!==false){this.visible=true;if(!this.rendered&&(this.autoRender||this.floating))this.doAutoRender();if(this.rendered){this.beforeShow();this.onShow.apply(this,arguments);this.afterShow.apply(this,arguments)}}return this},beforeShow:MT.noop,onShow:function(){this.node.show();
this.callParent(arguments);this.floating&&this.constrain&&this.doConstrain(this.constrainTo)},afterShow:function(a,f,e){a=a||this.animateTarget;this.ghost||(a=null);if(!a)this.onShowComplete(f,e)},onShowComplete:function(a,f){if(this.floating){this.toFront();this.onFloatShow()}if(a)a.call(f||this);this.eachChild(function(e){if(e.floating&&e.showOnParentShow){delete e.showOnParentShow;e.show()}});this.fire("show",this)},hide:function(){this.showOnParentShow=false;if(!(this.rendered&&!this.isVisible())&&
this.fire("beforehide",this)!==false){this.visible=false;this.rendered&&this.onHide.apply(this,arguments)}return this},onHide:function(a,f,e){a=a||this.animateTarget;this.ghost||(a=null);this.node.hide();a||this.afterHide(f,e)},afterHide:function(a,f){MT.ui.AbstractComponent.prototype.onHide.call(this);if(a)a.call(f||this);this.eachChild(function(e){if(e.floating&&e.hideOnParentHide!==false&&e.isVisible()){e.hide();e.showOnParentShow=true}});this.fire("hide",this)},onDestroy:function(){if(this.rendered){this.proxy&&
this.proxy.remove();this.resizer&&this.resizer.dispose();this.delegate&&this.delegate.dispose()}this.callParent()},focus:function(){var a=this.getFocusEl(),f;if(this.rendered&&!this.destroyed&&a){if(a.isComp)return a.focus();if(f=a.tag){if(a.needsTabIndex())f.tabindex=-1;a.focus()}this.floating&&this.toFront(true)}return this},blur:function(){var a;if(this.rendered&&(a=this.getFocusEl()))a.blur();return this},getProxy:function(){var a;if(!this.proxy){a=MT.Config.doc.body;this.proxy=this.node.createProxy({"class":MT.cssPrefix+
"proxy-el"},a,true)}return this.proxy},setDock:function(a){var f=this.getNode(),e=MT.cssPrefix+"widget-docked";this.dock=a;e+=" "+MT.cssPrefix+"widget-docked-"+a;f.addClass(e)},setLoading:function(a,f){var e;if(this.rendered){if(this.loadMask){this.loadMask.destroy();this.loadMask=null}if(a!==false){e=MT.isObject(a)?MT.mixin({},a):MT.isString(a)?{msg:a}:{};f&&MT.mixin(e,{useTargetEl:true});this.loadMask=new MT.ui.LoadMask(this,e);this.loadMask.show()}}return this.loadMask},getPosition:function(a){var f=
this.node,e=this.getParent(),d=this.floating&&e;if(a===true||!d)return[f.getLeft(true),f.getTop(true)];if(this.x!==undefined&&this.y!==undefined)a=[this.x,this.y];else{a=f.getXY();if(d){e=e.getTargetEl().getRegion();a[0]-=e.left;a[1]-=e.top}}return a}});
MT.mtClass("MT.ui.LoadMask",{$extend:"MT.ui.Component",msg:"loading...",msgCls:MT.cssPrefix+"mask-loading",maskCls:MT.cssPrefix+"mask",isLoadMask:true,useMsg:true,useTargetEl:false,baseCls:MT.cssPrefix+"mask-msg",childEls:["msgEl"],focusOnToFront:false,registerWithManager:false,defaultZIndex:100,renderTpl:'<div id="${id}-msgEl" style="position:relative" class="${msgCls}"></div>',constructor:function(a,f){if(!a)throw Error("please check the input component is exist.@loadMask.js constructor");a.addChild(this);
this.bindToComp(a);f.renderTo=MT.Config.doc.body;this.callParent([f]);this.initializer(f)},initializer:function(){this.renderData={id:this.id,msgCls:this.msgCls};this.callParent(arguments)},bindToComp:function(a){var f=a.resizer;if(a.floating)a.on("move",this.resizeMask,this);else this.preventBringToFront=true;if(f)f.on("resize:end",this.resizeMask,this)},afterRender:function(){this.callParent();this.container=this.getParent().getContentEl();this.onBeforeLoad()},onBeforeLoad:function(){var a=this.getParent();
if(!this.disabled){this.loading=true;a.rendered&&a.isVisible(true)&&this.show()}},getMaskEl:function(){if(!this.maskEl)this.maskEl=MT.dom.getBody().createChild({"class":this.maskCls});return this.maskEl},show:function(){this.onShow();return this.callParent(arguments)},onShow:function(){var a=this.childCt.msgEl;this.loading=true;if(this.useMsg)a.show().html(this.msg);else a.tag.parentNode.style.display="none";this.callParent(arguments)},hide:function(){return this.callParent(arguments)},onHide:function(){this.callParent();
this.getMaskEl().hide()},resizeMask:function(){var a;if(this.rendered&&this.isVisible()){this.center();a=this.getMaskTarget();this.getMaskEl().show().setSize(a.getSize()).alignTo(a,"tl-tl")}},getMaskTarget:function(){var a=this.getParent();return this.useTargetEl?a.getTargetEl():a.getNode()},afterShow:function(){this.callParent(arguments);this.setupMask()},setupMask:function(){this.resizeMask();this.setupZIndexes()},toFront:MT.noop,setZIndex:function(a){if(this.rendered){this.getMaskEl().setStyle({"z-index":++a});
this.node.setStyle({"z-index":++a})}return a},onZIndexChange:function(a){this.setZIndex(a)},setupZIndexes:function(){var a=this.activeOwner;if(a=this.getParent()){a=a.getNode().getZIndex();if(isNaN(a))a=this.defaultZIndex}else a=this.defaultZIndex;this.setZIndex(a)},onLoad:function(){this.loading=false;this.hide()},onDestroy:function(){this.maskEl&&this.maskEl.remove();this.callParent()}});
MT.mtClass("MT.ui.Container",{$extend:"MT.ui.Component",defaultType:"panel",isContainer:true,baseCls:MT.cssPrefix+"container",innerCls:MT.cssPrefix+"widget-inner",constructor:function(a){this.callParent(arguments);this.initializer(a)},initializer:function(){this.callParent(arguments);if(!this.renderTo&&this.parentComp)this.renderTo=this.renderTo||this.parentComp.getNode();this.renderPos=this.renderPos;this.items=this.items||[]},addComp:function(a){var f=MT;a=a?f.isArray(a)?a:[a]:this.items;var e=
a.length,d,c,b;for(b=0;b<e;b++){d=a[b];if((c=d.mType)&&f.isString(c)){c=f.string.capitalFirst(c);delete d.mType;d=d||{};c=f.mtGetClass(c);if(f.isFunction(c)){d.parentComp=this;d=new c(d);this.addChild(d);this.itemCls&&d.addCls(this.itemCls)}}}},getChildByElement:function(a,f){var e,d,c=0,b=this.getChildren(),g=b.length;for(a=MT.getDom(a);c<g;c++){e=b[c];d=e.getNode();if(d.tag===a||d.contains(a))return f&&e.getChildByElement?e.getChildByElement(a,f):e}return null},getFocusEl:function(){return this.getTargetEl()},
afterRender:function(){this.callParent();this.addComp();this.ctMargin!==undefined&&this.getNode().setStyle({margin:MT.dom.addUnits(this.ctMargin)});this.layout=MT.mixin({comp:this},this.layout||{});this.layout=MT.ui.Layout.create(this.layout,"container");this.layout.doLayout()},onAdded:function(a,f){this.fire("added",[this,a,f])},onRemoved:function(a){this.fire("removed",[this,a])},beforeDestroy:function(){this.layout instanceof MT.ui.Layout&&this.layout.destroy();this.callParent()}});
MT.mtClass("MT.ui.Layout",{isLayout:true,statics:{layoutsByType:{},create:function(a,f){var e=this.layoutsByType,d,c,b;if(!a||typeof a==="string"){b=a||f;c={}}else if(a.isLayout)return a;else{c=a;b=a.type||f}if(!(d=e[b])){d="MT.ui.Layout."+MT.string.capitalFirst(b);d=MT.mtGetClass(d);e[b]=d}return new d(c)}},constructor:function(a){this.id="";MT.mixin(this,a||{})},beginLayout:MT.noop});
MT.mtClass("MT.ui.Layout.Container",{$extend:"MT.ui.Layout",innerCls:MT.cssPrefix+"widget-inner",itemCls:MT.cssPrefix+"widget-item",type:"box",defMargin:2,margin:null,padding:0,pack:"left",layPos:"abs",constructor:function(a){MT.mixin(this,a,true);this.hov=this.hov||"h";this.margin=MT.isNumber(this.margin)?this.margin:this.defMargin;this.id=this.comp?this.comp.id:this.node?this.node.tag.id:MT.guid("mtpre-");this.maxWH={width:0,height:0};this.layouts=[];this.packDis={left:0,right:0,top:0,bottom:0};
this.dockDis={left:0,right:0,top:0,bottom:0}},doLayout:function(){var a=this.comp,f=this.hov!="h"?"v":"h";if(a.isContainer&&!this.noLayout){this.getCtSize();this.getChildren();if(a.beforeLayout&&a.beforeLayout.call(a,this)===false)MT.console({type:"warning",msg:"stop layout"});else{this.beginLayout(a,f);a.afterLayout&&a.afterLayout.call(a,this)}}},beginLayout:function(a,f){f==="h"?this.layoutItem(a,["left","right","top","bottom","center"],false):this.layoutItem(a,["top","bottom","left","right","middle"],
true)},reLayout:function(){this.maxWH={width:0,height:0};this.layouts=[];this.packDis={left:0,right:0,top:0,bottom:0};this.dockDis={left:0,right:0,top:0,bottom:0};this.doLayout()},getCt:function(){var a=this.comp;return a?a.getNode():MT.get(this.node)},getCtSize:function(){return this.size=this.getCt().getSize(0)},getChildren:function(){var a=this,f,e;a.packStack={};f=a.comp.getChildren()||[];MT.array.map(f,function(d){if(!d.noLayout&&!d.isLoadMask){e=d.pack||d.dock||a.pack;if(typeof a.packStack[e]==
"undefined")a.packStack[e]=[];e&&a.packStack[e].push(d)}})},layoutItem:function(a,f,e){for(var d=this,c,b,g,h,i=d.packStack,j,k,l,o=false,m=0;c=f[m];++m){b=i[c];MT.each(b,function(p,t){if(p.visible&&!p.floating){d.fixComp(p,c,false);if(c!="center"){g=p.getNode();l=d.createStyle(a,g,c,p,t,e);g.addClass(d.itemCls+"-"+c);g.setStyle(l);if(p.mType==="textitem"&&(c==="left"||c==="right"))g.setStyle("top:2px")}else if(!o&&c=="center"){o=true;h=(h=a.childCt)?h.innerCt:h.body||a.getNode();h.setStyle("text-align:center")}p.mType===
"textitem"&&c==="center"&&p.node.setStyle("paddingTop:2px")}},d)}d.fixComp(a,null,true);if(!a.isPanel){j=d.maxWH.width;for(m=0;c=f[m];++m){b=i[c];MT.each(b,function(p){if(p.visible){g=p.getNode();if(e){pb=d.getPadBor(g);h=p.childCt;h=p.isButton?h.btnEl:h.innerCt||g;k=j-pb.plr-pb.blr;if(p.isSeparator)k-=8;h.setStyle({width:k+"px"})}else p.isSeparator&&g.setStyle({top:"4px"})}},d)}}d.doCalcChild(a,e)},createStyle:function(a,f,e,d,c,b){var g=e,h=this.maxWH,i,j=this.dockDis,k=this.packDis;f=f.getSize(2);
if(b&&h.width<f.width)h.width=f.width;else if(!b&&h.height<f.height)h.height=f.height;b=b?f.height:f.width;switch(e){case "left":i="top:"+j.top+"px;";j.left+=f.width;b=f.width;break;case "right":i="top:"+j.top+"px;";j.right+=f.width;b=f.width;break;case "top":i="left:"+j.left+"px;";j.top+=f.height;break;case "bottom":i="left:"+j.left+"px;";j.bottom+=f.height;break;case "center":g="left";break;case "middle":g="top"}e=k[g];if(!d.isContainer){e+=this.margin*c;if(d.mType==="menuSeparator"&&c>0)e-=2;if(a.isToolbar&&
!d.isSeparator)e+=2}k[g]+=parseInt(b,10);i+=g+":"+String(e)+"px;";return i},fixComp:function(a,f,e){if(a.isContainer){var d=this.size,c=this.maxWH,b=/^(?:top|bottom)$/i,g,h;h=a.getNode();f=f||a.dock||this.pack;var i=a.childCt,j=this.dockDis;a=a.isPanel?2:0;h=this.getPadBor(h);if(i&&(g=i.innerCt||i.body)){f=b.test(f)?e?{height:c.height+"px"}:{width:d.width-h.plr-h.blr+"px"}:e?{width:c.width+"px"}:{height:d.height-h.ptb-h.btb-j.top-j.bottom-a+"px"};g.setStyle(f)}return h}},doCalcChild:function(a,f){var e,
d,c,b=this.getCtSize(),g=f?b.height:b.width,h,i=MT,j=f?"offsetHeight":"offsetWidth",k=this.itemCls+"-";e=a.childCt.innerCt;var l=a.childCt.body,o=this.dockDis,m=f?o.top+o.bottom:o.left+o.right;if(e)if(!e.isStyle("text-align","center")){e=e.tag.childNodes;for(d=0;d<e.length;d++){c=e[d];h=c.className;if(!i.string.contains(h,k))if(c[j]>g-m)(h=this.dockDisStyle(f,o,false,b))&&i.dom.setStyle(c,h)}}if(l)(h=this.dockDisStyle(f,o,true,b,this.getPadBor(l)))&&l.setStyle(h)},dockDisStyle:function(a,f,e,d,c){var b=
this.margin,g={},h=f.left+f.right,i=f.top+f.bottom;if(e){if(f.top>0)g.top=f.top+"px";if(f.left>0)g.left=f.left+"px"}else if(a){if(f.top>0)g.top=f.top+b+"px";if(f.bottom>0)g["margin-bottom"]=f.bottom+b+"px"}else{if(f.left>0)g.left=f.left+b+"px";if(f.right>0)g["margin-right"]=f.right+b+"px"}if(e){a=d.width-h-c.plr-c.blr;d=d.height-i-c.ptb-c.btb;g.width=a+"px";g.height=d+"px"}return g},getPadBor:function(a){var f=0,e=0,d=0,c=0,b=0,g=0;f=a.getBorderWidth("lr");e=a.getBorderWidth("tb");d=a.getPadding("lr");
c=a.getPadding("tb");b=a.getMargin("lr");g=a.getMargin("tb");return{plr:d,ptb:c,blr:f,btb:e,mlr:b,mtb:g}},destroy:function(){MT.each(this.layouts,function(a){a.destroy()});this.layouts=[];delete this.packStack}});
MT.mtClass("MT.ui.Layout.Scroller",{$extend:"MT.ui.Layout.Container",scrollerCls:MT.cssPrefix+"box-scroller",beginLayout:function(a,f){this.doScroller(a,f==="h"?["left"]:["top"],f!="h")},doScroller:function(a,f,e){for(var d=this,c,b,g,h=a.childCt,i,j=d.maxWH,k,l,o=d.packStack,m,p,t=0,w;c=f[t];++t){b=o[c];w=0;MT.each(b,function(v,C){if(v.visible&&!v.floating){g=v.getNode();p=d.createStyle(a,g,c,v,C,e);g.addClass(d.itemCls+"-"+c);g.setStyle(p);w++}},d);w=(w-1)*d.margin;k=j.width;l=j.height;m=e?k:d.packDis.left+
w;l=e?d.packDis.top+w:l;a.iconSepEl&&a.iconSepEl.height(l);if(h){(i=h.innerCt)&&i.setSize(m,l);if(i=h.body){m+=i.getPadding("lr")+i.getBorderWidth("lr");l+=i.getPadding("tb")+i.getBorderWidth("tb")}}i=a.width||a.minWidth;a.setSize(i>m?undefined:m,l);MT.each(b,function(v){v.visible&&!v.floating&&v.getNode().width(k)},d)}},getOverflowCls:function(){return MT.cssPrefix+(me.hov==="h"?"horizontal":"vertical")+"-box-overflow-body"},getNames:function(){if(this.hov=="h")return{leftCap:"left",rightCap:"right"};
return{leftCap:"top",rightCap:"bottom"}},initBtnsCss:function(){var a=MT.cssPrefix,f=this.getNames(),e=f.leftCap;f=f.rightCap;var d=this.comp?this.comp.mType:"auto";this.preCtCls=this.preCtCls||a+"box-scroller-"+e;this.nextCtCls=this.nextCtCls||a+"box-scroller-"+f;this.preScrollerCls=this.preScrollerCls||a+d+"-scroll-"+e;this.nextScrollerCls=this.nextScrollerCls||a+d+"-scroll-"+f},getBtnCt:function(){var a=this.comp,f,e;if(a){f=a.getNode();if((e=a.childCt)&&e.body)f=e.body}return f||this.node},getPreBtn:function(){this.initBtnsCss();
var a=this.id+"-pre-scroller",f;if(!(f=this.checkBtnTag(a))){f=this.getBtnCt().createChild({"class":this.innerCls+" "+this.preCtCls},false,true);this.createInner_(f,a,this.preScrollerCls)}this.preBtn=f},createInner_:function(a,f,e){a.createChild({id:f,style:"display:none","class":this.scrollerCls+" "+e})},getNextBtn:function(){var a=this.id+"-next-scroller",f;if(!(f=this.checkBtnTag(a))){f=this.getBtnCt().createChild({"class":this.innerCls+" "+this.nextCtCls});this.createInner_(f,a,this.nextScrollerCls)}this.nextBtn=
f},checkBtnTag:function(a){if(a=MT.getDom(a))return MT.get(a);return false}});MT.mtClass("MT.ui.Img",{});
MT.mtClass("MT.ui.Button",{$extend:"MT.ui.Component",visible:true,disabled:false,pressed:false,baseCls:MT.cssPrefix+"btn",pressedCls:"pressed",overCls:"over",focusCls:"focus",textAlign:"center",mType:"button",clickEvent:"click",preventDefault:true,iconAlign:"left",scale:"small",arrowAlign:"right",arrowCls:"arrow",enableToggle:false,menuAlign:"tl-bl?",menuActiveCls:"menu-active",maskOnDisable:false,handleMouseEvents:true,isButton:true,childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl"],renderTpl:['<em id="${id}-btnWrap"{#if splitCls} class="${splitCls}"{#/if}>',
"{#if href }",'<a id="${id}-btnEl" href="${href}" class="${btnCls}" target="${hrefTarget}"{#if tabIndex} tabIndex="${tabIndex}"{#/if} role="link">','<span id="${id}-btnInnerEl" class="${baseCls}-inner">',"${label}","</span>",'<span id="${id}-btnIconEl" class="${baseCls}-icon ${iconCls}"{#if iconUrl} style="background-image:url(${iconUrl})"{#/if}></span>',"</a>","{#else}",'<button id="${id}-btnEl" type="${type}" class="${btnCls}" hidefocus="true"','{#if tabIndex} tabIndex="${tabIndex}"{#/if} role="button" autocomplete="off">',
'<span id="${id}-btnInnerEl" class="${baseCls}-inner" style="${innerSpanStyle}">',"${label}","</span>",'<span id="${id}-btnIconEl" class="${baseCls}-icon ${iconCls}"{#if iconUrl} style="background-image:url(${iconUrl})"{#/if}>&#160;</span>',"</button>","{#/if}","</em>","{#if closable}",'<a id="${id}-close" href="#" class="${baseCls}-close-btn" title="${closeText}"></a>',"{#/if}"],hrefTarget:"_blank",initializer:function(){this.callParent(arguments);if(!this.renderTo&&this.parentComp)this.renderTo=
this.parentComp.childCt.body;if(this.menu){this.split=true;this.menu=MT.menu.Mgr.get(this.menu);this.menu.ownerButton=this;this.addChild(this.menu)}if(this.url)this.href=this.url;if(this.href&&!this.hasOwnProperty("preventDefault"))this.preventDefault=false;if(MT.isString(this.toggleGroup)&&this.toggleGroup!=="")this.enableToggle=true},getTplData_:function(){return{href:this.href,hrefTarget:this.hrefTarget,type:this.mType,btnCls:this.align?this.baseCls+"-"+this.align:"",iconUrl:this.icon,iconCls:this.iconCls||
"",label:this.label||"",tabIndex:this.tabIndex,innerSpanStyle:"",splitCls:this.split?this.baseCls+"-"+this.arrowCls+" "+(this.baseCls+"-"+this.arrowCls+"-"+this.arrowAlign):"",closable:this.closable,closeText:this.closeText}},setCompCls_:function(){var a=this.getCompCls_();if(!MT.isEmpty(this.oldCls)){this.removeUiCls(this.oldCls);this.removeUiCls(this.pressedCls)}this.oldCls=a;this.addUiCls(a)},getCompCls_:function(){var a=[];if(this.iconCls||this.icon)this.label?a.push("icon-text-"+this.iconAlign):
a.push("icon");else this.label&&a.push("noicon");this.pressed&&a.push(this.pressedCls);return a},beforeRender:function(){this.callParent();this.oldCls=this.getCompCls_();this.addUiCls(this.oldCls);MT.mixin(this.renderData,this.getTplData_());this.scale&&this.setScale(this.scale)},setScale:function(a){var f=this.ui.replace("-"+this.scale,""),e=this.parentComp;if(e&&e.resetChildUi)f+="-"+e.mType;this.scale=a;this.setUi(f)},setUi:function(a){var f=this.scale;if(f&&!a.match(f))a=a+"-"+f;this.callParent([a])},
onRender:function(){var a,f=MT.func;this.callParent(arguments);this.split&&this.arrowTooltip&&this.arrowEl.tag.setAttribute("title",this.arrowTooltip);a=this.node;this.tooltip&&this.setTooltip(this.tooltip,true);if(this.handleMouseEvents){a.on("mouseenter",f.bind(this.onMouseOver_,this));a.on("mouseleave",f.bind(this.onMouseOut_,this));a.on("mousedown",f.bind(this.onMouseDown_,this));if(this.split)a.on("mousemove",f.bind(this.onMouseMove_,this));a.on("mouseup",f.bind(this.onMouseUp_,this))}if(this.menu){this.menu.on("show",
this.onMenuShow,this);this.menu.on("hide",this.onMenuHide,this)}a.on(this.clickEvent,f.bind(this.onClick_,this));MT.BtnToggleMgr.register(this)},onClick_:function(a){if(this.preventDefault||this.disabled&&this.href&&a)a.preventDefault();if(a.button===0)if(!this.disabled){this.doToggle();this.maybeShowMenu();this.fireHandler(a)}},fireHandler:function(a){var f=this.handler;if(this.fire("click",[this,a])!==false){if(f)f.call(this.scope||this,this,a);this.blur()}},doToggle:function(){if(this.enableToggle&&
(this.allowDepress!==false||!this.pressed))this.toggle()},onMouseOver_:function(a){if(!this.disabled&&!a.within(this.node,true,true))this.onMouseEnter_(a)},onMouseEnter_:function(a){this.addUiCls(this.overCls);this.fire("mouseover",[this,a])},onMouseOut_:function(a){if(!a.within(this.node,true,true)){if(this.overMenuTrigger)this.onMenuTriggerOut(a);this.onMouseLeave_(a)}},onMouseLeave_:function(a){this.removeUiCls(this.overCls);this.fire("mouseout",[this,a])},onMouseDown_:function(a){!this.disabled&&
a.button===0&&this.addUiCls(this.pressedCls)},onMouseUp_:function(a){if(a.button===0)this.pressed||this.removeUiCls(this.pressedCls)},onMouseMove_:function(a){var f=this.node,e=this.overMenuTrigger,d;if(this.split){if(this.arrowAlign==="right"){d=a.pageX-f.getX();f=f.width()}else{d=a.pageY-f.getY();f=f.height()}if(d>f-this.getTriggerSize()){if(!e)this.onMenuTriggerOver(a)}else if(e)this.onMenuTriggerOut(a)}},getTriggerSize:function(){var a=this.triggerSize,f,e;if(a===void 0){a=this.node;e=this.childCt.btnWrap;
f=this.arrowAlign;f=f.charAt(0);a=this.triggerSize=a.getPadding(f)+a.getBorderWidth(f)+e.getPadding(f)+e.getBorderWidth(f)}return a},onMenuShow:function(){this.ignoreNextClick=0;this.addUiCls(this.menuActiveCls);this.fire("menushow",[this,this.menu])},onMenuHide:function(){this.removeUiCls(this.menuActiveCls);this.ignoreNextClick=MT.func.delay(this.restoreClick,250,this);this.fire("menuhide",[this,this.menu])},restoreClick:function(){this.ignoreNextClick=0},onMenuTriggerOver:function(a){this.overMenuTrigger=
true;this.fire("menutriggerover",[this,this.menu,a])},onMenuTriggerOut:function(a){delete this.overMenuTrigger;this.fire("menutriggerout",[this,this.menu,a])},getLabel:function(){return this.label},setLabel:function(a){this.label=a;if(this.rendered){this.childCt.btnInnerEl.setHtml(a||"");this.setCompCls_()}return this},getFocusEl:function(){return this.getTargetEl()},setIconCls:function(a){var f=this.childCt.btnIconEl,e=this.iconCls;this.iconCls=a;if(f){f.removeClass(e);f.addClass(a||"");this.setCompCls_()}return this},
setIcon:function(a){var f=this.childCt.btnIconEl;this.icon=a;if(f){f.setStyle("background-image",a?"url("+a+")":"");this.setCompCls_()}return this},setHandler:function(a,f){this.handler=a;this.scope=f;return this},setTooltip:function(a){if(this.rendered)if(MT.isObject(a))this.tooltip=a;else this.childCt.btnEl.tag.setAttribute("title",a);else this.tooltip=a;return this},setTextAlign:function(a){var f=this.childCt.btnEl;if(f){f.removeClass(this.baseCls+"-"+this.textAlign);f.addClass(this.baseCls+"-"+
a)}this.textAlign=a;return this},toggle:function(a,f){a=a===undefined?!this.pressed:!!a;if(a!==this.pressed){if(this.rendered)this[a?"addUiCls":"removeUiCls"](this.pressedCls);this.pressed=a;if(!f){this.fire("toggle",[this,a]);if(this.toggleHandler)this.toggleHandler.call(this.scope||this,this,a)}}return this},maybeShowMenu:function(){this.menu&&!this.hasVisibleMenu()&&!this.ignoreNextClick&&this.showMenu()},showMenu:function(){if(this.rendered&&this.menu){this.menu.isVisible()&&this.menu.hide();
this.menu.showBy(this.node,this.menuAlign,!MT.Config.isStrict&&MT.ua.ie||MT.ua.ie6?[-2,-2]:undefined)}return this},hideMenu:function(){this.hasVisibleMenu()&&this.menu.hide();return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},enable:function(){this.callParent(arguments);this.removeUiCls("disabled");return this},disable:function(){this.callParent(arguments);this.addUiCls("disabled");this.removeUiCls(this.overCls);return this},beforeDestroy:function(){this.menu&&
this.destroyMenu!==false&&this.menu.destroy();this.callParent()},onDestroy:function(){this.rendered&&MT.BtnToggleMgr.unregister(this);this.callParent()}},function(){var a={},f=function(e,d){if(d){var c=a[e.toggleGroup],b=c.length,g;for(g=0;g<b;g++)c[g]!==e&&c[g].toggle(false)}};MT.BtnToggleMgr={register:function(e){if(e.toggleGroup){var d=a[e.toggleGroup];d||(d=a[e.toggleGroup]=[]);d.push(e);e.on("toggle",f)}},unregister:function(e){if(e.toggleGroup){var d=a[e.toggleGroup];if(d){MT.array.remove(d,
e);e.off("toggle",f)}}},getPressed:function(e){e=a[e];var d=0,c;if(e)for(c=e.length;d<c;d++)if(e[d].pressed===true)return e[d];return null}}});
MT.mtClass("MT.ui.SplitButton",{$extend:"MT.ui.Button",mType:"splitButton",arrowCls:"split",split:true,setArrowHandler:function(a,f){this.arrowHandler=a;this.scope=f},onClick_:function(a){a.preventDefault();if(!this.disabled)if(this.overMenuTrigger){this.maybeShowMenu();this.fire("arrowclick",[this,a]);if(this.arrowHandler)this.arrowHandler.call(this.scope||this,this,a)}else{this.doToggle();this.fireHandler(a)}}});
MT.mtClass("MT.ui.Tool",{$extend:"MT.ui.Component",baseCls:MT.cssPrefix+"tool",disabledCls:MT.cssPrefix+"tool-disabled",toolPressedCls:MT.cssPrefix+"tool-pressed",toolOverCls:MT.cssPrefix+"tool-over",mType:"tool",childEls:["toolEl"],width:15,height:15,haltEvent:true,renderTpl:'<img id="${id}-toolEl" src="${src}" class="${baseCls}-${type}" role="presentation"/>',initializer:function(){this.callParent(arguments);this.type=this.type||this.id;MT.mixin(this.renderData,{baseCls:this.baseCls,src:MT.BLANK_IMAGE_URL,
type:this.type,id:this.id});this.tooltip=this.tooltip||""},bindUI_:function(){var a=this.childCt.toolEl.tag,f=MT,e=f.func;f.on(a,"click",e.bind(this.onClick_,this));f.on(a,"mousedown",e.bind(this.onMouseDown_,this));f.on(a,"mouseover",e.bind(this.onMouseOver_,this));f.on(a,"mouseout",e.bind(this.onMouseOut_,this))},afterRender:function(){this.callParent(arguments);this.bindUI_();this.tooltip&&this.childCt.toolEl.tag.setAttribute("title",this.tooltip)},onClick_:function(a){var f,e;if(this.disabled)return false;
f=this.host;this.node.removeClass(this.toolPressedCls);this.node.removeClass(this.toolOverCls);this.haltEvent!==false&&a.halt();if((e=this.handler||this.click)&&MT.isFunction(e))e.call(this.scope||this,a,this.toolEl,f,this);return true},onMouseDown_:function(){if(this.disabled)return false;this.node.addClass(this.toolPressedCls)},onMouseOver_:function(){if(this.disabled)return false;this.node.addClass(this.toolOverCls)},onMouseOut_:function(){this.node.removeClass(this.toolOverCls)},getFocusEl:function(){return this.node},
setType:function(a){this.type=a;if(this.rendered)this.childCt.toolEl.tag.className=this.baseCls+"-"+a;return this}});
MT.mtClass("MT.ui.Header",{$extend:"MT.ui.Container",defType:"tool",isHeader:true,indicateDrag:false,baseCls:MT.cssPrefix+"panel-header",childEls:["innerCt","textEl"],titleAlign:"left",renderTpl:['<div id="${id}-body" class="${baseCls}-body">','<div id="${id}-innerCt" class="${innerCls}">','<div id="${id}_hd"{#if titleAlign} style="text-align:${titleAlign}"{#/if}><span id="${id}-textEl" class="${baseCls}-text ${baseCls}-text-${ui}">${title}</span></div>',"</div>","</div>"],initializer:function(){this.callParent(arguments);
this.indicateDragCls=MT.cssPrefix+"widget-draggable";this.title=this.title||"";this.tools=this.tools||[];this.items=this.items||[];this.renderData={id:this.id,baseCls:this.baseCls,ui:this.ui,title:this.title,titleAlign:this.titleAlign,innerCls:this.innerCls}},afterRender:function(){var a=this;MT.dom.setUnselectable(a.node,true);a.indicateDrag&&a.addCls(a.indicateDragCls);a.node.on("click",MT.func.bind(a.onClick,a));MT.object.map(a.tools,function(f){a.wrapTool_(f)});a.items=a.items.concat(a.tools);
a.callParent()},onClick:function(a){var f=a.target;f&&!MT.string.contains(f.className,MT.cssPrefix+"tool")&&this.fire("click",[a,this])},setTitle:function(a){if(this.rendered)this.childCt.textEl.setHtml(a||"");this.title=a},addTool:function(a){var f=this;if(MT.isArray(a)){a=MT.object.map(a,function(e){f.wrapTool_(e)});f.items=f.items.concat(a)}else{a=f.wrapTool_(a);f.items.push(a)}f.addComp(a);f.layout&&f.layout.doLayout()},getFocusEl:function(){return this.node},wrapTool_:function(a){a.mType="tool";
a.renderTo=a.renderTo||this.childCt.innerCt;return a}});
MT.mtClass("MT.ui.Panel",{$extend:"MT.ui.Container",baseCls:MT.cssPrefix+"panel",mType:"panel",isPanel:true,childEls:["body"],border:true,closeable:false,closeAction:"destroy",noHeader:false,header:undefined,titleAlign:"left",layout:{hov:"v"},renderTpl:['<div id="${id}-body" class="${baseCls}-body ${baseCls}-body-${ui}{#if bodyCls} ${bodyCls}{#/if}"','{#if bodyStyle} style="${bodyStyle}"{#/if}>',"</div>"],initializer:function(){this.callParent(arguments)},initRenderData_:function(){return MT.mixin({id:this.id,
bodyCls:this.bodyCls,baseCls:this.baseCls,bodyStyle:this.bodyStyle,ui:this.ui},this.renderData)},addBodyCls:function(a){this.rendered&&this.childCt.body.addClass(a)},removeBodyCls:function(a){this.rendered&&this.childCt.body.removeClass(a)},getBody:function(){return this.childCt.body},setBodyStyle:function(a){this.rendered&&this.childCt.body.setStyle(a);return this},afterRender:function(){this.setHeader();this.closable&&this.addTool({type:"close",pack:"right",handler:MT.func.bind(this.close,this,
[])});this.addTools();this.bodyPadding!==undefined&&this.childCt.body.setStyle({padding:MT.dom.addUnits(this.bodyPadding)});this.callParent()},getTargetEl:function(){return this.childCt.body||this.node},getFocusEl:function(){return this.node},setHeader:function(){var a=this.header,f=this.title,e=this.tools;if(!this.noHeader&&(f||e&&e.length))if(a)a.show();else{a=this.header=new MT.ui.Header({parentComp:this,id:this.id+"_header",baseCls:this.baseCls+"-header",title:f,titleAlign:this.titleAlign,tools:e,
indicateDrag:this.draggable,renderPos:this.renderPos||0,dock:"top"});this.addChild(a)}else a&&a.hide()},setTitle:function(a){var f=this.header;f&&a&&f.setTitle(a)},close:function(){this.fire("beforeclose",this)!==false&&this.doClose()},doClose:function(){this.fire("close",this);this[this.closeAction]()},addTools:MT.noop,addTool:function(a){var f=this.header;f&&f.addTool(a)}});
MT.mtClass("MT.ui.Separator",{$extend:"MT.ui.Component",mType:"separator",isSeparator:true,baseCls:MT.cssPrefix+"toolbar-separator",afterRender:function(){var a=this.parentComp;this.callParent();a.vertical?this.addUiCls("vertical"):this.addUiCls("horizontal")}});MT.mtClass("MT.ui.Spacer",{$extend:"MT.ui.Component",mType:"spacer",isSeparator:true,baseCls:MT.cssPrefix+"toolbar-spacer",afterRender:function(){var a=this.parentComp;this.callParent();a.vertical?this.addUiCls("vertical"):this.addUiCls("horizontal")}});
MT.mtClass("MT.ui.Textitem",{$extend:"MT.ui.Component",baseCls:MT.cssPrefix+"toolbar-text",text:"",mType:"textitem",renderTpl:"${text}",beforeRender:function(){this.callParent();MT.mixin(this.renderData,{text:this.text},true)},setText:function(a){this.rendered&&this.node.html(a);this.text=a}});
MT.mtClass("MT.ui.Toolbar",{$extend:"MT.ui.Container",isToolbar:true,mType:"toolbar",baseCls:MT.cssPrefix+"toolbar",itemCls:MT.cssPrefix+"toolbar-item",resetChildUi:true,vertical:false,childEls:["innerCt"],renderTpl:['<div id="${id}-innerCt" class="${innerCls}">',"</div>"],initializer:function(){this.callParent(arguments);if(this.vertical)this.layout={hov:"v"};this.dock=this.dock||"top";MT.mixin(this.renderData,{innerCls:this.innerCls})},afterRender:function(){this.mapItems();this.callParent();this.vertical&&
this.addUiCls("vertical");this.footer&&this.addUiCls("footer")},mapItems:function(){var a=this,f=a.items,e;a.getNode();var d=a.childCt.innerCt;a.items=MT.array.map(f,function(c){if(typeof c==="string"){e=c==="-"?{mType:"separator"}:c===" "?{mType:"spacer"}:{mType:"textitem",text:c};e.renderTo=d;if(a.vertical)e.pack=e.pack||"top";return e}c.renderTo=d;if(a.vertical)c.pack=c.pack||"top";return c})}});
MT.mtClass("MT.ui.Menu.Mgr",{menus:{},groups:{},attached:false,lastShow:new Date,init:function(){this.active=new MT.util.HashMap},register:function(a){this.active||this.init();if(a.floating){this.menus[a.id]=a;a.on("beforehide",this.onBeforeHide,this);a.on("hide",this.onHide,this);a.on("beforeshow",this.onBeforeShow,this);a.on("show",this.onShow,this)}},unregister:function(a){var f=this.active;delete this.menus[a.id];f.removeByKey(a.id);a.off("beforehide",this.onBeforeHide);a.off("hide",this.onHide);
a.off("beforeshow",this.onBeforeShow);a.off("show",this.onShow)},get:function(a){var f=this.menus;if(typeof a=="string"){if(!f)return null;return f[a]}else return a.isMenu?a:MT.isArray(a)?new MT.ui.Menu({items:a}):new MT.ui.Menu(a)},hideAll:function(){var a=this.active;if(a&&a.length>0){a=a.getValues();MT.each(a,function(f){f.hide()});return true}return false},onBeforeShow:function(a){var f=a.parentMenu;this.active.removeByKey(a.id);if(!f&&!a.allowOtherMenus)this.hideAll();else f&&f.activeChild&&
a!=f.activeChild&&f.activeChild.hide()},onShow:function(a){var f=this.active,e=this.attached;a.getNode();f.getValues();this.lastShow=new Date;f.add(a.id,a);if(!e){MT.dom.getDoc().on("mousedown",MT.func.bind(this.onMouseDown,this));this.attached=true}a.toFront()},onBeforeHide:function(a){a.activeChild&&a.activeChild.hide();if(a.autoHideTimer){clearTimeout(a.autoHideTimer);delete a.autoHideTimer}},onHide:function(a){var f=this.active;f.removeByKey(a.id);if(f.length<1){MT.dom.getDoc().off("mousedown",
MT.func.bind(this.onMouseDown,this));this.attached=false}},onMouseDown:function(a){var f=this.active,e=this.lastShow;a=a.target.className||"";try{e.getElapsed()>50&&f.length>0&&a.indexOf(MT.cssPrefix+"menu")==-1&&this.hideAll()}catch(d){this.hideAll()}},registerCheckable:function(a){var f=this.groups,e=a.group;if(e){f[e]||(f[e]=[]);f[e].push(a)}},unregisterCheckable:function(a){var f=this.groups,e=a.group;e&&MT.array.remove(f[e],a)},onCheckChange:function(a,f){var e=this.groups,d=a.group,c=0,b;if(d&&
f){e=e[d];for(d=e.length;c<d;c++){b=e[c];b!=a&&b.setChecked(false)}}}},function(){MT.namespace("menu");MT.menu.Mgr=new this});
MT.mtClass("MT.ui.Menu",{$extend:"MT.ui.Panel",isMenu:true,mType:"menu",allowOtherMenus:false,defaultAlign:"tl-bl?",floating:true,constrain:true,ignoreParentClicks:false,visible:false,hideMode:"visibility",showSeparator:true,minWidth:120,childEls:["body","innerCt"],initializer:function(){var a=this,f=MT.cssPrefix,e=[f+"menu"],d=a.bodyCls?[a.bodyCls]:[];MT.menu.Mgr.register(a);MT.isArray(a.renderTpl)&&a.renderTpl.length==3&&a.renderTpl.splice(2,0,'<div id="${id}-innerCt" class="'+MT.cssPrefix+'widget-inner"></div>');
a.plain&&e.push(f+"menu-plain");a.cls=e.join(" ");d.unshift(f+"menu-body");a.bodyCls=d.join(" ");if(a.floating===false&&a.initConfig.visible)a.visible=true;a.callParent(arguments);a.layout={hov:"v",type:"scroller"};a.on("beforeshow",function(){var c=!!a.items.length;c&&a.rendered&&a.node.setStyle({visibility:''});return c})},beforeRender:function(){this.callParent();MT.mixin(this.renderData,{innerCls:this.innerCls})},afterRender:function(){var a=this.node,f;this.mapItems();if(this.showSeparator){f=
'<div class="'+MT.cssPrefix+'menu-icon-separator">&#160;</div>';this.childCt.innerCt.prepend(f);this.iconSepEl=MT.get($(this.childCt.body.tag).find("."+MT.cssPrefix+"menu-icon-separator")[0])}this.callParent(arguments);this.mouseMonitor=a.monitorMouseLeave(this.onMouseLeave,100,this);a.on("click",MT.func.bind(this.onClick,this));a.on("mouseover",MT.func.bind(this.onMouseOver,this))},afterLayout:function(){},showBy:function(a,f,e){if(this.floating&&a){this.show();this.setPagePosition(this.node.getAlignToXY(a.node||
a,f||this.defaultAlign,e));this.setVerticalPosition()}return this},show:function(){var a,f=this.maxHeight;this.rendered||this.doAutoRender();if(this.floating){a=MT.get(this.node.tag.parentNode);a=a.getViewSize().height;this.maxHeight=Math.min(f||a,a)}return this.callParent(arguments)},setVerticalPosition:function(){var a,f=this.node,e=f.getY(),d=e,c=f.outerHeight(),b=MT.dom.getViewportHeight();a=MT.get(f.tag.parentNode);var g=a.getViewSize().height,h=e-a.getScroll().top;if(this.floating){a=this.maxHeight?
this.maxHeight:g-h;if(c>g)d=e-h;else if(a<c)d=e-(c-a);else if(e+c>b)d=b-c}f.setY(d)},canActivateItem:function(a){return a&&!a.disabled&&a.isVisible()&&(a.canActivate||a.mType.indexOf("menuItem")==-1)},deactivateActiveItem:function(){if(this.activeItem){this.activeItem.deactivate();this.activeItem.activated||delete this.activeItem}if(this.focusedItem){this.focusedItem.blur();this.focusedItem.hasFocus||delete this.focusedItem}},getFocusEl:function(){return this.node},hide:function(){this.deactivateActiveItem();
this.callParent(arguments)},getItemFromEv:function(a){return this.getChildByElement(a.target)},mapItems:function(){var a=this,f=a.items,e,d,c;a.getNode();var b=MT.cssPrefix,g=a.childCt.innerCt;a.items=MT.array.map(f,function(h){if(typeof h==="string")e=h==="-"?{mType:"menuSeparator"}:{mType:"menuItem",canActivate:false,hideOnClick:false,plain:true,text:h};else if(MT.isObject(h))e=h;if(d=e.mType==="menuItem"){e.parentMenu=a;if(MT.isBoolean(e.checked))e.mType="menuCheckItem"}if(!d&&!e.dock){c=[b+"menu-item",
b+"menu-item-cmp"];if(!a.plain&&(e.indent===true||e.iconCls==="no-icon"))c.push(b+"menu-item-indent");e.cls=(e.cls?e.cls:"")+" "+c.join(" ")}e.minWidth=e.minWidth||a.minWidth;e.renderTo=g;e.pack="top";return e})},onClick:function(a){var f;if(this.disabled)a.halt();else{if((f=a.type==="click"?this.getItemFromEv(a):this.activeItem)&&f.isMenuItem)if(!f.menu||!this.ignoreParentClicks)f.onClick(a);else a.halt();if(!f||f.disabled)f=undefined;this.fire("click",[this,f,a])}},onMouseOver:function(a){var f=
this.getItemFromEv(a);fromEl=a.relatedTarget;mouseEnter=!this.node.contains(fromEl);parentMenu=this.parentMenu;parentItem=this.getParent();if(mouseEnter&&parentMenu){parentMenu.setActiveItem(parentItem);parentItem.cancelDeferHide();parentMenu.mouseMonitor.mouseenter()}if(!this.disabled){if(f&&!f.activated){this.setActiveItem(f);f.activated&&f.expandMenu&&f.expandMenu()}mouseEnter&&this.fire("mouseenter",[this,a]);this.fire("mouseover",[this,f,a])}},setActiveItem:function(a){if(a&&a!=this.activeItem){this.deactivateActiveItem();
if(this.canActivateItem(a))if(a.activate){a.activate();if(a.activated){this.focusedItem=this.activeItem=a;this.focus()}}else{a.focus();this.focusedItem=a}a.node.scrollIntoView(this.childCt.innerCt)}},onMouseLeave:function(a){this.deactivateActiveItem();this.disabled||this.fire("mouseleave",[this,a])},onDestroy:function(){MT.menu.Mgr.unregister(this);delete this.parentMenu;delete this.ownerButton;this.rendered&&this.node.unMonMouseEnLv(this.mouseMonitor);this.callParent(arguments)}});
MT.mtClass("MT.ui.MenuItem",{$extend:"MT.ui.Component",isMenuItem:true,mType:"menuItem",activeCls:MT.cssPrefix+"menu-item-active",disableCls:MT.cssPrefix+"menu-item-disabled",arrowCls:MT.cssPrefix+"menu-item-arrow",canActivate:true,hideOnClick:true,clickHideDelay:1,destroyMenu:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,maskOnDisable:false,childEls:["itemEl","iconEl","textEl","arrowEl"],linkCls:MT.cssPrefix+"menu-item-link",biconCls:MT.cssPrefix+"menu-item-icon",textCls:MT.cssPrefix+
"menu-item-text",renderTpl:["{#if plain}","${text}","{#else}",'<a id="${id}-itemEl" class="${linkCls}" href="${href}"{#if hrefTarget} target="${hrefTarget}"{#/if} hidefocus="true" unselectable="on">','<img id="${id}-iconEl" src="${icon}" class="${biconCls} ${iconCls}" />','<span id="${id}-textEl" class="${textCls}"{#if arrowCls} style="margin-right: 17px;"{#/if}>${text}</span>','<img id="${id}-arrowEl" src="${blank}" class="${arrowCls}" />',"</a>","{#/if}"],initializer:function(){var a=MT.cssPrefix,
f=[a+"menu-item"];this.callParent(arguments);this.plain&&f.push(a+"menu-item-plain");this.cls&&f.push(this.cls);this.cls=f.join(" ");if(this.menu){a=this.menu;delete this.menu;this.setMenu(a)}},activate:function(){if(!this.activated&&this.canActivate&&this.rendered&&!this.disabled&&this.isVisible()){this.node.addClass(this.activeCls);this.focus();this.activated=true;this.fire("activate",this)}},getFocusEl:function(){return this.childCt.itemEl},deactivate:function(){if(this.activated){this.node.removeClass(this.activeCls);
this.blur();this.hideMenu();this.activated=false;this.fire("deactivate",this)}},hideMenu:function(a){if(this.menu){clearTimeout(this.expandMenuTimer);this.hideMenuTimer=MT.func.delay(this.deferHideMenu,MT.isNumber(a)?a:this.menuHideDelay,this)}},deferExpandMenu:function(){var a=MT;if(!this.menu.rendered||!this.menu.isVisible()){this.parentMenu.activeChild=this.menu;this.menu.parentMenu=this.parentMenu;this.menu.showBy(this,this.menuAlign,!a.Config.isStrict&&a.ua.ie||a.ua.ie6?[-2,-2]:undefined)}},
deferHideMenu:function(){this.menu.isVisible()&&this.menu.hide()},cancelDeferHide:function(){clearTimeout(this.hideMenuTimer)},deferHideParentMenus:function(){MT.menu.Mgr.hideAll()},expandMenu:function(a){if(this.menu){this.cancelDeferHide();if(a===0)this.deferExpandMenu();else this.expandMenuTimer=MT.func.delay(this.deferExpandMenu,MT.isNumber(a)?a:this.menuExpandDelay,this)}},onClick:function(a){this.href||a.halt();if(!this.disabled){if(this.hideOnClick)this.deferHideParentMenusTimer=MT.func.delay(this.deferHideParentMenus,
this.clickHideDelay,this);if(this.handler)this.handler.call(this.scope||this,this,a);this.fire("click",[this,a]);this.hideOnClick||this.focus()}},onRemoved:function(){this.activated&&this.parentMenu.activeItem===this&&this.parentMenu.deactivateActiveItem();this.callParent(arguments);delete this.parentMenu;delete this.ownerButton},onDestroy:function(){clearTimeout(this.expandMenuTimer);this.cancelDeferHide();clearTimeout(this.deferHideParentMenusTimer);this.setMenu(null);this.callParent(arguments)},
beforeRender:function(){var a=MT.BLANK_IMAGE_URL;this.callParent();MT.mixin(this.renderData,{href:this.href||"#",hrefTarget:this.hrefTarget,linkCls:this.linkCls,biconCls:this.biconCls,textCls:this.textCls,icon:this.icon||a,iconCls:(this.iconCls||"")+(this.checkChangeDisabled?" "+this.disableCls:""),plain:this.plain,text:this.text,arrowCls:this.menu?this.arrowCls:"",blank:a})},setMenu:function(a,f){var e=this.menu;if(e){delete e.parentMenu;this.removeChild(e);if(f===true||f!==false&&this.destroyMenu)e.destroy()}(this.menu=
a?MT.menu.Mgr.get(a):null)&&this.addChild(this.menu);if(this.rendered&&!this.destroying)this.childCt.arrowEl[this.menu?"addClass":"removeClass"](this.arrowCls)},setHandler:function(a,f){this.handler=a||null;this.scope=f},setIcon:function(a){var f=this.childCt.iconEl;if(f)f.src=a||MT.BLANK_IMAGE_URL;this.icon=a},setIconCls:function(a){var f=this.childCt.iconEl;if(f){this.iconCls&&f.removeClass(this.iconCls);a&&f.addClass(a)}this.iconCls=a},setText:function(a){this.text=a;if(this.rendered)node.html(a||
"")}});MT.mtClass("MT.ui.MenuSeparator",{$extend:"MT.ui.Menu.Item",mType:"menuSeparator",isMenuSeparator:true,canActivate:false,focusable:false,hideOnClick:false,plain:true,separatorCls:MT.cssPrefix+"menu-item-separator",text:"&nbsp;",afterRender:function(){var a=this.separatorCls+" "+MT.cssPrefix+"menu-item";this.callParent();this.addCls(a)}});
MT.mtClass("MT.ui.MenuCheckItem",{$extend:"MT.ui.MenuItem",mType:"menuCheckItem",checkedCls:MT.cssPrefix+"menu-item-checked",uncheckedCls:MT.cssPrefix+"menu-item-unchecked",groupCls:MT.cssPrefix+"menu-group-icon",hideOnClick:false,checkChangeDisabled:false,initializer:function(){this.callParent(arguments);MT.menu.Mgr.registerCheckable(this);if(this.group){if(!this.iconCls)this.iconCls=this.groupCls;if(this.initConfig.hideOnClick!==false)this.hideOnClick=true}},afterRender:function(){this.callParent();
this.checked=!this.checked;this.setChecked(!this.checked,true);this.checkChangeDisabled&&this.disableCheckChange()},disableCheckChange:function(){var a=this.chidlCt.iconEl;a&&a.addClass(this.disableCls);this.checkChangeDisabled=true},enableCheckChange:function(){var a=this.childCt.iconEl;a&&a.removeClass(this.disabledCls);this.checkChangeDisabled=false},onClick:function(){!this.disabled&&!this.checkChangeDisabled&&!(this.checked&&this.group)&&this.setChecked(!this.checked);this.callParent(arguments)},
onDestroy:function(){MT.menu.Mgr.unregisterCheckable(this);this.callParent(arguments)},setChecked:function(a,f){if(this.checked!==a&&(f||this.fire("beforecheckchange",[this,a])!==false)){if(this.node)this.node[a?"addClass":"removeClass"](this.checkedCls)[!a?"addClass":"removeClass"](this.uncheckedCls);this.checked=a;MT.menu.Mgr.onCheckChange(this,a);if(!f){this.checkHandler&&this.checkHandler.call(this.scope,this,a);this.fire("checkchange",[this,a])}}}});
MT.mtClass("MT.ui.Window",{$extend:"MT.ui.Panel",baseCls:MT.cssPrefix+"window",resizable:false,draggable:true,childEls:["body"],mType:"window",minimizable:false,maximizable:false,visible:false,closable:true,hideMode:"visibility",floating:true,isWindow:true,initializer:function(){this.callParent(arguments)},afterRender:function(){this.callParent();if(this.floating)this.node.on("mousedown",MT.func.bind(this.onMouseDown_,this));if(this.maximizable)this.header.getNode().on("dblclick",MT.func.bind(this.toggleMaximize,
this));this.bindDD()},getFocusEl:function(){return this.node},onMouseDown_:function(){this.floating&&this.toFront(true)},bindDD:function(){var a=this,f=a.delegate&&a.delegate.dd,e=a.getNode();if(!f)return false;f.addInvalid("img");f.on("drag:start",function(){e.setStyle("opacity:.5")},a);f.on("drag:drag",function(d){if(a.useProxy&&a.proxy){a.proxy.isVisible()||a.proxy.setStyle("zIndex:"+(e.getStyle("zIndex")+3)).show();a.proxy.setLeftTop(d.pageX,d.pageY)}else a.setPagePosition(d.pageX,d.pageY)},a);
f.on("drag:end",function(d){a.proxy&&a.proxy.isVisible()&&a.proxy.hide();a.setPagePosition(d.pageX,d.pageY);e.setStyle("opacity:1")},a)},doClose:function(){if(this.visible)this.hide(this.animateTarget,this.doClose,this);else{this.fire("close",this);this.closeAction=="destroy"&&this.destroy()}},addTools:function(){this.callParent();this.minimizable&&this.addTool({type:"minimize",pack:"right",handler:MT.func.bind(this.minimize,this,[])})},minimize:function(){this.fire("minimize",this);return this},
toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()}});
